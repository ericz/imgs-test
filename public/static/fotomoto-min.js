/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
function FMUUID(){this.id=this.createFMUUID()}FMJQ=function(){return function(a,b){function c(a){return J.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function d(a){if(!lc[a]){var b=G.body,c=J("<"+a+">").appendTo(b),d=c.css("display");c.remove();if(d==="none"||d===""){mc||(mc=G.createElement("iframe"),mc.frameBorder=mc.width=mc.height=0),b.appendChild(mc);if(!nc||!mc.createElement)nc=(mc.contentWindow||mc.contentDocument).document,nc.write((G.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),nc.close();c=nc.createElement(a),nc.body.appendChild(c),d=J.css(c,"display"),b.removeChild(mc)}lc[a]=d}return lc[a]}function e(a,b){var c={};return J.each(rc.concat.apply([],rc.slice(0,b)),function(){c[this]=a}),c}function f(){sc=b}function g(){return setTimeout(f,0),sc=J.now()}function h(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function i(){try{return new a.XMLHttpRequest}catch(b){}}function j(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},f,g,h=d.length,i,j=d[0],k,l,m,n,o;for(f=1;f<h;f++){if(f===1)for(g in a.converters)typeof g=="string"&&(e[g.toLowerCase()]=a.converters[g]);k=j,j=d[f];if(j==="*")j=k;else if(k!=="*"&&k!==j){l=k+" "+j,m=e[l]||e["* "+j];if(!m){o=b;for(n in e){i=n.split(" ");if(i[0]===k||i[0]==="*"){o=e[i[1]+" "+j];if(o){n=e[n],n===!0?m=o:o===!0&&(m=n);break}}}}!m&&!o&&J.error("No conversion from "+l.replace(" "," to ")),m!==!0&&(c=m?m(c):o(n(c)))}}return c}function k(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function l(a,b,c,d){if(J.isArray(b))J.each(b,function(b,e){c||Ob.test(a)?d(a,e):l(a+"["+(typeof e=="object"||J.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)l(a+"["+e+"]",b[e],c,d);else d(a,b)}function m(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bc,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=m(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=m(a,c,d,e,"*",g)),l}function n(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(J.isFunction(c)){var d=b.toLowerCase().split(Zb),e=0,f=d.length,g,h,i;for(;e<f;e++)g=d[e],i=/^\+/.test(g),i&&(g=g.substr(1)||"*"),h=a[g]=a[g]||[],h[i?"unshift":"push"](c)}}}function o(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?Ib:Jb;if(d>0)return c!=="border"&&J.each(e,function(){c||(d-=parseFloat(J.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(J.css(a,c+this))||0:d-=parseFloat(J.css(a,"border"+this+"Width"))||0}),d+"px";d=Kb(a,b,b);if(d<0||d==null)d=a.style[b]||0;return d=parseFloat(d)||0,c&&J.each(e,function(){d+=parseFloat(J.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(J.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(J.css(a,c+this))||0)}),d+"px"}function p(a,b){b.src?J.ajax({url:b.src,async:!1,dataType:"script"}):J.globalEval((b.text||b.textContent||b.innerHTML||"").replace(yb,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function q(a){J.nodeName(a,"input")?r(a):"getElementsByTagName"in a&&J.grep(a.getElementsByTagName("input"),r)}function r(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function s(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function t(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(J.expando)}}function u(a,b){if(b.nodeType===1&&!!J.hasData(a)){var c=J.expando,d=J.data(a),e=J.data(b,d);if(d=d[c]){var f=d.events;e=e[c]=J.extend({},d);if(f){delete e.handle,e.events={};for(var g in f)for(var h=0,i=f[g].length;h<i;h++)J.event.add(b,g+(f[g][h].namespace?".":"")+f[g][h].namespace,f[g][h],f[g][h].data)}}}}function v(a,b){return J.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function w(a,b,c){b=b||0;if(J.isFunction(b))return J.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return J.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=J.grep(a,function(a){return a.nodeType===1});if(lb.test(b))return J.filter(b,d,!c);b=J.filter(b,d)}return J.grep(a,function(a,d){return J.inArray(a,b)>=0===c})}function x(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function y(a,b){return(a&&a!=="*"?a+".":"")+b.replace($,"`").replace(_,"&")}function z(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=[],p=[],q=J._data(this,"events");if(!(a.liveFired===this||!q||!q.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(m=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var r=q.live.slice(0);for(h=0;h<r.length;h++)f=r[h],f.origType.replace(Y,"")===a.type?p.push(f.selector):r.splice(h--,1);e=J(a.target).closest(p,a.currentTarget);for(i=0,j=e.length;i<j;i++){l=e[i];for(h=0;h<r.length;h++){f=r[h];if(l.selector===f.selector&&(!m||m.test(f.namespace))&&!l.elem.disabled){g=l.elem,d=null;if(f.preType==="mouseenter"||f.preType==="mouseleave")a.type=f.preType,d=J(a.relatedTarget).closest(f.selector)[0],d&&J.contains(g,d)&&(d=g);(!d||d!==g)&&o.push({elem:g,handleObj:f,level:l.level})}}}for(i=0,j=o.length;i<j;i++){e=o[i];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,n=e.handleObj.origHandler.apply(e.elem,arguments);if(n===!1||a.isPropagationStopped()){c=e.level,n===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function A(a,c,d){var e=J.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,J.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function B(){return!0}function C(){return!1}function D(a,c,d){var e=c+"defer",f=c+"queue",g=c+"mark",h=J.data(a,e,b,!0);h&&(d==="queue"||!J.data(a,f,b,!0))&&(d==="mark"||!J.data(a,g,b,!0))&&setTimeout(function(){!J.data(a,f,b,!0)&&!J.data(a,g,b,!0)&&(J.removeData(a,e,!0),h.resolve())},0)}function E(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function F(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(N,"$1-$2").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:J.isNaN(d)?M.test(d)?J.parseJSON(d):d:parseFloat(d)}catch(f){}J.data(a,c,d)}else d=b}return d}var G=a.document,H=a.navigator,I=a.location,J=function(){function c(){if(!d.isReady){try{G.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/\d/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z])/ig,w=function(a,b){return b.toUpperCase()},x=H.userAgent,y,z,A,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,I=Array.prototype.indexOf,J={};return d.fn=d.prototype={constructor:d,init:function(a,c,e){var f,g,i,j;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!c&&G.body)return this.context=G,this[0]=G.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?f=h.exec(a):f=[null,a,null];if(f&&(f[1]||!c)){if(f[1])return c=c instanceof d?c[0]:c,j=c?c.ownerDocument||c:G,i=m.exec(a),i?d.isPlainObject(c)?(a=[G.createElement(i[1])],d.fn.attr.call(a,c,!0)):a=[j.createElement(i[1])]:(i=d.buildFragment([f[1]],[j]),a=(i.cacheable?d.clone(i.fragment):i.fragment).childNodes),d.merge(this,a);g=G.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return e.find(a);this.length=1,this[0]=g}return this.context=G,this.selector=a,this}return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a)}return d.isFunction(a)?e.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),d.makeArray(a,this))},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();return d.isArray(a)?D.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")"),e},each:function(a,b){return d.each(this,a,b)},ready:function(a){return d.bindReady(),z.done(a),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){return a.$===d&&(a.$=f),b&&a.jQuery===d&&(a.jQuery=e),d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!G.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;z.resolveWith(G,[d]),d.fn.trigger&&d(G).trigger("ready").unbind("ready")}},bindReady:function(){if(!z){z=d._Deferred();if(G.readyState==="complete")return setTimeout(d.ready,1);if(G.addEventListener)G.addEventListener("DOMContentLoaded",A,!1),a.addEventListener("load",d.ready,!1);else if(G.attachEvent){G.attachEvent("onreadystatechange",A),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}G.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!l.test(a)||isNaN(a)},type:function(a){return a==null?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||C.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(b,c,e){return a.DOMParser?(e=new DOMParser,c=e.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),e=c.documentElement,(!e||!e.nodeName||e.nodeName==="parsererror")&&d.error("Invalid XML: "+b),c},noop:function(){},globalEval:function(b){b&&i.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(v,w)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:F?function(a){return a==null?"":F.call(a)}:function(a){return a==null?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?D.call(c,a):d.merge(c,a)}return c},inArray:function(a,b){if(I)return I.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],i=0,j=a.length,k=a instanceof d||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||d.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,e),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var e=a[c];c=a,a=e}if(!d.isFunction(a))return b;var f=E.call(arguments,2),g=function(){return a.apply(c,f.concat(E.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||d.guid++,g},access:function(a,c,e,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)d.access(a,j,c[j],f,g,e);return a}if(e!==b){f=!h&&f&&d.isFunction(e);for(var k=0;k<i;k++)g(a[k],c,f?e.call(a[k],k,g(a[k],c)):e,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,e){return e&&e instanceof d&&!(e instanceof a)&&(e=a(e)),d.fn.init.call(this,c,e,b)},a.fn.init.prototype=a.fn;var b=a(G);return a},browser:{}}),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),y=d.uaMatch(x),y.browser&&(d.browser[y.browser]=!0,d.browser.version=y.version),d.browser.webkit&&(d.browser.safari=!0),i.test("Â ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(G),G.addEventListener?A=function(){G.removeEventListener("DOMContentLoaded",A,!1),d.ready()}:G.attachEvent&&(A=function(){G.readyState==="complete"&&(G.detachEvent("onreadystatechange",A),d.ready())}),d}(),K="done fail isResolved isRejected promise then always pipe".split(" "),L=[].slice;J.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,f,g,h,i,j;b&&(j=b,b=0);for(f=0,g=c.length;f<g;f++)h=c[f],i=J.type(h),i==="array"?e.done.apply(e,h):i==="function"&&a.push(h);j&&e.resolveWith(j[0],j[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},Deferred:function(a){var b=J._Deferred(),c=J._Deferred(),d;return J.extend(b,{then:function(a,c){return b.done(a).fail(c),this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return J.Deferred(function(d){J.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],f=c[1],g;J.isFunction(e)?b[a](function(){g=e.apply(this,arguments),g&&J.isFunction(g.promise)?g.promise().then(d.resolve,d.reject):d[f](g)}):b[a](d[f])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=K.length;while(c--)a[K[c]]=b[K[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b),b},when:function(a){function b(a){return function(b){c[a]=arguments.length>1?L.call(arguments,0):b,--f||g.resolveWith(g,L.call(c,0))}}var c=arguments,d=0,e=c.length,f=e,g=e<=1&&a&&J.isFunction(a.promise)?a:J.Deferred();if(e>1){for(;d<e;d++)c[d]&&J.isFunction(c[d].promise)?c[d].promise().then(b(d),g.reject):--f;f||g.resolveWith(g,c)}else g!==a&&g.resolveWith(g,e?[a]:[]);return g.promise()}}),J.support=function(){var a=G.createElement("div"),b=G.documentElement,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=a.getElementsByTagName("*"),d=a.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=G.createElement("select"),f=e.appendChild(G.createElement("option")),g=a.getElementsByTagName("input")[0],i={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55$/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},g.checked=!0,i.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,i.optDisabled=!f.disabled;try{delete a.test}catch(t){i.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){i.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),g=G.createElement("input"),g.value="t",g.setAttribute("type","radio"),i.radioValue=g.value==="t",g.setAttribute("checked","checked"),a.appendChild(g),j=G.createDocumentFragment(),j.appendChild(a.firstChild),i.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",k=G.getElementsByTagName("body")[0],m=G.createElement(k?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0},k&&J.extend(n,{position:"absolute",left:-1e3,top:-1e3});for(r in n)m.style[r]=n[r];m.appendChild(a),l=k||b,l.insertBefore(m,l.firstChild),i.appendChecked=g.checked,i.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,i.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",i.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",o=a.getElementsByTagName("td"),s=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",i.reliableHiddenOffsets=s&&o[0].offsetHeight===0,a.innerHTML="",G.defaultView&&G.defaultView.getComputedStyle&&(h=G.createElement("div"),h.style.width="0",h.style.marginRight="0",a.appendChild(h),i.reliableMarginRight=(parseInt((G.defaultView.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)===0),m.innerHTML="",l.removeChild(m);if(a.attachEvent)for(r in{submit:1,change:1,focusin:1})q="on"+r,s=q in a,s||(a.setAttribute(q,"return;"),s=typeof a[q]=="function"),i[r+"Bubbles"]=s;return m=j=e=f=k=h=a=g=null,i}(),J.boxModel=J.support.boxModel;var M=/^(?:\{.*\}|\[.*\])$/,N=/([a-z])([A-Z])/g;J.extend({cache:{},uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?J.cache[a[J.expando]]:a[J.expando],!!a&&!E(a)},data:function(a,c,d,e){if(!!J.acceptData(a)){var f=J.expando,g=typeof c=="string",h,i=a.nodeType,j=i?J.cache:a,k=i?a[J.expando]:a[J.expando]&&J.expando;if((!k||e&&k&&!j[k][f])&&g&&d===b)return;k||(i?a[J.expando]=k=++J.uuid:k=J.expando),j[k]||(j[k]={},i||(j[k].toJSON=J.noop));if(typeof c=="object"||typeof c=="function")e?j[k][f]=J.extend(j[k][f],c):j[k]=J.extend(j[k],c);return h=j[k],e&&(h[f]||(h[f]={}),h=h[f]),d!==b&&(h[J.camelCase(c)]=d),c==="events"&&!h[c]?h[f]&&h[f].events:g?h[J.camelCase(c)]||h[c]:h}},removeData:function(b,c,d){if(!!J.acceptData(b)){var e=J.expando,f=b.nodeType,g=f?J.cache:b,h=f?b[J.expando]:J.expando;if(!g[h])return;if(c){var i=d?g[h][e]:g[h];if(i){delete i[c];if(!E(i))return}}if(d){delete g[h][e];if(!E(g[h]))return}var j=g[h][e];J.support.deleteExpando||g!=a?delete g[h]:g[h]=null,j?(g[h]={},f||(g[h].toJSON=J.noop),g[h][e]=j):f&&(J.support.deleteExpando?delete b[J.expando]:b.removeAttribute?b.removeAttribute(J.expando):b[J.expando]=null)}},_data:function(a,b,c){return J.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=J.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),J.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=J.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,f;for(var g=0,h=e.length;g<h;g++)f=e[g].name,f.indexOf("data-")===0&&(f=J.camelCase(f.substring(5)),F(this[0],f,d[f]))}}return d}if(typeof a=="object")return this.each(function(){J.data(this,a)});var i=a.split(".");return i[1]=i[1]?"."+i[1]:"",c===b?(d=this.triggerHandler("getData"+i[1]+"!",[i[0]]),d===b&&this.length&&(d=J.data(this[0],a),d=F(this[0],a,d)),d===b&&i[1]?this.data(i[0]):d):this.each(function(){var b=J(this),d=[i[0],c];b.triggerHandler("setData"+i[1]+"!",d),J.data(this,a,c),b.triggerHandler("changeData"+i[1]+"!",d)})},removeData:function(a){return this.each(function(){J.removeData(this,a)})}}),J.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",J.data(a,c,(J.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",f=a?0:(J.data(c,e,b,!0)||1)-1;f?J.data(c,e,f,!0):(J.removeData(c,e,!0),D(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=J.data(a,c,b,!0);return d&&(!e||J.isArray(d)?e=J.data(a,c,J.makeArray(d),!0):e.push(d)),e||[]}},dequeue:function(a,b){b=b||"fx";var c=J.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){J.dequeue(a,b)})),c.length||(J.removeData(a,b+"queue",!0),D(a,b,"queue"))}}),J.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?J.queue(this[0],a):this.each(function(){var b=J.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&J.dequeue(this,a)})},dequeue:function(a){return this.each(function(){J.dequeue(this,a)})},delay:function(a,b){return a=J.fx?J.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(){var c=this;setTimeout(function(){J.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var e=J.Deferred(),f=this,g=f.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=J.data(f[g],i,b,!0)||(J.data(f[g],j,b,!0)||J.data(f[g],k,b,!0))&&J.data(f[g],i,J._Deferred(),!0))h++,l.done(d);return d(),e.promise()}});var O=/[\n\t\r]/g,P=/\s+/,Q=/\r/g,R=/^(?:button|input)$/i,S=/^(?:button|input|object|select|textarea)$/i,T=/^a(?:rea)?$/i,U=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=/\:|^on/,W,X;J.fn.extend({attr:function(a,b){return J.access(this,a,b,!0,J.attr)},removeAttr:function(a){return this.each(function(){J.removeAttr(this,a)})},prop:function(a,b){return J.access(this,a,b,!0,J.prop)},removeProp:function(a){return a=J.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(J.isFunction(a))return this.each(function(b){J(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(P);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=J.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(J.isFunction(a))return this.each(function(b){J(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(P);for(d=0,e=this.length;d<e;d++){f=this[d];if(f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(O," ");for(h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=J.trim(g)}else f.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return J.isFunction(a)?this.each(function(c){J(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=J(this),h=b,i=a.split(P);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&J._data(this,"__className__",this.className),this.className=this.className||a===!1?"":J._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(O," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length)return e?(c=J.valHooks[e.nodeName.toLowerCase()]||J.valHooks[e.type],c&&"get"in c&&(d=c.get(e,"value"))!==b?d:(d=e.value,typeof d=="string"?d.replace(Q,""):d==null?"":d)):b;var f=J.isFunction(a);return this.each(function(d){var e=J(this),g;if(this.nodeType===1){f?g=a.call(this,d,e.val()):g=a,g==null?g="":typeof g=="number"?g+="":J.isArray(g)&&(g=J.map(g,function(a){return a==null?"":a+""})),c=J.valHooks[this.nodeName.toLowerCase()]||J.valHooks[this.type];if(!c||!("set"in c)||c.set(this,g,"value")===b)this.value=g}})}}),J.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,f=a.type==="select-one";if(c<0)return null;for(var g=f?c:0,h=f?c+1:e.length;g<h;g++){var i=e[g];if(i.selected&&(J.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!J.nodeName(i.parentNode,"optgroup"))){b=J(i).val();if(f)return b;d.push(b)}}return f&&!d.length&&e.length?J(e[c]).val():d},set:function(a,b){var c=J.makeArray(b);return J(a).find("option").each(function(){this.selected=J.inArray(J(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var f=a.nodeType;if(!a||f===3||f===8||f===2)return b;if(e&&c in J.attrFn)return J(a)[c](d);if("getAttribute"in a){var g,h,i=f!==1||!J.isXMLDoc(a);return i&&(c=J.attrFix[c]||c,h=J.attrHooks[c],h||(U.test(c)?h=X:W&&c!=="className"&&(J.nodeName(a,"form")||V.test(c))&&(h=W))),d!==b?d===null?(J.removeAttr(a,c),b):h&&"set"in h&&i&&(g=h.set(a,d,c))!==b?g:(a.setAttribute(c,""+d),d):h&&"get"in h&&i&&(g=h.get(a,c))!==null?g:(g=a.getAttribute(c),g===null?b:g)}return J.prop(a,c,d)},removeAttr:function(a,b){var c;a.nodeType===1&&(b=J.attrFix[b]||b,J.support.getSetAttribute?a.removeAttribute(b):(J.attr(a,b,""),a.removeAttributeNode(a.getAttributeNode(b))),U.test(b)&&(c=J.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(R.test(a.nodeName)&&a.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&b==="radio"&&J.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},tabIndex:{get:function(a){var c=a.getAttributeNode("tabIndex");return c&&c.specified?parseInt(c.value,10):S.test(a.nodeName)||T.test(a.nodeName)&&a.href?0:b}},value:{get:function(a,b){return W&&J.nodeName(a,"button")?W.get(a,b):b in a?a.value:null},set:function(a,b,c){if(W&&J.nodeName(a,"button"))return W.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var f,g,h=e!==1||!J.isXMLDoc(a);return h&&(c=J.propFix[c]||c,g=J.propHooks[c]),d!==b?g&&"set"in g&&(f=g.set(a,d,c))!==b?f:a[c]=d:g&&"get"in g&&(f=g.get(a,c))!==b?f:a[c]},propHooks:{}}),X={get:function(a,c){return J.prop(a,c)?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?J.removeAttr(a,c):(d=J.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},J.support.getSetAttribute||(J.attrFix=J.propFix,W=J.attrHooks.name=J.attrHooks.title=J.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(d)return d.nodeValue=b,b}},J.each(["width","height"],function(a,b){J.attrHooks[b]=J.extend(J.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})})),J.support.hrefNormalized||J.each(["href","src","width","height"],function(a,c){J.attrHooks[c]=J.extend(J.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),J.support.style||(J.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}})),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(a,b){if(J.isArray(b))return a.checked=J.inArray(J(a).val(),b)>=0}})});var Y=/\.(.*)$/,Z=/^(?:textarea|input|select)$/i,$=/\./g,_=/ /g,ab=/[^\w\s.|`]/g,bb=function(a){return a.replace(ab,"\\$&")};J.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=C;else if(!d)return;var f,g;d.handler&&(f=d,d=f.handler),d.guid||(d.guid=J.guid++);var h=J._data(a);if(!h)return;var i=h.events,j=h.handle;i||(h.events=i={}),j||(h.handle=j=function(a){return typeof J=="undefined"||!!a&&J.event.triggered===a.type?b:J.event.handle.apply(j.elem,arguments)}),j.elem=a,c=c.split(" ");var k,l=0,m;while(k=c[l++]){g=f?J.extend({},f):{handler:d,data:e},k.indexOf(".")>-1?(m=k.split("."),k=m.shift(),g.namespace=m.slice(0).sort().join(".")):(m=[],g.namespace=""),g.type=k,g.guid||(g.guid=d.guid);var n=i[k],o=J.event.special[k]||{};if(!n){n=i[k]=[];if(!o.setup||o.setup.call(a,e,m,j)===!1)a.addEventListener?a.addEventListener(k,j,!1):a.attachEvent&&a.attachEvent("on"+k,j)}o.add&&(o.add.call(a,g),g.handler.guid||(g.handler.guid=d.guid)),n.push(g),J.event.global[k]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=C);var f,g,h,i,j=0,k,l,m,n,o,p,q,r=J.hasData(a)&&J._data(a),s=r&&r.events;if(!r||!s)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(g in s)J.event.remove(a,g+c);return}c=c.split(" ");while(g=c[j++]){q=g,p=null,k=g.indexOf(".")<0,l=[],k||(l=g.split("."),g=l.shift(),m=new RegExp("(^|\\.)"+J.map(l.slice(0).sort(),bb).join("\\.(?:.*\\.)?")+"(\\.|$)")),o=s[g];if(!o)continue;if(!d){for(i=0;i<o.length;i++){p=o[i];if(k||m.test(p.namespace))J.event.remove(a,q,p.handler,i),o.splice(i--,1)}continue}n=J.event.special[g]||{};for(i=e||0;i<o.length;i++){p=o[i];if(d.guid===p.guid){if(k||m.test(p.namespace))e==null&&o.splice(i--,1),n.remove&&n.remove.call(a,p);if(e!=null)break}}if(o.length===0||e!=null&&o.length===1)(!n.teardown||n.teardown.call(a,l)===!1)&&J.removeEvent(a,g,r.handle),f=null,delete s[g]}if(J.isEmptyObject(s)){var t=r.handle;t&&(t.elem=null),delete r.events,delete r.handle,J.isEmptyObject(r)&&J.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){var g=c.type||c,h=[],i;g.indexOf("!")>=0&&(g=g.slice(0,-1),i=!0),g.indexOf(".")>=0&&(h=g.split("."),g=h.shift(),h.sort());if(!!e&&!J.event.customEvent[g]||!!J.event.global[g]){c=typeof c=="object"?
c[J.expando]?c:new J.Event(g,c):new J.Event(g),c.type=g,c.exclusive=i,c.namespace=h.join("."),c.namespace_re=new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)");if(f||!e)c.preventDefault(),c.stopPropagation();if(!e){J.each(J.cache,function(){var a=J.expando,b=this[a];b&&b.events&&b.events[g]&&J.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?J.makeArray(d):[],d.unshift(c);var j=e,k=g.indexOf(":")<0?"on"+g:"";do{var l=J._data(j,"handle");c.currentTarget=j,l&&l.apply(j,d),k&&J.acceptData(j)&&j[k]&&j[k].apply(j,d)===!1&&(c.result=!1,c.preventDefault()),j=j.parentNode||j.ownerDocument||j===c.target.ownerDocument&&a}while(j&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var m,n=J.event.special[g]||{};if((!n._default||n._default.call(e.ownerDocument,c)===!1)&&(g!=="click"||!J.nodeName(e,"a"))&&J.acceptData(e)){try{k&&e[g]&&(m=e[k],m&&(e[k]=null),J.event.triggered=g,e[g]())}catch(o){}m&&(e[k]=m),J.event.triggered=b}}return c.result}},handle:function(c){c=J.event.fix(c||a.event);var d=((J._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,f=Array.prototype.slice.call(arguments,0);f[0]=c,c.currentTarget=this;for(var g=0,h=d.length;g<h;g++){var i=d[g];if(e||c.namespace_re.test(i.namespace)){c.handler=i.handler,c.data=i.data,c.handleObj=i;var j=i.handler.apply(this,f);j!==b&&(c.result=j,j===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[J.expando])return a;var c=a;a=J.Event(c);for(var d=this.props.length,e;d;)e=this.props[--d],a[e]=c[e];a.target||(a.target=a.srcElement||G),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var f=a.target.ownerDocument||G,g=f.documentElement,h=f.body;a.pageX=a.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0),a.pageY=a.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0)}return a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a},guid:1e8,proxy:J.proxy,special:{ready:{setup:J.bindReady,teardown:J.noop},live:{add:function(a){J.event.add(this,y(a.origType,a.selector),J.extend({},a,{handler:z,guid:a.handler.guid}))},remove:function(a){J.event.remove(this,y(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){J.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},J.removeEvent=G.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},J.Event=function(a,b){if(!this.preventDefault)return new J.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?B:C):this.type=a,b&&J.extend(this,b),this.timeStamp=J.now(),this[J.expando]=!0},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=B;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C};var cb=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=J.contains(this,b)),c||(J.event.handle.apply(this,arguments),a.type=d))},db=function(a){a.type=a.data,J.event.handle.apply(this,arguments)};J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){J.event.special[a]={setup:function(c){J.event.add(this,b,c&&c.selector?db:cb,a)},teardown:function(a){J.event.remove(this,b,a&&a.selector?db:cb)}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(a,b){if(!!J.nodeName(this,"form"))return!1;J.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&J(b).closest("form").length&&A("submit",this,arguments)}),J.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&J(b).closest("form").length&&a.keyCode===13&&A("submit",this,arguments)})},teardown:function(a){J.event.remove(this,".specialSubmit")}});if(!J.support.changeBubbles){var eb,fb=function(a){var b=a.type,c=a.value;return b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?J.map(a.options,function(a){return a.selected}).join("-"):"":J.nodeName(a,"select")&&(c=a.selectedIndex),c},gb=function(a){var c=a.target,d,e;if(!!Z.test(c.nodeName)&&!c.readOnly){d=J._data(c,"_change_data"),e=fb(c),(a.type!=="focusout"||c.type!=="radio")&&J._data(c,"_change_data",e);if(d===b||e===d)return;if(d!=null||e)a.type="change",a.liveFired=b,J.event.trigger(a,arguments[1],c)}};J.event.special.change={filters:{focusout:gb,beforedeactivate:gb,click:function(a){var b=a.target,c=J.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||J.nodeName(b,"select"))&&gb.call(this,a)},keydown:function(a){var b=a.target,c=J.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!J.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&gb.call(this,a)},beforeactivate:function(a){var b=a.target;J._data(b,"_change_data",fb(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in eb)J.event.add(this,c+".specialChange",eb[c]);return Z.test(this.nodeName)},teardown:function(a){return J.event.remove(this,".specialChange"),Z.test(this.nodeName)}},eb=J.event.special.change.filters,eb.focus=eb.beforeactivate}J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){var c=J.event.fix(a);c.type=b,c.originalEvent={},J.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;J.event.special[b]={setup:function(){d++===0&&G.addEventListener(a,c,!0)},teardown:function(){--d===0&&G.removeEventListener(a,c,!0)}}}),J.each(["bind","one"],function(a,c){J.fn[c]=function(a,d,e){var f;if(typeof a=="object"){for(var g in a)this[c](g,d,a[g],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(f=function(a){return J(this).unbind(a,f),e.apply(this,arguments)},f.guid=e.guid||J.guid++):f=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var h=0,i=this.length;h<i;h++)J.event.add(this[h],a,f,d);return this}}),J.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)J.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){J.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return J.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||J.guid++,d=0,e=function(c){var e=(J.data(this,"lastToggle"+a.guid)||0)%d;return J.data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var hb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};J.each(["live","die"],function(a,c){J.fn[c]=function(a,d,e,f){var g,h=0,i,j,k,l=f||this.selector,m=f?this:J(this.context);if(typeof a=="object"&&!a.preventDefault){for(var n in a)m[c](n,d,a[n],l);return this}if(c==="die"&&!a&&f&&f.charAt(0)===".")return m.unbind(f),this;if(d===!1||J.isFunction(d))e=d||C,d=b;a=(a||"").split(" ");while((g=a[h++])!=null){i=Y.exec(g),j="",i&&(j=i[0],g=g.replace(Y,""));if(g==="hover"){a.push("mouseenter"+j,"mouseleave"+j);continue}k=g,hb[g]?(a.push(hb[g]+j),g+=j):g=(hb[g]||g)+j;if(c==="live")for(var o=0,p=m.length;o<p;o++)J.event.add(m[o],"live."+y(g,l),{data:d,selector:l,handler:e,origType:g,origHandler:e,preType:k});else m.unbind("live."+y(g,l),e)}return this}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){J.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.bind(b,a,c):this.trigger(b)},J.attrFn&&(J.attrFn[b]=!0)}),function(){function a(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function c(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){return h=!1,0});var k=function(a,b,c,e){c=c||[],b=b||G;var g=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var h,i,j,n,o,q,r,s,u=!0,v=k.isXML(b),w=[],x=a;do{d.exec(""),h=d.exec(x);if(h){x=h[3],w.push(h[1]);if(h[2]){n=h[3];break}}}while(h);if(w.length>1&&m.exec(a))if(w.length===2&&l.relative[w[0]])i=t(w[0]+w[1],b);else{i=l.relative[w[0]]?[b]:k(w.shift(),b);while(w.length)a=w.shift(),l.relative[a]&&(a+=w.shift()),i=t(a,i)}else{!e&&w.length>1&&b.nodeType===9&&!v&&l.match.ID.test(w[0])&&!l.match.ID.test(w[w.length-1])&&(o=k.find(w.shift(),b,v),b=o.expr?k.filter(o.expr,o.set)[0]:o.set[0]);if(b){o=e?{expr:w.pop(),set:p(e)}:k.find(w.pop(),w.length!==1||w[0]!=="~"&&w[0]!=="+"||!b.parentNode?b:b.parentNode,v),i=o.expr?k.filter(o.expr,o.set):o.set,w.length>0?j=p(i):u=!1;while(w.length)q=w.pop(),r=q,l.relative[q]?r=w.pop():q="",r==null&&(r=b),l.relative[q](j,r,v)}else j=w=[]}j||(j=i),j||k.error(q||a);if(f.call(j)==="[object Array]")if(!u)c.push.apply(c,j);else if(b&&b.nodeType===1)for(s=0;j[s]!=null;s++)j[s]&&(j[s]===!0||j[s].nodeType===1&&k.contains(b,j[s]))&&c.push(i[s]);else for(s=0;j[s]!=null;s++)j[s]&&j[s].nodeType===1&&c.push(i[s]);else p(j,c);return n&&(k(n,g,c,e),k.uniqueSort(c)),c};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h){if(g!=null)break;k.error(a)}h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(b,d,f){var g,h=e++,i=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("parentNode",d,h,b,g,f)},"~":function(b,d,f){var g,h=e++,i=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("previousSibling",d,h,b,g,f)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not"){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=k.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=k(a[3],null,null,b)}else if(l.match.POS.test(a[0])||l.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(G.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(f.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;G.documentElement.compareDocumentPosition?r=function(a,b){return a===b?(g=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=G.createElement("div"),c="script"+(new Date).getTime(),d=G.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),G.getElementById(c)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=G.createElement("div");a.appendChild(G.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),G.querySelectorAll&&function(){var a=k,b=G.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,d,e,f){d=d||G;if(!f&&!k.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return p(d.getElementsByTagName(b),e);if(g[2]&&l.find.CLASS&&d.getElementsByClassName)return p(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return p([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return p([],e);if(h.id===g[3])return p([h],e)}try{return p(d.querySelectorAll(b),e)}catch(i){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d,m=d.getAttribute("id"),n=m||c,o=d.parentNode,q=/^\s*[+~]/.test(b);m?n=n.replace(/'/g,"\\$&"):d.setAttribute("id",n),q&&o&&(d=d.parentNode);try{if(!q||o)return p(d.querySelectorAll("[id='"+n+"'] "+b),e)}catch(r){}finally{m||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)k[d]=a[d];b=null}}(),function(){var a=G.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(G.createElement("div"),"div"),d=!1;try{b.call(G.documentElement,"[test!='']:sizzle")}catch(e){d=!0}k.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(d||!l.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(e,null,null,[a]).length>0}}}(),function(){var a=G.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),G.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:G.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var t=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};J.find=k,J.expr=k.selectors,J.expr[":"]=J.expr.filters,J.unique=k.uniqueSort,J.text=k.getText,J.isXMLDoc=k.isXML,J.contains=k.contains}();var ib=/Until$/,jb=/^(?:parents|prevUntil|prevAll)/,kb=/,/,lb=/^.[^:#\[\.,]*$/,mb=Array.prototype.slice,nb=J.expr.match.POS,ob={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return J(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(J.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;for(c=0,d=this.length;c<d;c++){f=e.length,J.find(a,this[c],e);if(c>0)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}}return e},has:function(a){var b=J(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(J.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(w(this,a,!1),"not",a)},filter:function(a){return this.pushStack(w(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?J.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,f=this[0];if(J.isArray(a)){var g,h,i={},j=1;if(f&&a.length){for(d=0,e=a.length;d<e;d++)h=a[d],i[h]||(i[h]=nb.test(h)?J(h,b||this.context):h);while(f&&f.ownerDocument&&f!==b){for(h in i)g=i[h],(g.jquery?g.index(f)>-1:J(f).is(g))&&c.push({selector:h,elem:f,level:j});f=f.parentNode,j++}}return c}var k=nb.test(a)||typeof a!="string"?J(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){f=this[d];while(f){if(k?k.index(f)>-1:J.find.matchesSelector(f,a)){c.push(f);break}f=f.parentNode;if(!f||!f.ownerDocument||f===b||f.nodeType===11)break}}return c=c.length>1?J.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return!a||typeof a=="string"?J.inArray(this[0],a?J(a):this.parent().children()):J.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?J(a,b):J.makeArray(a&&a.nodeType?[a]:a),d=J.merge(this.get(),c);return this.pushStack(x(c[0])||x(d[0])?d:J.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),J.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return J.dir(a,"parentNode")},parentsUntil:function(a,b,c){return J.dir(a,"parentNode",c)},next:function(a){return J.nth(a,2,"nextSibling")},prev:function(a){return J.nth(a,2,"previousSibling")},nextAll:function(a){return J.dir(a,"nextSibling")},prevAll:function(a){return J.dir(a,"previousSibling")},nextUntil:function(a,b,c){return J.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return J.dir(a,"previousSibling",c)},siblings:function(a){return J.sibling(a.parentNode.firstChild,a)},children:function(a){return J.sibling(a.firstChild)},contents:function(a){return J.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:J.makeArray(a.childNodes)}},function(a,b){J.fn[a]=function(c,d){var e=J.map(this,b,c),f=mb.call(arguments);return ib.test(a)||(d=c),d&&typeof d=="string"&&(e=J.filter(d,e)),e=this.length>1&&!ob[a]?J.unique(e):e,(this.length>1||kb.test(d))&&jb.test(a)&&(e=e.reverse()),this.pushStack(e,a,f.join(","))}}),J.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?J.find.matchesSelector(b[0],a)?[b[0]]:[]:J.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!J(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var pb=/ jQuery\d+="(?:\d+|null)"/g,qb=/^\s+/,rb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,sb=/<([\w:]+)/,tb=/<tbody/i,ub=/<|&#?\w+;/,vb=/<(?:script|object|embed|option|style)/i,wb=/checked\s*(?:[^=]|=\s*.checked.)/i,xb=/\/(java|ecma)script/i,yb=/^\s*<!(?:\[CDATA\[|\-\-)/,zb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};zb.optgroup=zb.option,zb.tbody=zb.tfoot=zb.colgroup=zb.caption=zb.thead,zb.th=zb.td,J.support.htmlSerialize||(zb._default=[1,"div<div>","</div>"]),J.fn.extend({text:function(a){return J.isFunction(a)?this.each(function(b){var c=J(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(a)):J.text(this)},wrapAll:function(a){if(J.isFunction(a))return this.each(function(b){J(this).wrapAll(a.call(this,b))});if(this[0]){var b=J(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return J.isFunction(a)?this.each(function(b){J(this).wrapInner(a.call(this,b))}):this.each(function(){var b=J(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){J(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=J(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,J(arguments[0]).toArray()),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||J.filter(a,[d]).length)!b&&d.nodeType===1&&(J.cleanData(d.getElementsByTagName("*")),J.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&J.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return J.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(pb,""):null;if(typeof a=="string"&&!vb.test(a)&&(J.support.leadingWhitespace||!qb.test(a))&&!zb[(sb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rb,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(J.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else J.isFunction(a)?this.each(function(b){var c=J(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?J.isFunction(a)?this.each(function(b){var c=J(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=J(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;J(this).remove(),b?J(b).before(a):J(c).append(a)})):this.length?this.pushStack(J(J.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!J.support.checkClone&&arguments.length===3&&typeof i=="string"&&wb.test(i))return this.each(function(){J(this).domManip(a,c,d,!0)});if(J.isFunction(i))return this.each(function(e){var f=J(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,J.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=J.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&J.nodeName(f,"tr");for(var k=0,l=this.length,m=l-1;k<l;k++)d.call(c?v(this[k],f):this[k],e.cacheable||l>1&&k<m?J.clone(g,!0,!0):g)}j.length&&J.each(j,p)}return this}}),J.buildFragment=function(a,b,c){var d,e,f,g;return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=G),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&g===G&&a[0].charAt(0)==="<"&&!vb.test(a[0])&&(J.support.checkClone||!wb.test(a[0]))&&(e=!0,f=J.fragments[a[0]],f&&f!==1&&(d=f)),d||(d=g.createDocumentFragment(),J.clean(a,g,d,c)),e&&(J.fragments[a[0]]=f?d:1),{fragment:d,cacheable:e}},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){J.fn[a]=function(c){var d=[],e=J(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();J(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),J.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,f,g;if((!J.support.noCloneEvent||!J.support.noCloneChecked
)&&(a.nodeType===1||a.nodeType===11)&&!J.isXMLDoc(a)){t(a,d),e=s(a),f=s(d);for(g=0;e[g];++g)t(e[g],f[g])}if(b){u(a,d);if(c){e=s(a),f=s(d);for(g=0;e[g];++g)u(e[g],f[g])}}return e=f=null,d},clean:function(a,b,c,d){var e;b=b||G,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||G);var f=[],g;for(var h=0,i;(i=a[h])!=null;h++){typeof i=="number"&&(i+="");if(!i)continue;if(typeof i=="string")if(!ub.test(i))i=b.createTextNode(i);else{i=i.replace(rb,"<$1></$2>");var j=(sb.exec(i)||["",""])[1].toLowerCase(),k=zb[j]||zb._default,l=k[0],m=b.createElement("div");m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!J.support.tbody){var n=tb.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(g=o.length-1;g>=0;--g)J.nodeName(o[g],"tbody")&&!o[g].childNodes.length&&o[g].parentNode.removeChild(o[g])}!J.support.leadingWhitespace&&qb.test(i)&&m.insertBefore(b.createTextNode(qb.exec(i)[0]),m.firstChild),i=m.childNodes}var p;if(!J.support.appendChecked)if(i[0]&&typeof (p=i.length)=="number")for(g=0;g<p;g++)q(i[g]);else q(i);i.nodeType?f.push(i):f=J.merge(f,i)}if(c){e=function(a){return!a.type||xb.test(a.type)};for(h=0;f[h];h++)if(d&&J.nodeName(f[h],"script")&&(!f[h].type||f[h].type.toLowerCase()==="text/javascript"))d.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]);else{if(f[h].nodeType===1){var r=J.grep(f[h].getElementsByTagName("script"),e);f.splice.apply(f,[h+1,0].concat(r))}c.appendChild(f[h])}}return f},cleanData:function(a){var b,c,d=J.cache,e=J.expando,f=J.event.special,g=J.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&J.noData[i.nodeName.toLowerCase()])continue;c=i[J.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var j in b.events)f[j]?J.event.remove(i,j):J.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[J.expando]:i.removeAttribute&&i.removeAttribute(J.expando),delete d[c]}}}});var Ab=/alpha\([^)]*\)/i,Bb=/opacity=([^)]*)/,Cb=/([A-Z]|^ms)/g,Db=/^-?\d+(?:px)?$/i,Eb=/^-?\d/,Fb=/^[+\-]=/,Gb=/[^+\-\.\de]+/g,Hb={position:"absolute",visibility:"hidden",display:"block"},Ib=["Left","Right"],Jb=["Top","Bottom"],Kb,Lb,Mb;J.fn.css=function(a,c){return arguments.length===2&&c===b?this:J.access(this,a,c,!0,function(a,c,d){return d!==b?J.style(a,c,d):J.css(a,c)})},J.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":J.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var f,g,h=J.camelCase(c),i=a.style,j=J.cssHooks[h];c=J.cssProps[h]||h;if(d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];g=typeof d;if(g==="number"&&isNaN(d)||d==null)return;g==="string"&&Fb.test(d)&&(d=+d.replace(Gb,"")+parseFloat(J.css(a,c)),g="number"),g==="number"&&!J.cssNumber[h]&&(d+="px");if(!j||!("set"in j)||(d=j.set(a,d))!==b)try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;c=J.camelCase(c),f=J.cssHooks[c],c=J.cssProps[c]||c,c==="cssFloat"&&(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(Kb)return Kb(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),J.curCSS=J.css,J.each(["height","width"],function(a,b){J.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?o(a,b,d):(J.swap(a,Hb,function(){e=o(a,b,d)}),e)},set:function(a,b){if(!Db.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),J.support.opacity||(J.cssHooks.opacity={get:function(a,b){return Bb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle;c.zoom=1;var e=J.isNaN(b)?"":"alpha(opacity="+b*100+")",f=d&&d.filter||c.filter||"";c.filter=Ab.test(f)?f.replace(Ab,e):f+" "+e}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(a,b){var c;return J.swap(a,{display:"inline-block"},function(){b?c=Kb(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),G.defaultView&&G.defaultView.getComputedStyle&&(Lb=function(a,c){var d,e,f;c=c.replace(Cb,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(f=e.getComputedStyle(a,null))d=f.getPropertyValue(c),d===""&&!J.contains(a.ownerDocument.documentElement,a)&&(d=J.style(a,c));return d}),G.documentElement.currentStyle&&(Mb=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!Db.test(d)&&Eb.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e)),d===""?"auto":d}),Kb=Lb||Mb,J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!J.support.reliableHiddenOffsets&&(a.style.display||J.css(a,"display"))==="none"},J.expr.filters.visible=function(a){return!J.expr.filters.hidden(a)});var Nb=/%20/g,Ob=/\[\]$/,Pb=/\r?\n/g,Qb=/#.*$/,Rb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Sb=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tb=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,Ub=/^(?:GET|HEAD)$/,Vb=/^\/\//,Wb=/\?/,Xb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Yb=/^(?:select|textarea)/i,Zb=/\s+/,$b=/([?&])_=[^&]*/,_b=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ac=J.fn.load,bc={},cc={},dc,ec;try{dc=I.href}catch(fc){dc=G.createElement("a"),dc.href="",dc=dc.href}ec=_b.exec(dc.toLowerCase())||[],J.fn.extend({load:function(a,c,d){if(typeof a!="string"&&ac)return ac.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(J.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=J.param(c,J.ajaxSettings.traditional),g="POST"));var h=this;return J.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?J("<div>").append(c.replace(Xb,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Yb.test(this.nodeName)||Sb.test(this.type))}).map(function(a,b){var c=J(this).val();return c==null?null:J.isArray(c)?J.map(c,function(a,c){return{name:b.name,value:a.replace(Pb,"\r\n")}}):{name:b.name,value:c.replace(Pb,"\r\n")}}).get()}}),J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){J.fn[b]=function(a){return this.bind(b,a)}}),J.each(["get","post"],function(a,c){J[c]=function(a,d,e,f){return J.isFunction(d)&&(f=f||e,e=d,d=b),J.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),J.extend({getScript:function(a,c){return J.get(a,b,c,"script")},getJSON:function(a,b,c){return J.get(a,b,c,"json")},ajaxSetup:function(a,b){b?J.extend(!0,a,J.ajaxSettings,b):(b=a,a=J.extend(!0,J.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in J.ajaxSettings&&(a[c]=J.ajaxSettings[c]);return a},ajaxSettings:{url:dc,isLocal:Tb.test(ec[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML}},ajaxPrefilter:n(bc),ajaxTransport:n(cc),ajax:function(a,c){function d(a,c,d,m){if(v!==2){v=2,t&&clearTimeout(t),s=b,q=m||"",y.readyState=a?4:0;var o,p,r,u=d?k(e,y,d):b,x,z;if(a>=200&&a<300||a===304){if(e.ifModified){if(x=y.getResponseHeader("Last-Modified"))J.lastModified[n]=x;if(z=y.getResponseHeader("Etag"))J.etag[n]=z}if(a===304)c="notmodified",o=!0;else try{p=j(e,u),c="success",o=!0}catch(A){c="parsererror",r=A}}else{r=c;if(!c||a)c="error",a<0&&(a=0)}y.status=a,y.statusText=c,o?h.resolveWith(f,[p,c,y]):h.rejectWith(f,[y,c,r]),y.statusCode(l),l=b,w&&g.trigger("ajax"+(o?"Success":"Error"),[y,e,o?p:r]),i.resolveWith(f,[y,c]),w&&(g.trigger("ajaxComplete",[y,e]),--J.active||J.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var e=J.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof J)?J(f):J.event,h=J.Deferred(),i=J._Deferred(),l=e.statusCode||{},n,o={},p={},q,r,s,t,u,v=0,w,x,y={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=p[c]=p[c]||a,o[a]=b}return this},getAllResponseHeaders:function(){return v===2?q:null},getResponseHeader:function(a){var c;if(v===2){if(!r){r={};while(c=Rb.exec(q))r[c[1].toLowerCase()]=c[2]}c=r[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(e.mimeType=a),this},abort:function(a){return a=a||"abort",s&&s.abort(a),d(0,a),this}};h.promise(y),y.success=y.done,y.error=y.fail,y.complete=i.done,y.statusCode=function(a){if(a){var b;if(v<2)for(b in a)l[b]=[l[b],a[b]];else b=a[y.status],y.then(b,b)}return this},e.url=((a||e.url)+"").replace(Qb,"").replace(Vb,ec[1]+"//"),e.dataTypes=J.trim(e.dataType||"*").toLowerCase().split(Zb),e.crossDomain==null&&(u=_b.exec(e.url.toLowerCase()),e.crossDomain=!(!u||u[1]==ec[1]&&u[2]==ec[2]&&(u[3]||(u[1]==="http:"?80:443))==(ec[3]||(ec[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!="string"&&(e.data=J.param(e.data,e.traditional)),m(bc,e,c,y);if(v===2)return!1;w=e.global,e.type=e.type.toUpperCase(),e.hasContent=!Ub.test(e.type),w&&J.active++===0&&J.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(Wb.test(e.url)?"&":"?")+e.data),n=e.url;if(e.cache===!1){var z=J.now(),A=e.url.replace($b,"$1_="+z);e.url=A+(A===e.url?(Wb.test(e.url)?"&":"?")+"_="+z:"")}}(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(n=n||e.url,J.lastModified[n]&&y.setRequestHeader("If-Modified-Since",J.lastModified[n]),J.etag[n]&&y.setRequestHeader("If-None-Match",J.etag[n])),y.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"]);for(x in e.headers)y.setRequestHeader(x,e.headers[x]);if(!e.beforeSend||e.beforeSend.call(f,y,e)!==!1&&v!==2){for(x in{success:1,error:1,complete:1})y[x](e[x]);s=m(cc,e,c,y);if(!s)d(-1,"No Transport");else{y.readyState=1,w&&g.trigger("ajaxSend",[y,e]),e.async&&e.timeout>0&&(t=setTimeout(function(){y.abort("timeout")},e.timeout));try{v=1,s.send(o,d)}catch(B){status<2?d(-1,B):J.error(B)}}return y}return y.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=J.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=J.ajaxSettings.traditional);if(J.isArray(a)||a.jquery&&!J.isPlainObject(a))J.each(a,function(){e(this.name,this.value)});else for(var f in a)l(f,a[f],c,e);return d.join("&").replace(Nb,"+")}}),J.extend({active:0,lastModified:{},etag:{}});var gc=J.now(),hc=/(\=)\?(&|$)|\?\?/i;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return J.expando+"_"+gc++}}),J.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(hc.test(b.url)||e&&hc.test(b.data))){var f,g=b.jsonpCallback=J.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(hc,k),b.url===i&&(e&&(j=j.replace(hc,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&J.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||J.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return J.globalEval(a),a}}}),J.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),J.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=G.head||G.getElementsByTagName("head")[0]||G.documentElement;return{send:function(e,f){c=G.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var ic=a.ActiveXObject?function(){for(var a in kc)kc[a](0,1)}:!1,jc=0,kc;J.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&i()||h()}:i,function(a){J.extend(J.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(c){if(!c.crossDomain||J.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,i;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(i in c.xhrFields)g[i]=c.xhrFields[i];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(i in e)g.setRequestHeader(i,e[i])}catch(j){}g.send(c.hasContent&&c.data||null),d=function(a,e){var i,j,k,l,m;try{if(d&&(e||g.readyState===4)){d=b,h&&(g.onreadystatechange=J.noop,ic&&delete kc[h]);if(e)g.readyState!==4&&g.abort();else{i=g.status,k=g.getAllResponseHeaders(),l={},m=g.responseXML,m&&m.documentElement&&(l.xml=m),l.text=g.responseText;try{j=g.statusText}catch(n){j=""}!i&&c.isLocal&&!c.crossDomain?i=l.text?200:404:i===1223&&(i=204)}}}catch(o){e||f(-1,o)}l&&f(i,j,l,k)},!c.async||g.readyState===4?d():(h=++jc,ic&&(kc||(kc={},J(a).unload(ic)),kc[h]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var lc={},mc,nc,oc=/^(?:toggle|show|hide)$/,pc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,qc,rc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],sc,tc=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;J.fn.extend({show:function(a,b,c){var f,g;if(a||a===0)return this.animate(e("show",3),a,b,c);for(var h=0,i=this.length;h<i;h++)f=this[h],f.style&&(g=f.style.display,!J._data(f,"olddisplay")&&g==="none"&&(g=f.style.display=""),g===""&&J.css(f,"display")==="none"&&J._data(f,"olddisplay",d(f.nodeName)));for(h=0;h<i;h++){f=this[h];if(f.style){g=f.style.display;if(g===""||g==="none")f.style.display=J._data(f,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(e("hide",3),a,b,c);for(var d=0,f=this.length;d<f;d++)if(this[d].style){var g=J.css(this[d],"display");g!=="none"&&!J._data(this[d],"olddisplay")&&J._data(this[d],"olddisplay",g)}for(d=0;d<f;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:J.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return J.isFunction(a)&&J.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:J(this).is(":hidden");J(this)[b?"show":"hide"]()}):this.animate(e("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,e){var f=J.speed(b,c,e);return J.isEmptyObject(a)?this.each(f.complete,[!1]):(a=J.extend({},a),this[f.queue===!1?"each":"queue"](function(){f.queue===!1&&J._mark(this);var b=J.extend({},f),c=this.nodeType===1,e=c&&J(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=J.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],J.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&e||h==="show"&&!e)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],J.css(this,"display")==="inline"&&J.css(this,"float")==="none"&&(J.support.inlineBlockNeedsLayout?(j=d(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new J.fx(this,b,i),h=a[i],oc.test(h)?k[h==="toggle"?e?"show":"hide":h]():(l=pc.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(J.cssNumber[i]?"":"px"),o!=="px"&&(J.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,J.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0}))},stop:function(a,b){return a&&this.queue([]),this.each(function(){var a=J.timers,c=a.length;b||J._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue(),this}}),J.each({slideDown:e("show",1),slideUp:e("hide",1),slideToggle:e("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){J.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),J.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?J.extend({},a):{complete:c||!c&&b||J.isFunction(a)&&a,duration:a,easing:c&&b||b&&!J.isFunction(b)&&b};return d.duration=J.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in J.fx.speeds?J.fx.speeds[d.duration]:J.fx.speeds._default,d.old=d.complete,d.complete=function(a){J.isFunction(d.old)&&d.old.call(this),d.queue!==!1?J.dequeue(this):a!==!1&&J._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),J.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(J.fx.step[this.prop]||J.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=J.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,b,c){function d(a){return e.step(a)}var e=this,f=J.fx,h;this.startTime=sc||g(),this.start=a,this.end=b,this.unit=c||this.unit||(J.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,d.elem=this.elem,d()&&J.timers.push(d)&&!qc&&(tc?(qc=!0,h=function(){qc&&(tc(h),f.tick())},tc(h)):qc=setInterval(f.tick,f.interval))},show:function(){this.options.orig[this.prop]=J.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),J(this.elem).show()},hide:function(){this.options.orig[this.prop]=J.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=sc||g(),c=!0,d=this.elem,e=this.options,f,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(f in e.animatedProperties)e.animatedProperties[f]!==!0&&(c=!1);if(c){e.overflow!=null&&!J.support.shrinkWrapBlocks&&J.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&J(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)J.style(d,i,e.orig[i]);e.complete.call(d)}return!1}return e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=J.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},J.extend(J.fx,{tick:function(){for(var a=J.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||J.fx.stop()},interval:13,stop:function(){clearInterval(qc),qc=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){J.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),J.expr&&J.expr.filters&&(J.expr.filters.animated=function(a){return J.grep(J.timers,function(b){return a===b.elem}).length});var uc=/^t(?:able|d|h)$/i,vc=/^(?:body|html)$/i;"getBoundingClientRect"in G.documentElement?J.fn.offset=function(a){var b=this[0],d;if(a)return this.each(function(b){J.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return J.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,g=f.documentElement;if(!d||!J.contains(g,b))return d?{top:d.top,left:d.left}:{top:0,left:0};var h=f.body,i=c(f),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||J.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||J.support.boxModel&&g.scrollLeft||h.scrollLeft,n=d.top+l-j,o=d.left+m-k;return{top:n,left:o}}:J.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){J.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return J.offset.bodyOffset(b);J.offset.initialize();var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;while((b=b.parentNode)&&b!==h&&b!==g){if(J.offset.supportsFixedPosition&&j.position==="fixed")break;c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,J.offset.doesNotAddBorder&&(!J.offset.doesAddBorderForTableAndCells||!uc.test(b.nodeName))&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),J.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;return J.offset.supportsFixedPosition&&j.position==="fixed"&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft)),{top:k,left:l}},J.offset={initialize:function(){var a=G.body,b=G.createElement("div"),c,d,e,f,g=parseFloat(J.css(a,"marginTop"))||0,h="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";J.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=h,a.insertBefore(b,a.firstChild),c=b.firstChild,d=c.firstChild,f=c.nextSibling.firstChild.firstChild,this.doesNotAddBorder=d.offsetTop!==5,this.doesAddBorderForTableAndCells=f.offsetTop===5,d.style.position="fixed",d.style.top="20px",this.supportsFixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",this.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==g,a.removeChild(b),J.offset.initialize=J.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return J.offset.initialize(),J.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(J.css(a,"marginTop"))||0,c+=parseFloat(J.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=J.css(a,"position");d==="static"&&(a.style.position="relative");var e=J(a),f=e.offset(),g=J.css(a,"top"),h=J.css(a,"left"),i=(d==="absolute"||d==="fixed")&&J.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),J.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},J.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=vc.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(J.css(a,"marginTop"))||0,c.left-=parseFloat(J.css(a,"marginLeft"))||0,d.top+=parseFloat(J.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(J.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||G.body;while(a&&!vc.test(a.nodeName)&&J.css(a,"position")==="static")a=a.offsetParent;return a})}}),J.each(["Left","Top"],function(a,d){var e="scroll"+d;J.fn[e]=function(d){var f,g;return d===b?(f=this[0],f?(g=c(f),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:J.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]):null):this.each(function(){g=c(this),g?g.scrollTo(a?J(g).scrollLeft():d,a?d:J(g).scrollTop()):this[e]=d})}}),J.each(["Height","Width"],function(a,c){var d=c.toLowerCase();J.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(J.css(a,d,"padding")):null},J.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(J.css(b,d,a?"margin":"border")):null},J.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(J.isFunction(a))return this.each(function(b){var c=J(this);c[d](a.call(this,b,c[d]()))});if(J.isWindow(e)){var f=e.document.documentElement["client"+c];return e.document.compatMode==="CSS1Compat"&&f||e.document.body["client"+c]||f}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var g=J.css(e,d),h=parseFloat(g);return J.isNaN(h)?g:h}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=J}(window),function(a){a.extend({onAvailable:function(b,c){if(typeof c!="function")throw new TypeError;var d=a.onAvailable;b instanceof Array||(b=[b]);for(var e=0,f=b.length;e<f;++e)d.listeners.push({id:b[e],callback:c,obj:arguments[2],override:arguments[3],checkContent:!!arguments[4]});return d.interval||(d.interval=window.setInterval(d.checkAvailable,d.POLL_INTERVAL)),this},onContentReady:function(b,c,d,e){a.onAvailable(b,c,d,e,!0)}}),a.extend(a.onAvailable,{POLL_RETRIES:2e3,POLL_INTERVAL:20,interval:null,listeners:[],executeCallback:function(a,b){var c=a;b.override&&(b.override===!0?c=b.obj:c=b.override),b.callback.call(c,b.obj)},checkAvailable:function(){var b=a.onAvailable,c=b.listeners;for(var d=0;d<c.length;++d){var e=c[d],f=document.getElementById(e.id);f&&(!e.checkContent||e.checkContent&&(f.nextSibling||f.parentNode.nextSibling||a.isReady))&&(b.executeCallback(f,e),c.splice(d,1),--d);if(c.length===0||--b.POLL_RETRIES===0)b.interval=window.clearInterval(b.interval)}}})}(jQuery),function(a){a.cookie=function(b,c,d){if(typeof c=="undefined"){var j=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var l=0;l<k.length;l++){var m=a.trim(k[l]);if(m.substring(0,b.length+1)==b+"="){j=decodeURIComponent(m.substring(b.length+1));break}}}return j}d=d||{},c===null&&(c="",d.expires=-1);var e="";if(d.expires&&(typeof d.expires=="number"||d.expires.toUTCString)){var f;typeof d.expires=="number"?(f=new Date,f.setTime(f.getTime()+d.expires*24*60*60*1e3)):f=d.expires,e="; expires="+f.toUTCString()}var g=d.path?"; path="+d.path:"",h=d.domain?"; domain="+d.domain:"",i=d.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(c),e,g,h,i].join("")}}(jQuery),jQuery.fn.extend({everyTime:function(a,b,c,d){return this.each(function(){FMJQ.timer.add(this,a,b,c,d)})},oneTime:function(a,b,c){return this.each(function(){FMJQ.timer.add(this,a,b,c,1)})},stopTime:function(a,b){return this.each(function(){FMJQ.timer.remove(this,a,b)})}}),jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:.[0-9]*)?)s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(a){if(a==undefined||a==null)return null;var b=this.regex.exec(FMJQ.trim(a.toString()));if(b[2]){var c=parseFloat(b[1]),d=this.powers[b[2]]||1;return c*d}return a},add:function(a,b,c,d,e){var f=0;FMJQ.isFunction(c)&&(e||(e=d),d=c,c=b),b=FMJQ.timer.timeParse(b);if(typeof b!="number"||isNaN(b)||b<0)return;if(typeof e!="number"||isNaN(e)||e<0)e=0;e=e||0;var g=FMJQ.data(a,this.dataKey)||FMJQ.data(a,this.dataKey,{});g[c]||(g[c]={}),d.timerID=d.timerID||this.guid++;var h=function(){(++f>e&&e!==0||d.call(a,f)===!1)&&FMJQ.timer.remove(a,c,d)};h.timerID=d.timerID,g[c][d.timerID]||(g[c][d.timerID]=window.setInterval(h,b)),this.global.push(a)},remove:function(a,b,c){var d=FMJQ.data(a,this.dataKey),e;if(d){if(!b)for(b in d)this.remove(a,b,c);else if(d[b]){if(c)c.timerID&&(window.clearInterval(d[b][c.timerID]),delete d[b][c.timerID]);else for(var c in d[b])window.clearInterval(d[b][c]),delete d[b][c];for(e in d[b])break;e||(e=null,delete d[b])}for(e in d)break;e||FMJQ.removeData(a,this.dataKey)}}}}),jQuery(window).bind("unload",function(){FMJQ.each(FMJQ.timer.global,function(a,b){FMJQ.timer.remove(b)})}),function($){$.toJSON=function(a){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(a);var b=typeof a;if(a===null)return"null";if(b=="undefined")return undefined;if(b=="number"||b=="boolean")return a+"";if(b=="string")return $.quoteString(a);if(b=="object"){if(typeof a.toJSON=="function")return $.toJSON(a.toJSON());if(a.constructor===Date){var c=a.getUTCMonth()+1;c<10&&(c="0"+c);var d=a.getUTCDate();d<10&&(d="0"+d);var e=a.getUTCFullYear(),f=a.getUTCHours();f<10&&(f="0"+f);var g=a.getUTCMinutes();g<10&&(g="0"+g);var h=a.getUTCSeconds();h<10&&(h="0"+h);var i=a.getUTCMilliseconds();return i<100&&(i="0"+i),i<10&&(i="0"+i),'"'+e+"-"+c+"-"+d+"T"+f+":"+g+":"+h+"."+i+'Z"'}if(a.constructor===Array){var j=[];for(var k=0;k<a.length;k++)j.push($.toJSON(a[k])||"null");return"["+j.join(",")+"]"}var l=[];for(var m in a){var n,b=typeof m;if(b=="number")n='"'+m+'"';else{if(b!="string")continue;n=$.quoteString(m)}if(typeof a[m]=="function")continue;var o=$.toJSON(a[m]);l.push(n+":"+o)}return"{"+l.join(", ")+"}"}},$.evalJSON=function(src){return typeof JSON=="object"&&JSON.parse?JSON.parse(src):eval("("+src+")")},$.secureEvalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(a){return a.match(_escapeable)?'"'+a.replace(_escapeable,function(a){var b=_meta[a];return typeof b=="string"?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,_meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}(jQuery),function(a){var b=a.browser.msie&&parseInt(a.browser.version)==6&&typeof window["XMLHttpRequest"]!="object",c=null,d=[];a.modal=function(b,c){return a.modal.impl.init(b,c)},a.modal.close=function(){a.modal.impl.close()},a.fn.modal=function(b){return a.modal.impl.init(this,b)},a.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"fm-simplemodal-overlay",overlayCss:{},containerId:"fm-simplemodal-container",containerCss:{},dataId:"fm-simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"fm-simplemodal-close",escClose:!0,overlayClose:!1,position:null,persist:!1,"transient":!1,onOpen:null,onShow:null,onClose:null},a.modal.impl={o:null,d:{},init:function(b,d){var e=this;if(e.d.data)return!1;c=a.browser.msie&&!a.support.boxModel,e.o=a.extend({},a.modal.defaults,d),e.zIndex=e.o.zIndex,e.occb=!1;if(typeof b=="object")b=b instanceof FMJQ?b:a(b),e.d.placeholder=!1,b.parent().parent().size()>0&&(b.before(a("<span></span>").attr("id","fm-simplemodal-placeholder").css({display:"none"})),e.d.placeholder=!0,e.display=b.css("display"),e.o.persist||(e.d.orig=b.clone(!0)));else{if(typeof b!="string"&&typeof b!="number")return alert("SimpleModal Error: Unsupported data type: "+typeof b),e;b=a("<div></div>").html(b)}return e.create(b),b=null,e.open(),a.isFunction(e.o.onShow)&&e.o.onShow.apply(e,[e.d]),e},create:function(e){var f=this;d=f.getDimensions(),!f.o.transient&&b&&(f.d.iframe=a('<iframe src="javascript:false;"></iframe>').css(a.extend(f.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:d[0],width:d[1],zIndex:f.o.zIndex,top:0,left:0})).appendTo(f.o.appendTo)),f.d.overlay=a("<div></div>").attr("id",f.o.overlayId).addClass("fm-simplemodal-overlay"
).css(a.extend(f.o.overlayCss,{display:"none",opacity:f.o.opacity/100,height:f.o.transient?0:d[0],width:f.o.transient?0:d[1],position:"fixed",left:0,top:0,zIndex:f.o.zIndex+1})).appendTo(f.o.appendTo),f.d.container=a("<div></div>").attr("id",f.o.containerId).addClass("fm-simplemodal-container").css(a.extend(f.o.containerCss,{display:"none",position:"fixed",zIndex:f.o.zIndex+2})).append(f.o.close&&f.o.closeHTML?a(f.o.closeHTML).addClass(f.o.closeClass):"").appendTo(f.o.appendTo),f.d.wrap=a("<div></div>").attr("tabIndex",-1).addClass("fm-simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(f.d.container),f.d.data=e.attr("id",e.attr("id")||f.o.dataId).addClass("fm-simplemodal-data").css(a.extend(f.o.dataCss,{display:"none"})).appendTo("body"),e=null,f.setContainerDimensions(),f.d.data.appendTo(f.d.wrap),(b||c)&&f.fixIE()},bindEvents:function(){var e=this;a("."+e.o.closeClass).bind("click.fm-simplemodal",function(a){a.preventDefault(),e.close()}),!e.o.transient&&e.o.close&&e.o.overlayClose&&e.d.overlay.bind("click.fm-simplemodal",function(a){a.preventDefault(),e.close()}),a(document).bind("keydown.fm-simplemodal",function(a){!e.o.transient&&e.o.focus&&a.keyCode==9?e.watchTab(a):e.o.close&&e.o.escClose&&a.keyCode==27&&(a.preventDefault(),e.close())}),a(window).bind("resize.fm-simplemodal",function(){d=e.getDimensions(),e.setContainerDimensions(!0),b||c?e.fixIE():e.o.transient||(e.d.iframe&&e.d.iframe.css({height:d[0],width:d[1]}),e.d.overlay.css({height:d[0],width:d[1]}))})},unbindEvents:function(){a("."+this.o.closeClass).unbind("click.fm-simplemodal"),a(document).unbind("keydown.fm-simplemodal"),a(window).unbind("resize.fm-simplemodal"),this.d.overlay.unbind("click.fm-simplemodal")},fixIE:function(){var b=this,c=b.o.position;a.each([b.d.iframe||null,b.o.transient?null:b.d.overlay,b.d.container],function(a,b){if(b){var d="document.body.clientHeight",e="document.body.clientWidth",f="document.body.scrollHeight",g="document.body.scrollLeft",h="document.body.scrollTop",i="document.body.scrollWidth",j="document.documentElement.clientHeight",k="document.documentElement.clientWidth",l="document.documentElement.scrollLeft",m="document.documentElement.scrollTop",n=b[0].style;n.position="absolute";if(a<2)n.removeExpression("height"),n.removeExpression("width"),n.setExpression("height",""+f+" > "+d+" ? "+f+" : "+d+' + "px"'),n.setExpression("width",""+i+" > "+e+" ? "+i+" : "+e+' + "px"');else{var o,q;if(c&&c.constructor==Array){var r=c[0]?typeof c[0]=="number"?c[0].toString():c[0].replace(/px/,""):b.css("top").replace(/px/,"");o=r.indexOf("%")==-1?r+" + (t = "+m+" ? "+m+" : "+h+') + "px"':parseInt(r.replace(/%/,""))+" * (("+j+" || "+d+") / 100) + (t = "+m+" ? "+m+" : "+h+') + "px"';if(c[1]){var s=typeof c[1]=="number"?c[1].toString():c[1].replace(/px/,"");q=s.indexOf("%")==-1?s+" + (t = "+l+" ? "+l+" : "+g+') + "px"':parseInt(s.replace(/%/,""))+" * (("+k+" || "+e+") / 100) + (t = "+l+" ? "+l+" : "+g+') + "px"'}}else o="("+j+" || "+d+") / 2 - (this.offsetHeight / 2) + (t = "+m+" ? "+m+" : "+h+') + "px"',q="("+k+" || "+e+") / 2 - (this.offsetWidth / 2) + (t = "+l+" ? "+l+" : "+g+') + "px"';n.removeExpression("top"),n.removeExpression("left"),n.setExpression("top",o),n.setExpression("left",q)}}})},focus:function(b){var c=this,d=b||"first",e=a(":input:enabled:visible:"+d,c.d.wrap);e.length>0?e.focus():c.d.wrap.focus()},getDimensions:function(){var b=a(window),c=a.browser.opera&&a.browser.version>"9.5"&&a.fn.jquery<="1.2.6"?document.documentElement.clientHeight:a.browser.opera&&a.browser.version<"9.5"&&a.fn.jquery>"1.2.6"?window.innerHeight:b.height();return[c,b.width()]},getVal:function(a){return a=="auto"?0:a.indexOf("%")>0?a:parseInt(a.replace(/px/,""))},setContainerDimensions:function(b){var c=this;if(!b||b&&c.o.autoResize){var e=a.browser.opera?c.d.container.height():c.getVal(c.d.container.css("height")),f=a.browser.opera?c.d.container.width():c.getVal(c.d.container.css("width")),g=c.d.data.outerHeight(!0),h=c.d.data.outerWidth(!0),i=c.o.maxHeight&&c.o.maxHeight<d[0]?c.o.maxHeight:d[0],j=c.o.maxWidth&&c.o.maxWidth<d[1]?c.o.maxWidth:d[1];e?e=e>i?i:e:g?g>i?e=i:g<c.o.minHeight?e=c.o.minHeight:e=g:e=c.o.minHeight,f?f=f>j?j:f:h?h>j?f=j:h<c.o.minWidth?f=c.o.minWidth:f=h:f=c.o.minWidth,c.d.container.css({height:e,width:f}),(g>e||h>f)&&c.d.wrap.css({overflow:"auto"})}c.o.autoPosition&&c.setPosition()},setPosition:function(){var a=this,b,c,e=d[0]/2-a.d.container.outerHeight(!0)/2,f=d[1]/2-a.d.container.outerWidth(!0)/2;a.o.position&&Object.prototype.toString.call(a.o.position)==="[object Array]"?(b=a.o.position[0]||e,c=a.o.position[1]||f):(b=e,c=f),a.d.container.css({left:c,top:b})},watchTab:function(b){var c=this;if(a(b.target).parents(".fm-simplemodal-container").length>0){c.inputs=a(":input:enabled:visible:first, :input:enabled:visible:last",c.d.data[0]);if(!b.shiftKey&&b.target==c.inputs[c.inputs.length-1]||b.shiftKey&&b.target==c.inputs[0]||c.inputs.length==0){b.preventDefault();var d=b.shiftKey?"last":"first";setTimeout(function(){c.focus(d)},10)}}else b.preventDefault(),setTimeout(function(){c.focus()},10)},open:function(){var b=this;b.d.iframe&&b.d.iframe.show(),a.isFunction(b.o.onOpen)?b.o.onOpen.apply(b,[b.d]):(b.d.overlay.show(),b.d.container.show(),b.d.data.show()),b.focus(),b.bindEvents()},close:function(){var b=this;if(!b.d.data)return!1;b.unbindEvents();if(a.isFunction(b.o.onClose)&&!b.occb)b.occb=!0,b.o.onClose.apply(b,[b.d]);else{if(b.d.placeholder){var c=a("#fm-simplemodal-placeholder");b.o.persist?c.replaceWith(b.d.data.removeClass("fm-simplemodal-data").css("display",b.display)):(b.d.data.hide().remove(),c.replaceWith(b.d.orig))}else b.d.data.hide().remove();b.d.container.hide().remove(),b.d.overlay.hide().remove(),b.d.iframe&&b.d.iframe.hide().remove(),b.d={}}}}}(jQuery),function(a){a.fn.iphoneSwitch=function(b,c,d,e){var f=b=="on"?b:"off",g={mouse_over:"pointer",mouse_out:"default",switch_on_container_path:"assets/iphone_switch_container_on.png",switch_off_container_path:"assets/iphone_switch_container_off.png",switch_path:"assets/iphone_switch.png",switch_height:20,switch_width:64};return e&&a.extend(g,e),this.each(function(){var b,e;b=a('<div class="iphone_switch_container" style="height:'+g.switch_height+"px; width:"+g.switch_width+'px; position: relative; overflow: hidden"></div>'),e=a('<img class="iphone_switch" style="height:'+g.switch_height+"px; width:"+g.switch_width+"px; background-image:url("+g.switch_path+"); background-repeat:none; background-position:"+(f=="on"?0:-30)+'px" src="'+(f=="on"?g.switch_on_container_path:g.switch_off_container_path)+'" /></div>'),a(this).html(a(b).html(a(e))),a(this).mouseover(function(){a(this).css("cursor",g.mouse_over)}),a(this).mouseout(function(){a(this).css("background",g.mouse_out)}),a(this).click(function(){f=="on"?(a(this).find(".iphone_switch").animate({backgroundPosition:-30},"fast",function(){a(this).attr("src",g.switch_off_container_path),d(this)}),f="off"):(a(this).find(".iphone_switch").animate({backgroundPosition:0},"fast",function(){c(this)}),a(this).find(".iphone_switch").attr("src",g.switch_on_container_path),f="on")})})}}(jQuery),function(a){a.fn.tipsy=function(b){return b=a.extend({},a.fn.tipsy.defaults,b),this.each(function(){var c=a.fn.tipsy.elementOptions(this,b);a(this).hover(function(){a.data(this,"cancel.tipsy",!0);var b=a.data(this,"active.tipsy");b||(b=a('<div class="tipsy"><div class="tipsy-inner"/></div>'),b.css({position:"absolute",zIndex:1e5}),a.data(this,"active.tipsy",b)),(a(this).attr("title")||typeof a(this).attr("original-title")!="string")&&a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var d;typeof c.title=="string"?d=a(this).attr(c.title=="title"?"original-title":c.title):typeof c.title=="function"&&(d=c.title.call(this)),b.find(".tipsy-inner")[c.html?"html":"text"](d||c.fallback);var e=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});b.get(0).className="tipsy",b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var f=b[0].offsetWidth,g=b[0].offsetHeight,h=typeof c.gravity=="function"?c.gravity.call(this):c.gravity;switch(h.charAt(0)){case"n":b.css({top:e.top+e.height,left:e.left+e.width/2-f/2}).addClass("tipsy-north");break;case"s":b.css({top:e.top-g,left:e.left+e.width/2-f/2}).addClass("tipsy-south");break;case"e":b.css({top:e.top+e.height/2-g/2,left:e.left-f}).addClass("tipsy-east");break;case"w":b.css({top:e.top+e.height/2-g/2,left:e.left+e.width}).addClass("tipsy-west")}c.fade?b.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:.8}):b.css({visibility:"visible"})},function(){a.data(this,"cancel.tipsy",!1);var b=this;setTimeout(function(){if(a.data(this,"cancel.tipsy"))return;var d=a.data(b,"active.tipsy");c.fade?d.stop().fadeOut(function(){a(this).remove()}):d.remove()},100)})})},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.defaults={fade:!1,fallback:"",gravity:"n",html:!1,title:"title"},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}}(jQuery),function($){$.fn.editable=function(a,b){if("disable"==a){$(this).data("disabled.editable",!0);return}if("enable"==a){$(this).data("disabled.editable",!1);return}if("destroy"==a){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var c=$.extend({},$.fn.editable.defaults,{target:a},b),d=$.editable.types[c.type].plugin||function(){},e=$.editable.types[c.type].submit||function(){},f=$.editable.types[c.type].buttons||$.editable.types.defaults.buttons,g=$.editable.types[c.type].content||$.editable.types.defaults.content,h=$.editable.types[c.type].element||$.editable.types.defaults.element,i=$.editable.types[c.type].reset||$.editable.types.defaults.reset,j=c.callback||function(){},k=c.onedit||function(){},l=c.onsubmit||function(){},m=c.onreset||function(){},n=c.onerror||i;return c.tooltip&&$(this).attr("title",c.tooltip),c.autowidth="auto"==c.width,c.autoheight="auto"==c.height,this.each(function(){var a=this,b=$(a).width(),o=$(a).height();$(this).data("event.editable",c.event),$.trim($(this).html())||$(this).html(c.placeholder),$(this).bind(c.event,function(m){if(!0===$(this).data("disabled.editable"))return;if(a.editing)return;if(!1===k.apply(this,[c,a]))return;m.preventDefault(),m.stopPropagation(),c.tooltip&&$(a).removeAttr("title"),0==$(a).width()?(c.width=b,c.height=o):(c.width!="none"&&(c.width=c.autowidth?$(a).width():c.width),c.height!="none"&&(c.height=c.autoheight?$(a).height():c.height)),$(this).html().toLowerCase().replace(/(;|")/g,"")==c.placeholder.toLowerCase().replace(/(;|")/g,"")&&$(this).html(""),a.editing=!0,a.revert=$(a).html(),$(a).html("");var p=$("<form />");c.cssclass&&("inherit"==c.cssclass?p.attr("class",$(a).attr("class")):p.attr("class",c.cssclass)),c.style&&("inherit"==c.style?(p.attr("style",$(a).attr("style")),p.css("display",$(a).css("display"))):p.attr("style",c.style));var q=h.apply(p,[c,a]),r;if(c.loadurl){var s=setTimeout(function(){q.disabled=!0,g.apply(p,[c.loadtext,c,a])},100),t={};t[c.id]=a.id,$.isFunction(c.loaddata)?$.extend(t,c.loaddata.apply(a,[a.revert,c])):$.extend(t,c.loaddata),$.ajax({type:c.loadtype,url:c.loadurl,data:t,async:!1,success:function(a){window.clearTimeout(s),r=a,q.disabled=!1}})}else c.data?(r=c.data,$.isFunction(c.data)&&(r=c.data.apply(a,[a.revert,c]))):r=a.revert;g.apply(p,[r,c,a]),q.attr("name",c.name),f.apply(p,[c,a]),$(a).append(p),d.apply(p,[c,a]),$(":input:visible:enabled:first",p).focus(),c.select&&q.select(),q.keydown(function(b){b.keyCode==27&&(b.preventDefault(),i.apply(p,[c,a]))});var s;"cancel"==c.onblur?q.blur(function(b){s=setTimeout(function(){i.apply(p,[c,a])},500)}):"submit"==c.onblur?q.blur(function(a){s=setTimeout(function(){p.submit()},200)}):$.isFunction(c.onblur)?q.blur(function(b){c.onblur.apply(a,[q.val(),c])}):q.blur(function(a){}),p.submit(function(b){s&&clearTimeout(s),b.preventDefault();if(!1!==l.apply(p,[c,a])&&!1!==e.apply(p,[c,a]))if($.isFunction(c.target)){var d=c.target.apply(a,[q.val(),c]);$(a).html(d),a.editing=!1,j.apply(a,[a.innerHTML,c]),$.trim($(a).html())||$(a).html(c.placeholder)}else{var f={};f[c.name]=q.val(),f[c.id]=a.id,$.isFunction(c.submitdata)?$.extend(f,c.submitdata.apply(a,[a.revert,c])):$.extend(f,c.submitdata),"PUT"==c.method&&(f._method="put"),$(a).html(c.indicator);var g={type:"POST",data:f,dataType:"html",url:c.target,success:function(b,d){g.dataType=="html"&&$(a).html(b),a.editing=!1,j.apply(a,[b,c]),$.trim($(a).html())||$(a).html(c.placeholder)},error:function(b,d,e){n.apply(p,[c,a,b])}};$.extend(g,c.ajaxoptions),$.ajax(g)}return $(a).attr("title",c.tooltip),!1})}),this.reset=function(b){this.editing&&!1!==m.apply(b,[c,a])&&($(a).html(a.revert),a.editing=!1,$.trim($(a).html())||$(a).html(c.placeholder),c.tooltip&&$(a).attr("title",c.tooltip))}})},$.editable={types:{defaults:{element:function(a,b){var c=$('<input type="hidden"></input>');return $(this).append(c),c},content:function(a,b,c){$(":input:first",this).val(a)},reset:function(a,b){b.reset(this)},buttons:function(a,b){var c=this;if(a.submit){if(a.submit.match(/>$/))var d=$(a.submit).click(function(){d.attr("type")!="submit"&&c.submit()});else{var d=$('<button type="submit" />');d.html(a.submit)}$(this).append(d)}if(a.cancel){if(a.cancel.match(/>$/))var e=$(a.cancel);else{var e=$('<button type="cancel" />');e.html(a.cancel)}$(this).append(e),$(e).click(function(d){if($.isFunction($.editable.types[a.type].reset))var e=$.editable.types[a.type].reset;else var e=$.editable.types.defaults.reset;return e.apply(c,[a,b]),!1})}}},text:{element:function(a,b){var c=$("<input />");return a.width!="none"&&c.width(a.width),a.height!="none"&&c.height(a.height),c.attr("autocomplete","off"),$(this).append(c),c}},textarea:{element:function(a,b){var c=$("<textarea />");return a.rows?c.attr("rows",a.rows):a.height!="none"&&c.height(a.height),a.cols?c.attr("cols",a.cols):a.width!="none"&&c.width(a.width),$(this).append(c),c}},select:{element:function(a,b){var c=$("<select />");return $(this).append(c),c},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;for(var key in json){if(!json.hasOwnProperty(key))continue;if("selected"==key)continue;var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){($(this).val()==json["selected"]||$(this).text()==$.trim(original.revert))&&$(this).attr("selected","selected")})}}},addInputType:function(a,b){$.editable.types[a]=b}},$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}}(jQuery),function(a){function b(b){this.input=b,b.attr("type")=="password"&&this.handlePassword(),a(b[0].form).submit(function(){b.hasClass("placeholder")&&b[0].value==b.attr("placeholder")&&(b[0].value="")})}b.prototype={show:function(a){if(this.input[0].value===""||a&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(b){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder"),this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")&&(this.input.removeClass("placeholder"),this.input[0].value="",this.isPassword)){try{this.input[0].setAttribute("type","password")}catch(a){}this.input.show(),this.input[0].focus()}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var b=this.input;b.attr("realType","password"),this.isPassword=!0;if(a.browser.msie&&b[0].outerHTML){var c=a(b[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=c.val(b.attr("placeholder")).addClass("placeholder").focus(function(){b.trigger("focus"),a(this).hide()}),a(b[0].form).submit(function(){c.remove(),b.show()})}}};var c="placeholder"in document.createElement("input");a.fn.placeholder=function(){return c?this:this.each(function(){var c=a(this),e=new b(c);e.show(!0),c.focus(function(){e.hide()}),c.blur(function(){e.show(!1)}),a.browser.msie&&(a(window).load(function(){c.val()&&c.removeClass("placeholder"),e.show(!0)}),c.focus(function(){if(this.value==""){var a=this.createTextRange();a.collapse(!0),a.moveStart("character",0),a.select()}}))})}}(jQuery),function(a){function b(a,b){return typeof a=="function"?a.call(b):a}function c(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()}c.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](c),d[0].className="tipsy",d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var e=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),f=d[0].offsetWidth,g=d[0].offsetHeight,h=b(this.options.gravity,this.$element[0]),i;switch(h.charAt(0)){case"n":i={top:e.top+e.height+this.options.offset,left:e.left+e.width/2-f/2};break;case"s":i={top:e.top-g-this.options.offset,left:e.left+e.width/2-f/2};break;case"e":i={top:e.top+e.height/2-g/2,left:e.left-f-this.options.offset};break;case"w":i={top:e.top+e.height/2-g/2,left:e.left+e.width+this.options.offset}}h.length==2&&(h.charAt(1)=="w"?i.left=e.left+e.width/2-15:i.left=e.left+e.width/2-f+15),d.css(i).addClass("tipsy-"+h),d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.className&&d.addClass(b(this.options.className,this.$element[0])),this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("original-title")!="string")&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();var a,c=this.options;return typeof c.title=="string"?a=b.attr(c.title=="title"?"original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(b){function e(d){var e=a.data(d,"tipsy");return e||(e=new c(d,a.fn.tipsy.elementOptions(d,b)),a.data(d,"tipsy",e)),e}function f(){var a=e(this);a.hoverState="in",b.delayIn==0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},b.delayIn))}function g(){var a=e(this);a.hoverState="out",b.delayOut==0?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},b.delayOut)}if(b===!0)return this.data("tipsy");if(typeof b=="string"){var d=this.data("tipsy");return d&&d[b](),this}b=a.extend({},a.fn.tipsy.defaults,b),b.live||this.each(function(){e(this)});if(b.trigger!="manual"){var h=b.live?"live":"bind",i=b.trigger=="hover"?"mouseenter":"focus",j=b.trigger=="hover"?"mouseleave":"blur";this[h](i,f)[h](j,g)}return this},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(b,c){return function(){var d={ns:c[0],ew:c.length>1?c[1]:!1},e=a(document).scrollTop()+b,f=a(document).scrollLeft()+b,g=a(this);return g.offset().top<e&&(d.ns="n"),g.offset().left<f&&(d.ew="w"),a(window).width()+a(document).scrollLeft()-g.offset().left<b&&(d.ew="e"),a(window).height()+a(document).scrollTop()-g.offset().top<b&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}}}(jQuery),function(a){a.fn.numeric=function(b,c){typeof b=="boolean"&&(b={decimal:b}),b=b||{},typeof b.negative=="undefined"&&(b.negative=!0);var d=b.decimal===!1?"":b.decimal||".",e=b.negative===!0?!0:!1,c=typeof c=="function"?c:function(){};return this.data("numeric.decimal",d).data("numeric.negative",e).data("numeric.callback",c).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)},a.fn.numeric.keypress=function(b){var c=a.data(this,"numeric.decimal"),d=a.data(this,"numeric.negative"),e=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(e==13&&this.nodeName.toLowerCase()=="input")return!0;if(e==13)return!1;var f=!1;if(b.ctrlKey&&e==97||b.ctrlKey&&e==65)return!0;if(b.ctrlKey&&e==120||b.ctrlKey&&e==88)return!0;if(b.ctrlKey&&e==99||b.ctrlKey&&e==67)return!0;if(b.ctrlKey&&e==122||b.ctrlKey&&e==90)return!0;if(b.ctrlKey&&e==118||b.ctrlKey&&e==86||b.shiftKey&&e==45)return!0;if(e<48||e>57){var g=a(this).val();if(!(g.indexOf("-")==0||!d||e!=45||g.length!=0&&a.fn.getSelectionStart(this)!=0))return!0;c&&e==c.charCodeAt(0)&&g.indexOf(c)!=-1&&(f=!1),e!=8&&e!=9&&e!=13&&e!=35&&e!=36&&e!=37&&e!=39&&e!=46?f=!1:typeof b.charCode!="undefined"&&(b.keyCode==b.which&&b.which!=0?(f=!0,b.which==46&&(f=!1)):b.keyCode!=0&&b.charCode==0&&b.which==0&&(f=!0)),c&&e==c.charCodeAt(0)&&(g.indexOf(c)==-1?f=!0:f=!1)}else f=!0;return f},a.fn.numeric.keyup=function(b){var c=a(this).value;if(c&&c.length>0){var d=a.fn.getSelectionStart(this),e=a.data(this,"numeric.decimal"),f=a.data(this,"numeric.negative");if(e!=""){var g=c.indexOf(e);g==0&&(this.value="0"+c),g==1&&c.charAt(0)=="-"&&(this.value="-0"+c.substring(1)),c=this.value}var h=[0,1,2,3,4,5,6,7,8,9,"-",e],i=c.length;for(var j=i-1;j>=0;j--){var k=c.charAt(j);j!=0&&k=="-"?c=c.substring(0,j)+c.substring(j+1):j==0&&!f&&k=="-"&&(c=c.substring(1));var l=!1;for(var m=0;m<h.length;m++)if(k==h[m]){l=!0;break}if(!l||k==" ")c=c.substring(0,j)+c.substring(j+1)}var n=c.indexOf(e);if(n>0)for(var j=i-1;j>n;j--){var k=c.charAt(j);k==e&&(c=c.substring(0,j)+c.substring(j+1))}this.value=c,a.fn.setSelection(this,d)}},a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal"),c=a.data(this,"numeric.callback"),d=this.value;if(d!=""){var e=new RegExp("^\\d+$|\\d*"+b+"\\d+");e.exec(d)||c.apply(this)}},a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)},a.fn.getSelectionStart=function(a){if(a.createTextRange){var b=document.selection.createRange().duplicate();return b.moveEnd("character",a.value.length),b.text==""?a.value.length:a.value.lastIndexOf(b.text)}return a.selectionStart},a.fn.setSelection=function(a,b){typeof b=="number"&&(b=[b,b]);if(b&&b.constructor==Array&&b.length==2)if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveStart("character",b[0]),c.moveEnd("character",b[1]),c.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(b[0],b[1]))}}(jQuery),function(a){var b=a.browser.msie&&parseInt(a.browser.version)==6&&typeof window["XMLHttpRequest"]!="object",c=null,d=[];a.popup=function(b,c){return a.popup.impl.init(b,c)},a.popup.close=function(){a.popup.impl.close()},a.fn.popup=function(b){return a.popup.impl.init(this,b)},a.popup.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplepopup-overlay",overlayCss:{},containerId:"simplepopup-container",containerCss:{},dataId:"simplepopup-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="popupCloseImg" title="Close"></a>',closeClass:"simplepopup-close",escClose:!0,overlayClose:!1,position:null,persist:!1,"transient":!0,onOpen:null,onShow:null,onClose:null},a.popup.impl={o:null,d:{},init:function(b,d){var e=this;if(e.d.data)return!1;c=a.browser.msie&&!a.support.boxModel,e.o=a.extend({},a.popup.defaults,d),e.zIndex=e.o.zIndex,e.occb=!1;if(typeof b=="object")b=b instanceof FMJQ?b:a(b),e.d.placeholder=!1,b.parent().parent().size()>0&&(b.before(a("<span></span>").attr("id","simplepopup-placeholder").css({display:"none"})),e.d.placeholder=!0,e.display=b.css("display"),e.o.persist||(e.d.orig=b.clone(!0)));else{if(typeof b!="string"&&typeof b!="number")return alert("Simplepopup Error: Unsupported data type: "+typeof b),e;b=a("<div></div>").html(b)}return e.create(b),b=null,e.open(),a.isFunction(e.o.onShow)&&e.o.onShow.apply(e,[e.d]),e},create:function(e){var f=this;d=f.getDimensions(),!f.o.transient&&b&&(f.d.iframe=a('<iframe src="javascript:false;"></iframe>').css(a.extend(f.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:d[0],width:d[1],zIndex:f.o.zIndex,top:0,left:0})).appendTo(f.o.appendTo)),f.d.overlay=a("<div></div>").attr("id",f.o.overlayId).addClass("simplepopup-overlay").css(a.extend(f.o.overlayCss,{display:"none",opacity:f.o.opacity/100,height:f.o.transient?0:d[0],width:f.o.transient?0:d[1],position:"fixed",left:0,top:0,zIndex:f.o.zIndex+1})).appendTo(f.o.appendTo),f.d.container=a("<div></div>").attr("id",f.o.containerId).addClass("simplepopup-container").css(a.extend(f.o.containerCss,{display:"none",position:"fixed",zIndex:f.o.zIndex+2})).append(f.o.close&&f.o.closeHTML?a(f.o.closeHTML).addClass(f.o.closeClass):"").appendTo(f.o.appendTo),f.d.wrap=a("<div></div>").attr("tabIndex",-1).addClass("simplepopup-wrap").css({outline:0,width:"100%"}).appendTo(f.d.container),f.d.data=e.attr("id",e.attr("id")||f.o.dataId).addClass("simplepopup-data").css(a.extend(f.o.dataCss,{display:"none"})).appendTo("body"),e=null,f.setContainerDimensions(),f.d.data.appendTo(f.d.wrap),(b||c)&&f.fixIE()},bindEvents:function(){var e=this;a("."+e.o.closeClass).bind("click.simplepopup",function(a){a.preventDefault(),e.close()}),!e.o.transient&&e.o.close&&e.o.overlayClose&&e.d.overlay.bind("click.simplepopup",function(a){a.preventDefault(),e.close()}),a(document).bind("keydown.simplepopup",function(a){!e.o.transient&&e.o.focus&&a.keyCode==9?e.watchTab(a):e.o.close&&e.o.escClose&&a.keyCode==27&&(a.preventDefault(),e.close())}),a(window).bind("resize.simplepopup",function(){d=e.getDimensions(),e.setContainerDimensions(!0),b||c?e.fixIE():e.o.transient||(e.d.iframe&&e.d.iframe.css({height:d[0],width:d[1]}),e.d.overlay.css({height:d[0],width:d[1]}))})},unbindEvents:function(){a("."+this.o.closeClass).unbind("click.simplepopup"),a(document).unbind("keydown.simplepopup"),a(window).unbind("resize.simplepopup"),this.d.overlay.unbind("click.simplepopup")},fixIE:function(){var b=this,c=b.o.position;a.each([b.d.iframe||null,b.o.transient?null:b.d.overlay,b.d.container],function(a,b){if(b){var d="document.body.clientHeight",e="document.body.clientWidth",f="document.body.scrollHeight",g="document.body.scrollLeft",h="document.body.scrollTop",i="document.body.scrollWidth",j="document.documentElement.clientHeight",k="document.documentElement.clientWidth",l="document.documentElement.scrollLeft",m="document.documentElement.scrollTop",n=b[0].style;n.position="absolute";if(a<2)n.removeExpression("height"),n.removeExpression("width"),n.setExpression("height",""+f+" > "+d+" ? "+f+" : "+d+' + "px"'),n.setExpression("width",""+i+" > "+e+" ? "+i+" : "+e+' + "px"');else{var o,q;if(c&&c.constructor==Array){var r=c[0]?typeof c[0]=="number"?c[0].toString():c[0].replace(/px/,""):b.css("top").replace(/px/,"");o=r.indexOf("%")==-1?r+" + (t = "+m+" ? "+m+" : "+h+') + "px"':parseInt(r.replace(/%/,""))+" * (("+j+" || "+d+") / 100) + (t = "+m+" ? "+m+" : "+h+') + "px"';if(c[1]){var s=typeof c[1]=="number"?c[1].toString():c[1].replace(/px/,"");q=s.indexOf("%")==-1?s+" + (t = "+l+" ? "+l+" : "+g+') + "px"':parseInt(s.replace(/%/,""))+" * (("+k+" || "+e+") / 100) + (t = "+l+" ? "+l+" : "+g+') + "px"'}}else o="("+j+" || "+d+") / 2 - (this.offsetHeight / 2) + (t = "+m+" ? "+m+" : "+h+') + "px"',q="("+k+" || "+e+") / 2 - (this.offsetWidth / 2) + (t = "+l+" ? "+l+" : "+g+') + "px"';n.removeExpression("top"),n.removeExpression("left"),n.setExpression("top",o),n.setExpression("left",q)}}})},focus:function(b){var c=this,d=b||"first",e=a(":input:enabled:visible:"+d,c.d.wrap);e.length>0?e.focus():c.d.wrap.focus()},getDimensions:function(){var b=a(window),c=a.browser.opera&&a.browser.version>"9.5"&&a.fn.jquery<="1.2.6"?document.documentElement.clientHeight:a.browser.opera&&a.browser.version<"9.5"&&a.fn.jquery>"1.2.6"?window.innerHeight:b.height();return[c,b.width()]},getVal:function(a){return a=="auto"?0:a.indexOf("%")>0?a:parseInt(a.replace(/px/,""))},setContainerDimensions:function(b){var c=this;if(!b||b&&c.o.autoResize){var e=a.browser.opera?c.d.container.height():c.getVal(c.d.container.css("height")),f=a.browser.opera?c.d.container.width():c.getVal(c.d.container.css("width")),g=c.d.data.outerHeight(!0),h=c.d.data.outerWidth(!0),i=c.o.maxHeight&&c.o.maxHeight<d[0]?c.o.maxHeight:d[0],j=c.o.maxWidth&&c.o.maxWidth<d[1]?c.o.maxWidth:d[1];e?e=e>i?i:e:g?g>i?e=i:g<c.o.minHeight?e=c.o.minHeight:e=g:e=c.o.minHeight,f?f=f>j?j:f:h?h>j?f=j:h<c.o.minWidth?f=c.o.minWidth:f=h:f=c.o.minWidth,c.d.container.css({height:e,width:f}),(g>e||h>f)&&c.d.wrap.css({overflow:"auto"})}c.o.autoPosition&&c.setPosition()},setPosition:function(){var a=this,b,c,e=d[0]/2-a.d.container.outerHeight(!0)/2,f=d[1]/2-a.d.container.outerWidth(!0)/2;a.o.position&&Object.prototype.toString.call(a.o.position)==="[object Array]"?(b=a.o.position[0]||e,c=a.o.position[1]||f):(b=e,c=f),a.d.container.css({left:c,top:b})},watchTab:function(b){var c=this;if(a(b.target).parents(".simplepopup-container").length>0){c.inputs=a(":input:enabled:visible:first, :input:enabled:visible:last",c.d.data[0]);if(!b.shiftKey&&b.target==c.inputs[c.inputs.length-1]||b.shiftKey&&b.target==c.inputs[0]||c.inputs.length==0){b.preventDefault();var d=b.shiftKey?"last":"first";setTimeout(function(){c.focus(d)},10)}}else b.preventDefault(),setTimeout(function(){c.focus()},10)},open:function(){var b=this;b.d.iframe&&b.d.iframe.show(),a.isFunction(b.o.onOpen)?b.o.onOpen.apply(b,[b.d]):(b.d.overlay.show(),b.d.container.show(),b.d.data.show()),b.focus(),b.bindEvents()},close:function(){var b=this;if(!b.d.data)return!1;b.unbindEvents();if(a.isFunction(b.o.onClose)&&!b.occb)b.occb=!0,b.o.onClose.apply(b,[b.d]);else{if(b.d.placeholder){var c=a("#simplepopup-placeholder");b.o.persist?c.replaceWith(b.d.data.removeClass("simplepopup-data").css("display",b.display)):(b.d.data.hide().remove(),c.replaceWith(b.d.orig))}else b.d.data.hide().remove();b.d.container.hide().remove(),b.d.overlay.hide().remove(),b.d.iframe&&b.d.iframe.hide().remove(),b.d={}}}}}(jQuery),$.noConflict(!0)}(),FMUUID.prototype.valueOf=function(){return this.id},FMUUID.prototype.toString=function(){return this.id},FMUUID.prototype.createFMUUID=function(){var a=new Date(1582,10,15,0,0,0,0),b=new Date,c=b.getTime()-a.getTime(),d="-",e=FMUUID.getIntegerBits(c,0,31),f=FMUUID.getIntegerBits(c,32,47),g=FMUUID.getIntegerBits(c,48,59)+"1",h=FMUUID.getIntegerBits(FMUUID.rand(4095),0,7),i=FMUUID.getIntegerBits(FMUUID.rand(4095),0,7),j=FMUUID.getIntegerBits(FMUUID.rand(8191),0,7)+FMUUID.getIntegerBits(FMUUID.rand(8191),8,15)+FMUUID.getIntegerBits(FMUUID.rand(8191),0,7)+FMUUID.getIntegerBits(FMUUID.rand(8191),8,15)+FMUUID.getIntegerBits(FMUUID.rand(8191),0,15);return e+d+f+d+g+d+h+i+d+j},FMUUID.getIntegerBits=function(a,b,c){var d=FMUUID.returnBase(a,16),e=new Array,f="",g=0;for(g=0;g<d.length;g++)e.push(d.substring(g,g+1));for(g=Math.floor(b/4);g<=Math.floor(c/4);g++)!e[g]||e[g]==""?f+="0":f+=e[g];return f},FMUUID.returnBase=function(a,b){return a.toString(b).toUpperCase()},FMUUID.rand=function(a){return Math.floor(Math.random()*(a+1))},Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.abbrDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.abbrMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.firstDayOfWeek=1,Date.format="dd/mm/yyyy",Date.fullYearStart="20",function(){function a(a,b){
Date.prototype[a]||(Date.prototype[a]=b)}a("isLeapYear",function(){var a=this.getFullYear();return a%4==0&&a%100!=0||a%400==0}),a("isWeekend",function(){return this.getDay()==0||this.getDay()==6}),a("isWeekDay",function(){return!this.isWeekend()}),a("getDaysInMonth",function(){return[31,this.isLeapYear()?29:28,31,30,31,30,31,31,30,31,30,31][this.getMonth()]}),a("getDayName",function(a){return a?Date.abbrDayNames[this.getDay()]:Date.dayNames[this.getDay()]}),a("getMonthName",function(a){return a?Date.abbrMonthNames[this.getMonth()]:Date.monthNames[this.getMonth()]}),a("getDayOfYear",function(){var a=new Date("1/1/"+this.getFullYear());return Math.floor((this.getTime()-a.getTime())/864e5)}),a("getWeekOfYear",function(){return Math.ceil(this.getDayOfYear()/7)}),a("setDayOfYear",function(a){return this.setMonth(0),this.setDate(a),this}),a("addYears",function(a){return this.setFullYear(this.getFullYear()+a),this}),a("addMonths",function(a){var b=this.getDate();return this.setMonth(this.getMonth()+a),b>this.getDate()&&this.addDays(-this.getDate()),this}),a("addDays",function(a){return this.setTime(this.getTime()+a*864e5),this}),a("addHours",function(a){return this.setHours(this.getHours()+a),this}),a("addMinutes",function(a){return this.setMinutes(this.getMinutes()+a),this}),a("addSeconds",function(a){return this.setSeconds(this.getSeconds()+a),this}),a("zeroTime",function(){return this.setMilliseconds(0),this.setSeconds(0),this.setMinutes(0),this.setHours(0),this}),a("asString",function(a){var c=a||Date.format;return c.split("mm").length>1?c=c.split("mmmm").join(this.getMonthName(!1)).split("mmm").join(this.getMonthName(!0)).split("mm").join(b(this.getMonth()+1)):c=c.split("m").join(this.getMonth()+1),c=c.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear()+"").substring(2)).split("dd").join(b(this.getDate())).split("d").join(this.getDate()),c}),Date.fromString=function(a){var b=Date.format,c=new Date("01/01/1970");if(a=="")return c;a=a.toLowerCase();var d="",e=[],f=/(dd?d?|mm?m?|yy?yy?)+([^(m|d|y)])?/g,g;while((g=f.exec(b))!=null){switch(g[1]){case"d":case"dd":case"m":case"mm":case"yy":case"yyyy":d+="(\\d+\\d?\\d?\\d?)+",e.push(g[1].substr(0,1));break;case"mmm":d+="([a-z]{3})",e.push("M")}g[2]&&(d+=g[2])}var h=new RegExp(d),i=a.match(h);for(var j=0;j<e.length;j++){var k=i[j+1];switch(e[j]){case"d":c.setDate(k);break;case"m":c.setMonth(Number(k)-1);break;case"M":for(var l=0;l<Date.abbrMonthNames.length;l++)if(Date.abbrMonthNames[l].toLowerCase()==k)break;c.setMonth(l);break;case"y":c.setYear(k)}}return c};var b=function(a){var b="0"+a;return b.substring(b.length-2)}}(),function(a){var b,c,d=1,e,f=this,g=!1,h="postMessage",i="addEventListener",j,k=f[h];a[h]=function(b,c,e){if(!c)return;b=typeof b=="string"?b:a.param(b),e=e||parent,k?e[h](b,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(e.location=c.replace(/#.*$/,"")+"#"+ +(new Date)+d++ +"&"+b)},a.receiveMessage=j=function(d,h,l){k?(d&&(e&&j(),e=function(b){if(typeof h=="string"&&b.origin!==h||a.isFunction(h)&&h(b.origin)===g)return g;d(b)}),f[i]?f[d?i:"removeEventListener"]("message",e,g):f[d?"attachEvent":"detachEvent"]("onmessage",e)):(b&&clearInterval(b),b=null,d&&(l=typeof h=="number"?h:typeof l=="number"?l:100,b=setInterval(function(){var a=document.location.hash,b=/^#?\d+&/;a!==c&&b.test(a)&&(c=a,d({data:a.replace(b,"")}))},l)))}}(FMJQ);var Mustache=typeof module!="undefined"&&module.exports||{};(function(a){function i(a){return h.test(a)}function n(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return m[a]||a})}function o(a,b,c,d){d=d||"<template>";var e=b.split("\n"),f=Math.max(c-3,0),g=Math.min(e.length,c+3),h=e.slice(f,g),i;for(var j=0,k=h.length;j<k;++j)i=j+f+1,h[j]=(i===c?" >> ":"    ")+h[j];return a.template=b,a.line=c,a.file=d,a.message=[d+":"+c,h.join("\n"),"",a.message].join("\n"),a}function p(a,b,c){if(a===".")return b[b.length-1];var d=a.split("."),e=d.length-1,f=d[e],g,h,i=b.length,j,k;while(i){k=b.slice(0),h=b[--i],j=0;while(j<e){h=h[d[j++]];if(h==null)break;k.push(h)}if(h&&f in h){g=h[f];break}}return typeof g=="function"&&(g=g.call(k[k.length-1])),g==null?c:g}function q(a,b,c,d){var e="",h=p(a,b);if(d){if(h==null||h===!1||f(h)&&h.length===0)e+=c()}else if(f(h))g(h,function(a){b.push(a),e+=c(),b.pop()});else if(typeof h=="object")b.push(h),e+=c(),b.pop();else if(typeof h=="function"){var i=b[b.length-1],j=function(a){return w(a,i)};e+=h.call(i,c(),j)||""}else h&&(e+=c());return e}function r(b,c){c=c||{};var d=c.tags||a.tags,e=d[0],f=d[d.length-1],g=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],h=[],k=!1,l=!1,m=function(){if(k&&!l&&!c.space)while(h.length)g.splice(h.pop(),1);else h=[];k=!1,l=!1},n=[],p,q,r,s=function(a){d=j(a).split(/\s+/),q=d[0],r=d[d.length-1]},t=function(a){g.push('";',p,'\nvar partial = partials["'+j(a)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},u=function(a,d){var e=j(a);if(e==="")throw o(new Error("Section name may not be empty"),b,z,c.file);n.push({name:e,inverted:d}),g.push('";',p,'\nvar name = "'+e+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},v=function(a){u(a,!0)},w=function(a){var d=j(a),e=n.length!=0&&n[n.length-1].name;if(!e||d!=e)throw o(new Error('Section named "'+d+'" was never opened'),b,z,c.file);var f=n.pop();g.push('";',"\n    return buffer;","\n  };","\n})();"),f.inverted?g.push("\nbuffer += renderSection(name,stack,callback,true);"):g.push("\nbuffer += renderSection(name,stack,callback);"),g.push('\nbuffer += "')},x=function(a){g.push('";',p,'\nbuffer += lookup("'+j(a)+'",stack,"");','\nbuffer += "')},y=function(a){g.push('";',p,'\nbuffer += escapeHTML(lookup("'+j(a)+'",stack,""));','\nbuffer += "')},z=1,A,B;for(var C=0,D=b.length;C<D;++C)if(b.slice(C,C+e.length)===e){C+=e.length,A=b.substr(C,1),p="\nline = "+z+";",q=e,r=f,k=!0;switch(A){case"!":C++,B=null;break;case"=":C++,f="="+f,B=s;break;case">":C++,B=t;break;case"#":C++,B=u;break;case"^":C++,B=v;break;case"/":C++,B=w;break;case"{":f="}"+f;case"&":C++,l=!0,B=x;break;default:l=!0,B=y}var E=b.indexOf(f,C);if(E===-1)throw o(new Error('Tag "'+e+'" was not closed properly'),b,z,c.file);var F=b.substring(C,E);B&&B(F);var G=0;while(~(G=F.indexOf("\n",G)))z++,G++;C=E+f.length-1,e=q,f=r}else{A=b.substr(C,1);switch(A){case'"':case"\\":l=!0,g.push("\\"+A);break;case"\r":break;case"\n":h.push(g.length),g.push("\\n"),m(),z++;break;default:i(A)?h.push(g.length):l=!0,g.push(A)}}if(n.length!=0)throw o(new Error('Section "'+n[n.length-1].name+'" was not closed properly'),b,z,c.file);m(),g.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var H=g.join("").replace(/buffer \+= "";\n/g,"");return c.debug&&(typeof console!="undefined"&&console.log?console.log(H):typeof print=="function"&&print(H)),H}function s(a,b){var c="view,partials,stack,lookup,escapeHTML,renderSection,render",d=r(a,b),e=new Function(c,d);return function(c,d){d=d||{};var f=[c];try{return e(c,d,f,p,n,q,w)}catch(g){throw o(g.error,a,g.line,b.file)}}}function u(){t={}}function v(a,b){return b=b||{},b.cache!==!1?(t[a]||(t[a]=s(a,b)),t[a]):s(a,b)}function w(a,b,c){return v(a)(b,c)}a.name="mustache.js",a.version="0.5.0-dev",a.tags=["{{","}}"],a.parse=r,a.compile=v,a.render=w,a.clearCache=u,a.to_html=function(a,b,c,d){var e=w(a,b,c);if(typeof d!="function")return e;d(e)};var b=Object.prototype.toString,c=Array.isArray,d=Array.prototype.forEach,e=String.prototype.trim,f;c?f=c:f=function(a){return b.call(a)==="[object Array]"};var g;d?g=function(a,b,c){return d.call(a,b,c)}:g=function(a,b,c){for(var d=0,e=a.length;d<e;++d)b.call(c,a[d],d,a)};var h=/^\s*$/,j;if(e)j=function(a){return a==null?"":e.call(a)};else{var k,l;i("Â ")?(k=/^\s+/,l=/\s+$/):(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),j=function(a){return a==null?"":String(a).replace(k,"").replace(l,"")}}var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},t={}})(Mustache),eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a%=b)>35?String.fromCharCode(a+29):a.toString(36))};while(c--)d[c]&&(a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]));return a}('(m($){1k W=2v.4N,D=2v.4M,F=2v.4L,u=2v.4K;m V(){C $("<4J/>")};$.N=m(T,c){1k O=$(T),2E,A=V(),1i=V(),I=V().r(V()).r(V()).r(V()),B=V().r(V()).r(V()).r(V()),E=$([]),1J,G,l,17={v:0,l:0},Q,M,1j,1f={v:0,l:0},12=0,1I="1G",2k,2j,1s,1r,S,1A,1z,2o,2n,14,1O,a,b,j,g,f={a:0,b:0,j:0,g:0,H:0,L:0},2u=R.4I,$p,d,i,o,w,h,2p;m 1m(x){C x+17.v-1f.v};m 1l(y){C y+17.l-1f.l};m 1a(x){C x-17.v+1f.v};m 19(y){C y-17.l+1f.l};m 1y(3H){C 3H.4H-1f.v};m 1x(3G){C 3G.4G-1f.l};m 13(30){1k 1h=30||1s,1g=30||1r;C{a:u(f.a*1h),b:u(f.b*1g),j:u(f.j*1h),g:u(f.g*1g),H:u(f.j*1h)-u(f.a*1h),L:u(f.g*1g)-u(f.b*1g)}};m 23(a,b,j,g,2Z){1k 1h=2Z||1s,1g=2Z||1r;f={a:u(a/1h||0),b:u(b/1g||0),j:u(j/1h||0),g:u(g/1g||0)};f.H=f.j-f.a;f.L=f.g-f.b};m 1e(){9(!O.H()){C}17={v:u(O.2t().v),l:u(O.2t().l)};Q=O.2X();M=O.3F();17.l+=(O.2Y()-M)>>1;17.v+=(O.2q()-Q)>>1;1A=u(c.4F/1s)||0;1z=u(c.4E/1r)||0;2o=u(F(c.4D/1s||1<<24,Q));2n=u(F(c.4C/1r||1<<24,M));9($().4B=="1.3.2"&&1I=="21"&&!2u["4A"]){17.l+=D(R.1p.2r,2u.2r);17.v+=D(R.1p.2s,2u.2s)}1f=/1G/.1V(1j.q("1o"))?{v:u(1j.2t().v)-1j.2s(),l:u(1j.2t().l)-1j.2r()}:1I=="21"?{v:$(R).2s(),l:$(R).2r()}:{v:0,l:0};G=1m(0);l=1l(0);9(f.j>Q||f.g>M){1S()}};m 1T(3D){9(!1O){C}A.q({v:1m(f.a),l:1l(f.b)}).r(1i).H(w=f.H).L(h=f.L);1i.r(I).r(E).q({v:0,l:0});I.H(D(w-I.2q()+I.2X(),0)).L(D(h-I.2Y()+I.3F(),0));$(B[0]).q({v:G,l:l,H:f.a,L:M});$(B[1]).q({v:G+f.a,l:l,H:w,L:f.b});$(B[2]).q({v:G+f.j,l:l,H:Q-f.j,L:M});$(B[3]).q({v:G+f.a,l:l+f.g,H:w,L:M-f.g});w-=E.2q();h-=E.2Y();2N(E.3b){15 8:$(E[4]).q({v:w>>1});$(E[5]).q({v:w,l:h>>1});$(E[6]).q({v:w>>1,l:h});$(E[7]).q({l:h>>1});15 4:E.3E(1,3).q({v:w});E.3E(2,4).q({l:h})}9(3D!==Y){9($.N.1Z!=2Q){$(R).U($.N.1Z,$.N.3C)}9(c.1R){$(R)[$.N.1Z]($.N.3C=2Q)}}9($.1b.1E&&I.2q()-I.2X()==2){I.q("3B",0);3u(m(){I.q("3B","4y")},0)}};m 22(3A){1e();1T(3A);a=1m(f.a);b=1l(f.b);j=1m(f.j);g=1l(f.g)};m 27(2W,2w){c.1N?2W.4x(c.1N,2w):2W.1q()};m 1c(2V){1k x=1a(1y(2V))-f.a,y=19(1x(2V))-f.b;9(!2p){1e();2p=11;A.1F("4w",m(){2p=Y})}S="";9(c.2C){9(y<=c.1U){S="n"}X{9(y>=f.L-c.1U){S="s"}}9(x<=c.1U){S+="w"}X{9(x>=f.H-c.1U){S+="e"}}}A.q("2U",S?S+"-18":c.26?"4v":"");9(1J){1J.4u()}};m 2R(4t){$("1p").q("2U","");9(c.4s||f.H*f.L==0){27(A.r(B),m(){$(J).1q()})}$(R).U("P",2l);A.P(1c);c.2f(T,13())};m 2B(1W){9(1W.3w!=1){C Y}1e();9(S){$("1p").q("2U",S+"-18");a=1m(f[/w/.1V(S)?"j":"a"]);b=1l(f[/n/.1V(S)?"g":"b"]);$(R).P(2l).1F("1w",2R);A.U("P",1c)}X{9(c.26){2k=G+f.a-1y(1W);2j=l+f.b-1x(1W);A.U("P",1c);$(R).P(2S).1F("1w",m(){c.2f(T,13());$(R).U("P",2S);A.P(1c)})}X{O.1M(1W)}}C Y};m 1v(3z){9(14){9(3z){j=D(G,F(G+Q,a+W(g-b)*14*(j>a||-1)));g=u(D(l,F(l+M,b+W(j-a)/14*(g>b||-1))));j=u(j)}X{g=D(l,F(l+M,b+W(j-a)/14*(g>b||-1)));j=u(D(G,F(G+Q,a+W(g-b)*14*(j>a||-1))));g=u(g)}}};m 1S(){a=F(a,G+Q);b=F(b,l+M);9(W(j-a)<1A){j=a-1A*(j<a||-1);9(j<G){a=G+1A}X{9(j>G+Q){a=G+Q-1A}}}9(W(g-b)<1z){g=b-1z*(g<b||-1);9(g<l){b=l+1z}X{9(g>l+M){b=l+M-1z}}}j=D(G,F(j,G+Q));g=D(l,F(g,l+M));1v(W(j-a)<W(g-b)*14);9(W(j-a)>2o){j=a-2o*(j<a||-1);1v()}9(W(g-b)>2n){g=b-2n*(g<b||-1);1v(11)}f={a:1a(F(a,j)),j:1a(D(a,j)),b:19(F(b,g)),g:19(D(b,g)),H:W(j-a),L:W(g-b)};1T();c.2g(T,13())};m 2l(2T){j=/w|e|^$/.1V(S)||14?1y(2T):1m(f.j);g=/n|s|^$/.1V(S)||14?1x(2T):1l(f.g);1S();C Y};m 1u(3y,3x){j=(a=3y)+f.H;g=(b=3x)+f.L;$.2c(f,{a:1a(a),b:19(b),j:1a(j),g:19(g)});1T();c.2g(T,13())};m 2S(2m){a=D(G,F(2k+1y(2m),G+Q-f.H));b=D(l,F(2j+1x(2m),l+M-f.L));1u(a,b);2m.4r();C Y};m 2h(){$(R).U("P",2h);1e();j=a;g=b;1S();S="";9(!B.2y(":4q")){A.r(B).1q().2D(c.1N||0)}1O=11;$(R).U("1w",1L).P(2l).1F("1w",2R);A.U("P",1c);c.3v(T,13())};m 1L(){$(R).U("P",2h).U("1w",1L);27(A.r(B));23(1a(a),19(b),1a(a),19(b));9(!J 4p $.N){c.2g(T,13());c.2f(T,13())}};m 2z(2i){9(2i.3w!=1||B.2y(":4o")){C Y}1e();2k=a=1y(2i);2j=b=1x(2i);$(R).P(2h).1w(1L);C Y};m 2A(){22(Y)};m 2x(){2E=11;25(c=$.2c({1Q:"4n",26:11,20:"1p",2C:11,1U:10,3t:m(){},3v:m(){},2g:m(){},2f:m(){}},c));A.r(B).q({36:""});9(c.2F){1O=11;1e();1T();A.r(B).1q().2D(c.1N||0)}3u(m(){c.3t(T,13())},0)};1k 2Q=m(16){1k k=c.1R,d,t,2M=16.4m;d=!1K(k.2O)&&(16.2e||16.3q.2e)?k.2O:!1K(k.2a)&&16.3r?k.2a:!1K(k.2b)&&16.3s?k.2b:!1K(k.2P)?k.2P:10;9(k.2P=="18"||(k.2b=="18"&&16.3s)||(k.2a=="18"&&16.3r)||(k.2O=="18"&&(16.2e||16.3q.2e))){2N(2M){15 37:d=-d;15 39:t=D(a,j);a=F(a,j);j=D(t+d,a);1v();1t;15 38:d=-d;15 40:t=D(b,g);b=F(b,g);g=D(t+d,b);1v(11);1t;3p:C}1S()}X{a=F(a,j);b=F(b,g);2N(2M){15 37:1u(D(a-d,G),b);1t;15 38:1u(a,D(b-d,l));1t;15 39:1u(a+F(d,Q-1a(j)),b);1t;15 40:1u(a,b+F(d,M-19(g)));1t;3p:C}}C Y};m 1P(3o,2L){3m(2d 4l 2L){9(c[2d]!==1X){3o.q(2L[2d],c[2d])}}};m 25(K){9(K.20){(1j=$(K.20)).3g(A.r(B))}$.2c(c,K);1e();9(K.2K!=3n){E.1n();E=$([]);i=K.2K?K.2K=="4k"?4:8:0;3c(i--){E=E.r(V())}E.29(c.1Q+"-4j").q({1o:"1G",34:0,1H:12+1||1});9(!4i(E.q("H"))>=0){E.H(5).L(5)}9(o=c.2J){E.q({2J:o,2G:"3j"})}1P(E,{3k:"2I-28",3i:"2H-28",3l:"1d"})}1s=c.4h/Q||1;1r=c.4g/M||1;9(K.a!=3n){23(K.a,K.b,K.j,K.g);K.2F=!K.1q}9(K.1R){c.1R=$.2c({2b:1,2a:"18"},K.1R)}B.29(c.1Q+"-4f");1i.29(c.1Q+"-4e");3m(i=0;i++<4;){$(I[i-1]).29(c.1Q+"-2I"+i)}1P(1i,{4d:"2H-28",4c:"1d"});1P(I,{3l:"1d",2J:"2I-H"});1P(B,{4b:"2H-28",4a:"1d"});9(o=c.3k){$(I[0]).q({2G:"3j",3h:o})}9(o=c.3i){$(I[1]).q({2G:"49",3h:o})}A.3g(1i.r(I).r(1J).r(E));9($.1b.1E){9(o=B.q("3f").3e(/1d=(\\d+)/)){B.q("1d",o[1]/1Y)}9(o=I.q("3f").3e(/1d=(\\d+)/)){I.q("1d",o[1]/1Y)}}9(K.1q){27(A.r(B))}X{9(K.2F&&2E){1O=11;A.r(B).2D(c.1N||0);22()}}14=(d=(c.48||"").47(/:/))[0]/d[1];O.r(B).U("1M",2z);9(c.1D||c.1C===Y){A.U("P",1c).U("1M",2B);$(3d).U("18",2A)}X{9(c.1C||c.1D===Y){9(c.2C||c.26){A.P(1c).1M(2B)}$(3d).18(2A)}9(!c.46){O.r(B).1M(2z)}}c.1C=c.1D=1X};J.1n=m(){25({1D:11});A.r(B).1n()};J.45=m(){C c};J.31=25;J.44=13;J.43=23;J.42=1L;J.41=22;$p=O;3c($p.3b){12=D(12,!1K($p.q("z-3a"))?$p.q("z-3a"):12);9($p.q("1o")=="21"){1I="21"}$p=$p.20(":3Z(1p)")}12=c.1H||12;9($.1b.1E){O.3Y("3X","3W")}$.N.1Z=$.1b.1E||$.1b.3V?"3U":"3T";9($.1b.3S){1J=V().q({H:"1Y%",L:"1Y%",1o:"1G",1H:12+2||2})}A.r(B).q({36:"35",1o:1I,3R:"35",1H:12||"0"});A.q({1H:12+2||2});1i.r(I).q({1o:"1G",34:0});T.33||T.3Q=="33"||!O.2y("3P")?2x():O.1F("3O",2x);9($.1b.1E&&$.1b.3N>=7){T.32=T.32}};$.2w.N=m(Z){Z=Z||{};J.3M(m(){9($(J).1B("N")){9(Z.1n){$(J).1B("N").1n();$(J).3L("N")}X{$(J).1B("N").31(Z)}}X{9(!Z.1n){9(Z.1C===1X&&Z.1D===1X){Z.1C=11}$(J).1B("N",3K $.N(J,Z))}}});9(Z.3J){C $(J).1B("N")}C J}})(3I);',62,298,"|||||||||if|x1|y1|_7|||_23|y2|||x2||top|function||||css|add|||_4|left|||||_a|_d|return|_2|_e|_3|_10|width|_c|this|_53|height|_13|imgAreaSelect|_8|mousemove|_12|document|_1c|_6|unbind|_5|_1|else|false|_54||true|_16|_2c|_21|case|_4f|_11|resize|_29|_28|browser|_39|opacity|_30|_15|sy|sx|_b|_14|var|_27|_26|remove|position|body|hide|_1b|_1a|break|_44|_41|mouseup|evY|evX|_1e|_1d|data|enable|disable|msie|one|absolute|zIndex|_17|_f|isNaN|_49|mousedown|fadeSpeed|_22|_50|classPrefix|keys|_31|_32|resizeMargin|test|_3f|undefined|100|keyPress|parent|fixed|_35|_2e||_4e|movable|_37|color|addClass|ctrl|shift|extend|option|altKey|onSelectEnd|onSelectChange|_48|_4b|_19|_18|_3d|_47|_20|_1f|_25|outerWidth|scrollTop|scrollLeft|offset|_24|Math|fn|_4d|is|_4a|_4c|_3e|resizable|fadeIn|_9|show|borderStyle|background|border|borderWidth|handles|_52|key|switch|alt|arrows|_34|_3b|_40|_43|cursor|_3a|_38|innerWidth|outerHeight|_2f|_2d|setOptions|src|complete|fontSize|hidden|visibility||||index|length|while|window|match|filter|append|borderColor|borderColor2|solid|borderColor1|borderOpacity|for|null|_51|default|originalEvent|ctrlKey|shiftKey|onInit|setTimeout|onSelectStart|which|_46|_45|_42|_36|margin|onKeyPress|_33|slice|innerHeight|_2b|_2a|FMJQ|instance|new|removeData|each|version|load|img|readyState|overflow|opera|keypress|keydown|safari|on|unselectable|attr|not||update|cancelSelection|setSelection|getSelection|getOptions|persistent|split|aspectRatio|dashed|outerOpacity|outerColor|selectionOpacity|selectionColor|selection|outer|imageHeight|imageWidth|parseInt|handle|corners|in|keyCode|imgareaselect|animated|instanceof|visible|preventDefault|autoHide|_3c|toggle|move|mouseout|fadeOut|auto|relative|getBoundingClientRect|jquery|maxHeight|maxWidth|minHeight|minWidth|pageY|pageX|documentElement|div|round|min|max|abs".split("|")));var FOTOMOTO,Fotomoto;FOTOMOTO||(FOTOMOTO={}),Fotomoto||(Fotomoto=FOTOMOTO),FOTOMOTO.allProductsList=["print","postcard","license","ecard"],FOTOMOTO.setOptions=function(a,b){for(var c in b)a[c]=b[c];return a},FOTOMOTO.trimFloat=function(a,b){return Math.round(a*Math.pow(10,b+1)/10)/Math.pow(10,b)*1},FOTOMOTO.encode_utf8=function(a){return document.characterSet&&document.characterSet.toUpperCase()=="UTF-8"||document.charset&&document.charset.toUpperCase()=="UTF-8"?a:unescape(encodeURIComponent(a))},FOTOMOTO.decode_utf8=function(a){return document.characterSet=="UTF-8"?a:decodeURIComponent(escape(a))},FOTOMOTO.isIE6=function(){return FMJQ.browser.msie&&parseInt(FMJQ.browser.version)==6},FOTOMOTO.get=function(a){if(typeof a=="string"){if(a=="")return FMJQ("");/^#/.test(a)||(a="#"+a),a=FMJQ(a).get(0)}return FMJQ(a)},FOTOMOTO.getByClassName=function(a){if(typeof a=="string"){if(a=="")return FMJQ("");/^\./.test(a)||(a="."+a)}return FMJQ(a)},FOTOMOTO.capitalize=function(a){return a=a.replace(/fm_/,""),a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},FOTOMOTO.truncate=function(a,b){return a.length<b?a:a.substring(a,b)+"..."},FOTOMOTO.escapeHTML=function(a){return a?(a+="",a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;")):""},FOTOMOTO.capitalize=function(a){return a?(a=a.replace(/fm_/g," "),a.replace(/\w+/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})):null},FOTOMOTO.emptyChildren=function(a){while(a.hasChildNodes())a.removeChild(a.firstChild)},FOTOMOTO.relEntries=function(a){if(a==null)return{};var b={},c=a.split(";");for(var d=0;d<c.length;d++){if(c[d]=="")continue;var e=c[d].split(":");b[e.shift()]=e.join(":")}return b},FOTOMOTO.relStr=function(a){var b=[];for(var c in a)b.push(c+":"+a[c]);return b.join(";")},FOTOMOTO.setRelEntry=function(a,b,c){c==null&&a.setAttribute("rel",b);var d=FOTOMOTO.relEntries(a.getAttribute("rel"));d[b]=c,a.setAttribute("rel",rel_str(d))},FOTOMOTO.getRelEntry=function(a,b){var c=a.getAttribute("rel");if(b==null)return c;var d=FOTOMOTO.relEntries(c);return d[b]},FOTOMOTO.toolbarOff=function(){if(typeof fotomoto!="string")return!1;var a=FOTOMOTO.relEntries(fotomoto);return a.toolbar=="off"?!0:!1},FOTOMOTO.Class=function(){return function(){this.init.apply(this,arguments)}},FOTOMOTO.MaskedInput=new FOTOMOTO.Class,FOTOMOTO.MaskedInput.prototype={init:function(a){this.input=a,this.maskedText=a.value,this.className=this.input.className.split(" ")[0],this.defaultType=this.input.type,this.hasData=!1,this.bindMaskedEvent()},bindMaskedEvent:function(){FMJQ(this.input).bind("focus",{me:this},function(a){a.data.me.onFocus()}),FMJQ(this.input).bind("blur",{me:this},function(a){a.data.me.onBlur()})},onFocus:function(){this.input.value!=this.maskedText&&(this.input.className=this.className,this.hasData=!0),this.input.value==this.maskedText&&!this.hasData&&(this.input.value="",this.input.className=this.className,this.hasData=!0)},onBlur:function(){this.input.value==""&&(this.input.className=this.className+" fm_InputMasked",this.input.value=this.maskedText,this.hasData=!1)},onSubmit:function(){this.hasData||(this.input.value="")},getValue:function(){return this.hasData?this.input.value:""}},FOTOMOTO.loadImage=function(a,b,c){c||(c=FOTOMOTO_CONFIG.static_domain+"/assets/loading_small.gif");var d=a.onload;a.onload=null,a.src=c;var e=new Image;e.onload=function(){d!=null&&(a.onload=d),a.src=b},e.src=b},FOTOMOTO.resizeImage=function(a){var b=FOTOMOTO.get(a);FOTOMOTO.loadResizeImage(b.attr("src"),b.width(),b.height(),a)},FOTOMOTO.loadResizeImage=function(a,b,c,d){var e=new Image;e.onload=function(){var a=b,e=c;this.width>=this.height?e=a/this.width*this.height:a=e/this.height*this.width,b<a&&(a=b,e=a/this.width*this.height),c<e&&(e=c,a=e/this.height*this.width),this.width<b&&this.height<c&&(a=this.width,e=this.height);var f=FOTOMOTO.get(d);f.attr("src",this.src),f.width(a),f.height(e)},e.src=a},FOTOMOTO.renderCountryOptions=function(a){var b="";for(var c=0;c<FOTOMOTO_CONFIG.countries.length;c++)b+='<option value="'+FOTOMOTO_CONFIG.countries[c].sname+'"',FOTOMOTO_CONFIG.countries[c].sname==a&&(b+=" selected"),b+=">"+FOTOMOTO_CONFIG.countries[c].lname+"</option>";return b},FOTOMOTO.Request=new FOTOMOTO.Class,FOTOMOTO.Request.prototype={init:function(a,b){this.options=FOTOMOTO.setOptions({method:"get",parameters:null,onComplete:null,onFailure:null,onTimeout:null,asynchronous:!0,arguments:null,timeOut:30,notCache:!0,showWaiting:!0},b||{}),this.transaction=null,this.url=a,this.waiting=null,this.transaction_id=FOTOMOTO.generate_unique_id(),this.options.notCache&&(this.url=this.url+"&ajaxcachebust="+(new Date).getTime());var c=this.options.onComplete,d=this.options.onFailure;this.options.onComplete=function(a){this.waiting&&(FMJQ(".simplepopup-data .FotomotoLoadingDiv").length>0&&this.waiting.close(),this.waiting=null,FOTOMOTO.WidgetPanel!=null&&FOTOMOTO.WidgetPanel.visible&&FMJQ("fotomoto_cart_details")&&(FMJQ("fotomoto_panel").css({position:"relative"}),FOTOMOTO.centerPanel(),FMJQ("fotomoto_panel").css({position:""}))),clearTimeout(this.timer),c!=null&&FOTOMOTO.loadContentRequest!=null&&FOTOMOTO.loadContentRequest.transaction_id==this.transaction_id&&c({data:this.options.arguments})},this.options.onFailure=function(){this.waiting&&(FMJQ(".simplepopup-data .FotomotoLoadingDiv").length>0&&this.waiting.close(),this.waiting=null),clearTimeout(this.timer),d!=null&&d({data:this.options.arguments})}},getResponse:function(){if(this.options.showWaiting){var a=FOTOMOTO.WidgetPanel!=null&&FOTOMOTO.WidgetPanel.visible?"#fotomotoWidgetContainer":"body";this.waiting=FMJQ.popup('<div id="fotomoto_popup" class="fmClearfix" style="padding-bottom: 0px !important; background-color: #F2F2F2 !important;"><div class="FotomotoLoadingDiv"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/fotomoto_loading.gif" id="fotomoto_loading_image"/></div></div>',{appendTo:"body",containerCss:{width:240},zIndex:1000000014})}FMJQ.ajax({url:this.url,success:this.options.onComplete,error:this.options.onError,dataType:"script",context:this}),this.transaction=!0;var b=this;this.timer=setTimeout(function(){b.handleTimeout()},this.options.timeOut*1e3)},handleTimeout:function(){this.abortRequest(),this.options.onTimeout!=null&&this.options.onTimeout()},abortRequest:function(){if(this.transaction){var a=FMJQ("head script");for(var b=0;b<a.length;b++){var c=a[b];if(c.src==this.url){c.onload=null,c.onreadystatechange=null,FMJQ(c).remove();break}}}this.waiting&&(FMJQ(".simplepopup-data .FotomotoLoadingDiv").length>0&&this.waiting.close(),this.waiting=null),clearTimeout(this.timer),this.transaction=null}},FOTOMOTO.validateImage=function(a,b){var c=!0;for(var d=0;d<FOTOMOTO_CONFIG.image_black_list.length;d++){var e=new RegExp(FOTOMOTO_CONFIG.image_black_list[d]);if(e.test(a.src)){c=!1;break}}return FMJQ(a).hasClass("nofotomoto")?!1:typeof fotomoto_go_mode!="undefined"&&fotomoto_go_mode&&!FMJQ(a).hasClass("gofotomoto")?!1:(b==null&&FOTOMOTO_CONFIG.only_visible&&(c=FOTOMOTO.isVisible(a)),c)},FOTOMOTO.ignoreImage=function(a){if(FOTOMOTO_CONFIG.ignore_box_list.length==0||FOTOMOTO_CONFIG.ignore_box_list[0]=="")return!1;for(var b=0;b<FOTOMOTO_CONFIG.ignore_box_list.length;b++){var c=a,d=FOTOMOTO_CONFIG.ignore_box_list[b].split(" ");if(d.length==0||d[0]=="")return!1;if(c==FMJQ(d[0]).get(0))return!0;c=FMJQ(c);for(var e=0;e<d.length;e++){c=c.parents(d[e]);if(c.length!=1)break}if(c.length==1)return!0}return!1},FOTOMOTO.widgetFrame={init:function(){var a=this;FMJQ(".fm-header ul.fm-tools").show(),FMJQ(".fm-footer").show(),FMJQ(".fm-footer .fm-left-button").show(),FMJQ(".fm-footer .fm-right-button").show(),FMJQ("#fotomotoSmallShopping").click(function(a){FOTOMOTO.Cart.getTotalItems()>0&&FOTOMOTO.Cart.displayCart("")}),a.updateSmallShopping(),FMJQ(".fm-header .fm-tools .fm-option").click(function(b){b.preventDefault(),a.showHeaderOptionsFor(FMJQ(this))}),FMJQ(".fm-tip").tipsy({live:!0,gravity:"s"}),FMJQ(".fm-header .fm-tools .fm-option-list a.fm-close").click(function(a){a.preventDefault(),FMJQ(this).parents(".fm-option-list").hide()}),FMJQ(".fm-header .fm-option-list a").click(function(b){b.preventDefault(),FMJQ(this).hasClass("fm-close")||(FMJQ(this).addClass("fm-selected").parent().siblings().find(".fm-selected").removeClass("fm-selected"),FMJQ(this).parents(".fm-option-list").siblings(".fm-option").html(FMJQ(this).html()+' <span class="fm-arrows fm-inline-block fm-bgcolor-on-hover"></span>'),a.hideOptionList(FMJQ(this).parents(".fm-option-list")),FMJQ(this).parents(".fm-option-list").attr("id")=="fm-currencies"&&a.currencyChanged(FMJQ(this).html()),FMJQ(this).parents(".fm-option-list").attr("id")=="fm-measure-units"&&a.unitChanged(FMJQ(this).html()))}),FMJQ(".fm-products a").click(function(a){a.preventDefault();var b=FMJQ(this).attr("name").replace(/^fm-/,"");FOTOMOTO.loadContent(b)})},showUnavailablePage:function(a){var b='<div class="fm-content fm-cf"><div class="fm-select-product fm-cf"><h3></h3><div class="fm-top-shadow"></div><div class="fm-options"><div class="fm-options-divider fm-cf"><img class="fm-current-image fm-inline-block" src="{{root}}/assets/blank.gif"></div></div><div class="fm-preview"><div class="fm-contact-artist"><div class="fm-not-offered"><span>not offered on:</span><img class="fm-100px-icon fm-{{id_css}}-icon" src="{{root}}/assets/blank.gif"><strong>{{name}}</strong></div><h2> Let the artist know that you are interested in buying this image on {{name}}</h2><form action="javascript:;" class="fm-form"><input id="fotomoto_contact_product" type="hidden" value="{{name}}"><label> You </label><input type="text" id="fotomoto_contact_name" maxlength="50" placeholder="Your Name"><input type="text" id="fotomoto_contact_email" maxlength="50" placeholder="Your Email"><label> Your Personal Message </label><textarea id="fotomoto_contact_message" maxlength="850">I am interested in buying this image on {{name}}. Please let me know when it becomes available.</textarea><a href="javascript:;" class="fm-button fm-block">Send Note to Artist</a></form></div></div></div><div class="fm-footer fm-cf"><a href="javascript:;" class="fm-left-button">Back</a></div></div>',c=FOTOMOTO.Cart.getActiveWidget(),d=function(a){switch(a){case"premium_print":case"print":return"photographic";case"sticky_print":return"wallpeel";case"postcard":return"card";case"license":case"digital_download":return"download";default:return a}};a=d(a);var e=function(a){switch(a){case"photographic":return"Photo Prints";case"fineart":return"Fineart Prints";case"wallpeel":return"Wall Peels";case"canvas":return"Canvas Prints";case"card":return"Cards";case"download":return"Download"}},f=function(a){return a=="wallpeel"?"peel":a},g={root:FOTOMOTO_CONFIG.static_domain,id_css:f(a),name:e(a)};FMJQ(".tipsy").remove(),FMJQ(".fm-content").html(Mustache.render(b,g)),FMJQ(".fm-current-image").attr("src",c.image.src),FMJQ(".fm-select-product h3").html("This image is currently not for sale on "+e(a)),FMJQ(".fm-content .fm-footer .fm-left-button").click(function(){FOTOMOTO.loadContent("buy")}),FMJQ("#fotomotoWidgetContainer input[placeholder], #fotomotoWidgetContainer textarea[placeholder]").placeholder(),FMJQ(".fm-preview .fm-button").click(function(){FOTOMOTO.Contact.sendContactArtist()})},hasNoOptions:function(){return'<div class="fm-message fm-info"> We cannot determine the pricing for this image at this time. Please try again later. </div>'},optionsInit:function(){var a=this;FMJQ(".fm-header ul.fm-tools").show(),FMJQ(".fm-footer").show(),FMJQ(".fm-footer .fm-left-button").show(),FMJQ(".fm-footer .fm-right-button").show(),FMJQ(".fm-tip").tipsy({live:!0,gravity:"s"}),FMJQ(".fm-main-panel a.fm-more").click(function(b){b.preventDefault(),a.showMorePanel()}),FMJQ(".fm-segmented-control a").die().live("click",function(b){return FMJQ(this).hasClass("fm-disabled")||a.selectOptionFromList(FMJQ(this)),!1}),FMJQ(".fm-option-list-item").die("click.option_item").live("click.option_item",function(){return FMJQ(this).hasClass("fm-disabled")?!1:(a.selectOptionFromList(FMJQ(this)),!1)}),FMJQ("a.fm-back-to-main").die().live("click",function(b){return a.showMainPanel(),!1}),FMJQ("a.fm-help-close").click(function(b){b.preventDefault(),FMJQ(".fm-help-link").removeClass("fm-selected"),a.hideHelpPanel()}),FMJQ(".fm-help-link").die().live("click",function(b){return FMJQ(this).hasClass("fm-selected")?(FMJQ(this).removeClass("fm-selected"),a.hideHelpPanel()):(FMJQ(".fm-help-link").removeClass("fm-selected"),FMJQ(this).addClass("fm-selected"),a.showHelpPanel(FMJQ(this).parents(".fm-options-section"))),!1}),FMJQ(".fm-popover a.fm-current-selection").die().live("click",function(a){return FMJQ(".fm-popover .fm-popover-list").hide(),FMJQ(this).parents(".fm-popover").find(".fm-popover-list").show(),FMJQ(this).tipsy("hide"),!1}),FMJQ(".fm-popover-list a.fm-popover-list-item").die().live("click",function(a){return FMJQ(this).hasClass("fm-disabled")||(FMJQ(this).addClass("fm-selected").siblings().removeClass("fm-selected"),FMJQ(this).parents(".fm-popover").find(".fm-current-selection .fm-data").html(FMJQ(this).find(".fm-data").html()),FMJQ(this).parents(".fm-popover").find(".fm-popover-list").fadeOut()),!1}),FMJQ(".fm-popover-list a.fm-close-icon").die().live("click",function(){return FMJQ(this).parents(".fm-popover-list").hide(),!1}),a.updateSmallShopping()},updateSmallShopping:function(){FMJQ("#fotomotoSmallShopping").css("visibility",FOTOMOTO.Cart.getTotalItems()>0&&!FMJQ("#fotomotoContent").hasClass("fm-no-header-cart")?"visible":"hidden"),FMJQ("#fotomotoSmallShopping").html(FOTOMOTO.Cart.numItemStr().replace(/ in your cart$/,""))},currencyChanged:function(a){var b=a;FMJQ(".fotomotoSettingCurrency").html(b),FOTOMOTO.Cart.currency=b,FOTOMOTO.Cart.saveConfig(),FOTOMOTO.Cart.updateExchangeRate(),FOTOMOTO.Cart.warningPostcard(),FOTOMOTO.Cart.convertPrice(),FOTOMOTO.Cart&&FOTOMOTO.Cart.selectPrice&&FOTOMOTO.Cart.selectPrice()},unitChanged:function(a){var b=a;FOTOMOTO.Cart.unit=b,FOTOMOTO.Cart.saveConfig(),FOTOMOTO.Cart.convertUnit()},showHeaderOptionsFor:function(a){FMJQ(".fm-option-list").hide(),a.parent().find(".fm-option-list").show()},hideOptionList:function(a){a.fadeOut()},removeCropObject:function(){var a=["Print","StickyPrint","Canvas"];for(var b in a)FOTOMOTO[a[b]]&&!FMJQ.isPlainObject(FOTOMOTO[a[b]].cropObject)&&(FOTOMOTO[a[b]].cropObject.remove(),FOTOMOTO[a[b]].cropObject={})},showMorePanel:function(){FOTOMOTO.widgetFrame.hideHelpPanel(),FMJQ(".fm-more-panel").show(),FMJQ(".fm-options").animate({scrollLeft:"261px"},300)},showMainPanel:function(){FMJQ(".fm-options").animate({scrollLeft:"0"},300,function(){FMJQ(".fm-more-panel").hide()})},showHelpPanel:function(a){FMJQ(".imgareaselect-selection").length>0&&(FMJQ(".imgareaselect-selection").parent().hide(),FMJQ(".imgareaselect-outer").hide()),FMJQ(".fm-help-panel-stub").html(""),a.find(".fm-help").clone().appendTo(".fm-help-panel-stub"),FMJQ(".fm-help-panel").show()},hideHelpPanel:function(){FMJQ(".fm-help-link").removeClass("fm-selected"),FMJQ(".imgareaselect-selection").length>0&&(FMJQ(".imgareaselect-selection").parent().show(),FMJQ(".imgareaselect-outer").show()),FMJQ(".fm-help-panel").hide()},selectOptionFromList:function(a){a.addClass("fm-selected").siblings().removeClass("fm-selected")},clearSelectionInList:function(a){a.find(".fm-selected").removeClass("fm-selected")}},FOTOMOTO.shoppingCart={init:function(){var a=this;FMJQ(".fm-quantity").numeric(),FMJQ(".fm-remove-item").click(function(b){b.preventDefault(),a.removeItem(FMJQ(this).parents("li").attr("id"))}),FMJQ(".fm-edit-options").click(function(b){b.preventDefault(),a.editOptions(FMJQ(this).parents("li").attr("id"))}),FMJQ(".fm-edit-crop").click(function(b){b.preventDefault(),a.editOptions(FMJQ(this).parents("li").attr("id"))}),FMJQ(".fm-cart-quantity .fm-quantity").change(function(b){b.preventDefault(),a.updateItem(FMJQ(this).parents("li").attr("id"))}),FMJQ(".fm-cart-quantity a").click(function(b){b.preventDefault(),FMJQ(this).hasClass("fm-quantity-decrement")?a.decrementItem(FMJQ(this).parents("li").attr("id")):a.incrementItem(FMJQ(this).parents("li").attr("id"))}),FMJQ(".fm-cart-summary .fm-calculate").click(function(b){b.preventDefault(),FMJQ(this).hasClass("fm-shipping")||FMJQ(this).hasClass("fm-tax")?a.showCustomerLocationFormInLi(FMJQ(this).parents("li")):a.showCouponForm()}),FMJQ("#fm-customer-location-form .fm-submit").die().live("click",function(b){b.preventDefault(),a.customerLocationSubmitted()}),FMJQ("#fm-customer-location-form .fm-cancel").die().live("click",function(b){b.preventDefault(),a.hideCustomerLocationForm()}),FMJQ("#fm-coupon-form .fm-submit"
).click(function(b){b.preventDefault(),a.couponCodeSubmitted()}),FMJQ("#fm-coupon-form .fm-cancel").click(function(b){b.preventDefault(),a.hideCouponForm()}),FMJQ(".fm-scroll-view").each(function(){FMJQ(this).scrollLeft(FMJQ(this).attr("scrollleft")),FMJQ(this).scrollTop(FMJQ(this).attr("scrolltop")),FMJQ(this).removeAttr("scrollleft"),FMJQ(this).removeAttr("scrolltop")}),FMJQ(".fm-cart-image").hover(function(){FMJQ(".fm-mask",this).length>0&&FMJQ(this).find(".fm-edit-crop").show()},function(){FMJQ(this).find(".fm-edit-crop").hide()}),FMJQ("#fotomoto_shipping_country").change(function(){FOTOMOTO.Util.clearMessagesIn(FMJQ(".fm-shipping-method")),FMJQ(".fm-shipping-panel").show()}),FMJQ(".fm-shipping-row").click(function(a){FMJQ(a.target).is("input")||(FMJQ(this).find("input").click(),FMJQ(this).addClass("fm-selected").siblings().removeClass("fm-selected"))}),FMJQ(".fm-cart-items .fm-cf.fm-license, .fm-cart-items .fm-cf.fm-digital_download").each(function(a){FMJQ(".fm-quantity-increment",this).remove(),FMJQ(".fm-quantity-decrement",this).remove(),FMJQ(".fm-quantity",this).attr("readonly",!0),FMJQ(this).hasClass("fm-digital_download")&&FMJQ(".fm-edit-options",this).remove()})},getItemByUniqueId:function(a){for(var b=0;b<FOTOMOTO.Cart.widgets.length;b++){var c=FOTOMOTO.Cart.widgets[b],d=c.getItemByUniqueId(a);if(d!=null)return d}return null},editOptions:function(a){var b=FOTOMOTO.shoppingCart.getItemByUniqueId(a.replace(/^item-/,""));FOTOMOTO[b.collectionObject].customize(b.widget.id,b.unique_id)},removeItem:function(a){var b=FOTOMOTO.shoppingCart.getItemByUniqueId(a.replace(/^item-/,""));FOTOMOTO.Cart.deleteItemOnCart(b.unique_id,b.widget.id)},decrementItem:function(a){FMJQ("#"+a).find(".fm-quantity").attr("value")>1&&FMJQ("#"+a).find(".fm-quantity").attr("value",FMJQ("#"+a).find(".fm-quantity").attr("value")-1);var b=FOTOMOTO.shoppingCart.getItemByUniqueId(a.replace(/^item-/,""));FOTOMOTO.Cart.updateNumItems(b.unique_id,b.widget.id)},incrementItem:function(a){FMJQ("#"+a).find(".fm-quantity").attr("value",parseInt(FMJQ("#"+a).find(".fm-quantity").attr("value"))+1);var b=FOTOMOTO.shoppingCart.getItemByUniqueId(a.replace(/^item-/,""));FOTOMOTO.Cart.updateNumItems(b.unique_id,b.widget.id)},updateItem:function(a){var b=FOTOMOTO.shoppingCart.getItemByUniqueId(a.replace(/^item-/,""));FOTOMOTO.Cart.updateNumItems(b.unique_id,b.widget.id)},updateTotal:function(){},showCustomerLocationFormInLi:function(a){FOTOMOTO.shoppingCart.hideCustomerLocationForm(),FMJQ("#fm-customer-location-form").appendTo(a.find(".fm-hidden-panel")),a.find(".fm-hidden-panel").animate({height:"show"},300),a.find(".fm-calculate").css("visibility","hidden")},hideCustomerLocationForm:function(){FMJQ("#fm-customer-location-form").parent().animate({height:"hide"},300),FMJQ(".fm-calculate").css("visibility","visible")},customerLocationSubmitted:function(){FMJQ("#fm-customer-location-form").parent().animate({height:"hide"},300),FMJQ(".fm-calculate").css("visibility","visible")},showCouponForm:function(){FMJQ("#fm-coupon .fm-calculate").css("visibility","hidden"),FMJQ("#fm-coupon-form").animate({height:"show"},300)},hideCouponForm:function(){FMJQ("#fm-coupon .fm-calculate").css("visibility","visible"),FMJQ("#fm-coupon-form").animate({height:"hide"},300)},couponCodeSubmitted:function(){FOTOMOTO.Util.clearMessagesIn(FMJQ("#fm-coupon")),FMJQ("#fm-coupon").find("fm-message"),FMJQ("#fm-coupon-form").animate({height:"hide"},300),FMJQ("#fm-coupon .fm-calculate").css("visibility","visible")}},FOTOMOTO.Util={showMessageInElement:function(a,b,c,d,e){c=c||"info",d=d||"prepend",e=e||"false";var f='<div class="fm-message fm-'+c+'">'+a+"</div>";e!="false"&&FOTOMOTO.Util.clearMessagesIn(b),d=="prepend"?b.prepend(f):b.append(f)},clearMessagesIn:function(a){a.find(".fm-message").remove()},isLandscape:function(a){return a.w>a.h?!0:!1},isSquare:function(a){return(a.w=a.h)?!0:!1},product_css:function(a){var b="";switch(a){case"print":b="prints";break;case"fineart":b="prints";break;case"canvas":b="canvas";break;case"postcard":b="card";break;case"framed_print":b="framed";break;case"sticky_print":b="poster";break;case"license":b="download";break;case"ecard":b="ecard"}return b},product_name:function(a){var b="";switch(a){case"print":b="Prints";break;case"fineart":b="Prints";break;case"canvas":b="Canvas";break;case"postcard":b="Cards";break;case"framed_print":b="Framed";break;case"sticky_print":b="Poster";break;case"license":b="Download";break;case"ecard":b="eCard"}return b}};var fm_init_timer=null,fm_event_getter=null;!FMJQ.browser.opera&&!FMJQ.browser.webkit&&!FMJQ.browser.msie&&/Gecko/.test(navigator.userAgent)&&!/like Gecko/.test(navigator.userAgent)&&Event.prototype&&(fm_event_getter=Event.prototype.__lookupGetter__("target")),FOTOMOTO.fixEmbedTag=function(){var a=FMJQ("body embed");for(var b=0;b<a.length;b++){var c=a[b];if(c.getAttribute("wmode")!="transparent"||c.getAttribute("wmode")!="opaque"){c.setAttribute("wmode","transparent");var d=FMJQ(c).parents("object"),e=d.innerHTML;d.innerHTML=e}}},FOTOMOTO.startInit=function(){FOTOMOTO_CONFIG.initializing=!0;var a=["/assets/fotomoto_loading.gif","/assets/widget_sprite.png","/assets/blank.gif"];for(var b=0;b<a.length;b++){var c=new Image;c.src=FOTOMOTO_CONFIG.static_domain+a[b]}if(!document.body)return;!FOTOMOTO.apiMode()&&!FOTOMOTO.manualMode()&&FOTOMOTO.runInit()},FOTOMOTO.onImageSourceChanged=function(){for(var a=0;a<FOTOMOTO.Cart.widgets.length;a++)FOTOMOTO.Cart.widgets[a].image_ref==this&&FMJQ(FOTOMOTO.Cart.widgets[a].toolbar).remove();FOTOMOTO.getElementWidth(this)==0?window.setTimeout(function(){FOTOMOTO.runInit2(this,null)},1e3):FOTOMOTO.runInit2(this,null)},FOTOMOTO.runInit2=function(a,b,c){var d=FOTOMOTO.getElementWidth(a),e=FOTOMOTO.getElementHeight(a);if(d<FOTOMOTO_CONFIG.image_width||e<FOTOMOTO_CONFIG.image_height)return;if(FOTOMOTO.ignoreImage(a))return;if(!FOTOMOTO.validateImage(a,!0))return;var f=null;for(var g=0;g<FOTOMOTO.Cart.widgets.length;g++)if(FOTOMOTO.Cart.widgets[g].image_ref==a&&FOTOMOTO.Cart.widgets[g].image.src!=a.src){FOTOMOTO.Cart.widgets[g].toolbar&&(f=FMJQ(FOTOMOTO.Cart.widgets[g].toolbar.id).get(0));break}var h=!1;for(var i=0;i<FOTOMOTO.Cart.widgets.length;i++)if(FOTOMOTO.Cart.widgets[i].image.src==a.src){if(c&&FOTOMOTO.Cart.widgets[i].image_ref.parentNode!=a.parentNode)continue;if(f){FOTOMOTO.Cart.widgets[i].image_ref==null&&(FOTOMOTO.Cart.widgets[i].image_ref=a,FOTOMOTO.Cart.widgets[i].cloneImage());if(FOTOMOTO.Cart.widgets[i].bar_id==null||FOTOMOTO.Cart.widgets[i].bar_id=="")FOTOMOTO.Cart.widgets[i].bar_id="FotomotoToolbar_"+FOTOMOTO.Cart.widgets[i].id;f.innerHTML="",f.id=FOTOMOTO.Cart.widgets[i].bar_id,FOTOMOTO.Cart.widgets[i].refreshToolbar()}else FOTOMOTO.Cart.widgets[i].reAddToolbar(a,b);h=!0;break}if(h)return;var j=FOTOMOTO.Cart.widgets.length,k="FotomotoToolbar_"+a.id;f&&(f.id=k),FOTOMOTO.Cart.addWidget(new FOTOMOTO.WidgetBar(a,k,"Fotomoto_"+j,b))},FOTOMOTO.runInit=function(){if(FOTOMOTO.toolbarOff())return;var a=FMJQ("img").filter(function(a){return FOTOMOTO.validateImage(this)});for(var b=0;b<a.length;b++){var c=a[b],d=FOTOMOTO.getElementWidth(c),e=FOTOMOTO.getElementHeight(c);if(d>=FOTOMOTO_CONFIG.image_width&&e>=FOTOMOTO_CONFIG.image_height){if(FOTOMOTO.ignoreImage(c))continue;if(FOTOMOTO_CONFIG.read_image_tag){var f=!1;for(var g=0;g<FOTOMOTO.Cart.widgets.length;g++)if(FOTOMOTO.Cart.widgets[g].image.src==c.src){f=!0;break}}var f=!1;for(var g=0;g<FOTOMOTO.Cart.widgets.length;g++)if(FOTOMOTO.Cart.widgets[g].image_ref==c&&FOTOMOTO.Cart.widgets[g].image.src==c.src){f=!0;break}if(!f)if(FOTOMOTO.Cart.fixedToolbar()){var h=new FOTOMOTO.WidgetBar(null,"","");FOTOMOTO.Cart.addWidget(h),h.setImage(c)}else{var i=FOTOMOTO.Cart.widgets.length;FOTOMOTO_CONFIG.watch_image==1&&FMJQ(window).bind("load",{image:c},function(a){a.data.image.onload=FOTOMOTO.onImageSourceChanged}),FOTOMOTO.Cart.addWidget(new FOTOMOTO.WidgetBar(c,"FotomotoToolbar_"+c.id,"Fotomoto_"+i))}}}FOTOMOTO_CONFIG.initializing&&(fm_init_timer=setTimeout(function(){FOTOMOTO.runInit()},500))},FOTOMOTO.stopInit=function(){!FOTOMOTO.apiMode()&&!FOTOMOTO.manualMode()&&FOTOMOTO.runInit();if(FOTOMOTO.toolbarOff())return;if(!FOTOMOTO_CONFIG.initializing)return;fm_event_getter!=null&&Event.prototype&&Event.prototype.__defineGetter__("target",fm_event_getter),FOTOMOTO_CONFIG.initializing=!1,fm_init_timer&&clearTimeout(fm_init_timer);var a="fotomoto_cart_skey_"+FOTOMOTO_CONFIG.app_widget_id,b=FMJQ.cookie(a);if(!b){var c=new Date;c.setHours(c.getHours()+2),FMJQ.cookie(a,FOTOMOTO_CONFIG.session_key,{path:"/",expires:c})}else FOTOMOTO_CONFIG.session_key=b;FOTOMOTO.POST=new FOTOMOTO.Post,FOTOMOTO.Cart.loadFromCookie(),FOTOMOTO.Cart.addViewCart(),FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO.WidgetBar.createFixedToolbar(),FOTOMOTO_CONFIG.prod_env&&FMJQ("body").append('<iframe id="fm_analytic_frame" width="0" height="0" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://www.fotomoto.com/analytics/toolbar.html" style="width:1px !important;height:1px !important;position:absolute !important;visibility:hidden !important;z-index:10000000 !important;top:-10000px !important;left:-10000px !important;"></iframe>'),FMJQ("#fotomotoWidgetContainer").remove();var d='<div id="fotomotoWidgetContainer" style="display:none;">';d+='<div id="fotomotoWidget">',d+='<div class="fm-widget-box"> <div class="fm-header fm-cf"> <img class="fm-logo" src="'+FOTOMOTO_CONFIG.static_domain+'/assets/logo-fotomoto.png"> <a href="javascript:;" class="fm-close fm-ir fotomotoCloseLink">Close</a> <ul class="fm-tools fm-cf"> <li> <span class="fm-label fm-inline-block"> Currency </span> <a href="javascript:;" class="fm-option fm-color-on-hover fm-inline-block"> {{selected_currency}} <span class="fm-arrows fm-inline-block fm-bgcolor-on-hover"></span> </a> <ul id="fm-currencies" class="fm-option-list fm-cf" style="display: none;"> <li class="fm-tail"></li> {{#currencies}} {{&currency_li}} {{/currencies}} <li><a href="javascript:;" class="fm-close fm-ir"><span>close</span></a></li> </ul> </li> <li> <span class="fm-label fm-inline-block"> Unit </span> <a href="javascript:;" class="fm-option fm-color-on-hover fm-inline-block"> {{selected_unit}} <span class="fm-arrows fm-inline-block fm-bgcolor-on-hover"></span> </a> <ul id="fm-measure-units" class="fm-option-list fm-cf" style="display: none;"> <li class="fm-tail"></li> {{#units}} {{&unit_li}} {{/units}}<li><a href="javascript:;" class="fm-close fm-ir"><span>close</span></a></li> </ul> </li> </ul> <a id="fotomotoSmallShopping" href="javascript:;" class="fm-shopping-cart fm-color-on-hover"></a> </div> <div class="fm-products"><ul class="fm-cf fm-inline-block">{{#products}}<li><em class="fm-l"></em><a href="javascript:;" class="fm-{{product_css}}" name="fm-{{product}}"><span class="fm-inline-block"></span>{{product_name}} </a><em class="fm-r"></em></li>{{/products}}</ul></div> <div id="fotomotoContent" class="fm-content fm-cf fm-cart"></div> <div class="fm-footer fm-cf"> <a href="javascript:;" class="fm-right-button fm-bgcolor-gradient fm-textshadow"></a> <a href="javascript:;" class="fm-left-button"></a> <div class="fm-footer-content"> </div> </div> </div>',d+="</div></div>";var e={selected_currency:FOTOMOTO.Cart.currency,currencies:FMJQ.map(FOTOMOTO_CONFIG.currencies,function(a){return{id:a.id}}),currency_li:function(){return FOTOMOTO.Cart.currency==this.id?'<li><a href="javascript:;" class="fm-selected">'+this.id+"</a></li>":'<li><a href="javascript:;">'+this.id+"</a></li>"},selected_unit:FOTOMOTO.Cart.unit,units:[{id:"in"},{id:"cm"}],unit_li:function(){return FOTOMOTO.Cart.unit==this.id?'<li><a href="javascript:;" class="fm-selected">'+this.id+"</a></li>":'<li><a href="javascript:;">'+this.id+"</a></li>"},products:FMJQ.map(["print","sticky_print","framed_print","canvas","postcard","license","ecard"],function(a){return{product:a,product_css:FOTOMOTO.Util.product_css(a),product_name:FOTOMOTO.Util.product_name(a)}})};d=Mustache.render(d,e),FMJQ(document.body).append(d),FMJQ.onContentReady("fotomotoWidgetContainer",function(){FOTOMOTO.widgetFrame.init()})},FOTOMOTO.externalShare=function(a){var b=encodeURIComponent(window.location.href);FOTOMOTO.API.share_page_url!=""&&(b=encodeURIComponent(FOTOMOTO.API.share_page_url));var c=encodeURIComponent(document.title),d=encodeURIComponent(FOTOMOTO.Cart.getActiveWidget().image.src);switch(a){case"fm_facebook":window.open("http://www.facebook.com/sharer.php?u="+b+"&t="+c,"FM_Sharer","toolbar=0,status=0,width=640,height=440");break;case"fm_twitter":window.open("http://twitter.com/home?status="+c+"%20-%20"+b,"FM_Sharer","toolbar=0,status=0,width=795,height=436");break;case"fm_buzz":FOTOMOTO.showMessage("Google Buzz is not supported anymore!");break;case"fm_digg":window.open("http://digg.com/submit?phase=2&url="+b+"&title="+c+"&media=news&topic=arts_culture");break;case"fm_gplus":window.open("https://plusone.google.com/_/+1/confirm?url="+b+"&title="+c,"FM_Sharer","toolbar=0,status=0,width=700,height=436");break;case"fm_pin":window.open("http://pinterest.com/pin/create/bookmarklet/?media="+d+"&url="+b+"&title="+c,"FM_Sharer","toolbar=0,status=0,width=640,height=440");break;default:FOTOMOTO.showMessage("This platform is not supported!")}FMJQ.getScript(FOTOMOTO_CONFIG.script_domain+"/cart/update_sharing_stat?image="+encodeURIComponent(FOTOMOTO.Cart.getActiveWidget().image.src)+"&platform="+a+"&store_id="+FOTOMOTO_CONFIG.app_widget_id)},FOTOMOTO.isVisible=function(a){return FMJQ(a).css("visibility")=="hidden"||FMJQ(a).css("display")=="none"?!1:FMJQ.expr.filters.visible(a)},FOTOMOTO.getRegion=function(a){try{a=FMJQ(a);var b=a.offset();return b==null?null:{top:parseInt(b.top),right:parseInt(b.left+a.width()),bottom:parseInt(b.top+a.height()),left:parseInt(b.left),width:parseInt(a.width()),height:parseInt(a.height())}}catch(c){return null}},FOTOMOTO.getElementWidth=function(a){var b=FOTOMOTO.getRegion(a);return b?b.width:a.width?a.width:null},FOTOMOTO.getElementHeight=function(a){var b=FOTOMOTO.getRegion(a);return!b&&a.height?a.height:b.height},FOTOMOTO.getImages=function(){return FMJQ("img").filter(function(a){var b=FOTOMOTO.getElementWidth(this),c=FOTOMOTO.getElementHeight(this);return this.src.indexOf(FOTOMOTO_CONFIG.image_domain)>=0&&b>=FOTOMOTO_CONFIG.image_width&&c>=FOTOMOTO_CONFIG.image_height?!0:!1})},FOTOMOTO.getForStore=function(a,b){b==null&&(b="for_store");if(a.className==null)return"";var c=a.className.split(" ");for(var d=0;d<c.length;d++)if(/^ftmt_id_/.test(FMJQ.trim(c[d])))return b+"="+c[d].replace(/^ftmt_id_/,"");return""},FOTOMOTO.WidgetPanelClass=new FOTOMOTO.Class,FOTOMOTO.WidgetPanelClass.prototype={init:function(){this.visible=!1},center:function(){},show:function(){typeof FOTOMOTOPANEL_beforeShow!="undefined"&&FOTOMOTOPANEL_beforeShow(),this.panel||(this.panel=FMJQ("#fotomotoWidgetContainer").modal({containerCss:{width:790,height:455},overlayCss:{backgroundColor:"#000"},closeClass:"fotomotoCloseLink",onClose:FOTOMOTO.closePanel,zIndex:1e5,focus:!1,escClose:!1,persist:!0})),this.visible=!0},checkMainMenu:function(){var a=FOTOMOTO.Cart.getActiveWidget(),b=a.button_status;b||(b={card_offered:!0,license_offered:!0,premium_offered:!0,ecard_offered:!0}),FMJQ(".fm-products .fm-prints").parent().toggle(b.premium_offered||b.fineart_offered),FMJQ(".fm-products .fm-poster").parent().toggle(b.sticky_print_offered),FMJQ(".fm-products .fm-framed").parent().toggle(b.framed_print_offered),FMJQ(".fm-products .fm-canvas").parent().toggle(b.canvas_offered),FMJQ(".fm-products .fm-card").parent().toggle(b.card_offered),FMJQ(".fm-products .fm-download").parent().toggle(b.license_offered),FMJQ(".fm-products .fm-ecard").parent().toggle(b.ecard_offered),FMJQ(".fm-products li").removeClass("fm-selected");switch(a.currentScreen){case"premium_print":case"print":FMJQ(".fm-products .fm-prints").parents("li").addClass("fm-selected");break;case"fineart":FMJQ(".fm-products .fm-prints").parents("li").addClass("fm-selected");break;case"sticky_print":FMJQ(".fm-products .fm-poster").parents("li").addClass("fm-selected");break;case"framed_print":FMJQ(".fm-products .fm-framed").parents("li").addClass("fm-selected");break;case"canvas":FMJQ(".fm-products .fm-canvas").parents("li").addClass("fm-selected");break;case"postcard":FMJQ(".fm-products .fm-card").parents("li").addClass("fm-selected");break;case"license":FMJQ(".fm-products .fm-download").parents("li").addClass("fm-selected");break;case"digital_download":FMJQ(".fm-products .fm-download").parents("li").addClass("fm-selected");break;case"ecard":FMJQ(".fm-products .fm-ecard").parents("li").addClass("fm-selected")}},hideContent:function(){FMJQ("#fotomotoContent").css({position:"absolute",top:-1e3,left:-1e3}),FMJQ.popup('<div id="fotomoto_popup" class="fmClearfix" style="padding-bottom: 0px !important; background-color: #F2F2F2 !important;"><div class="FotomotoLoadingDiv"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/fotomoto_loading.gif" id="fotomoto_loading_image"/></div></div>',{appendTo:"body",containerCss:{width:240},zIndex:10000004})},showContent:function(){FMJQ.popup.close(),FMJQ("#fotomotoContent").css({position:"",top:"",left:""})},hide:function(){this.visible=!1,this.panel&&(this.panel.close(),FMJQ.popup.close(),this.panel=null),FOTOMOTO.WidgetPanel=null},setWidth:function(a){}},FOTOMOTO.WidgetPanel=null,FOTOMOTO.createWidgetPanel=function(){FOTOMOTO.WidgetPanel||(FOTOMOTO.WidgetPanel=new FOTOMOTO.WidgetPanelClass)},FOTOMOTO.loadContentRequest=null,FOTOMOTO.loadContent=function(a,b,c,d){if(FOTOMOTO_CONFIG.initializing){new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,"Please wait until the page is finished loading.");return}if(FOTOMOTO.isIE6()){FOTOMOTO.showMessage("Fotomoto does not support IE6 anymore. Please try a different browser.",null,{width:340,height:200});return}if(b==null||typeof b=="undefined")b=FOTOMOTO.Cart.getActiveWidget();if(b.button_status==null){FMJQ.popup('<div id="fotomoto_popup" class="fmClearfix" style="padding-bottom: 0px !important; background-color: #F2F2F2 !important;"><div class="FotomotoLoadingDiv"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/fotomoto_loading.gif" id="fotomoto_loading_image"/></div></div>',{appendTo:"body",containerCss:{width:240},zIndex:10000004}),b.availabilityChecked||b.checkImageAvailability(),setTimeout(function(){FOTOMOTO.loadContent(a,b,c,d)},150);return}FMJQ.popup.close(),FOTOMOTO.createWidgetPanel(),/\.html$/.test(a)&&(a=a.replace(/\.html$/,"")),a=b.pageToLoad(a),b.currentScreen=a;if(FOTOMOTO.REGISTER.isGeneralScreen(b.currentScreen)){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen);if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}a="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/"+a+"/"+b.id+"/?image_url="+encodeURIComponent(b.image.src),b.for_store!=""?a+="&for_store="+b.for_store:a+="&"+FOTOMOTO.getForStore(b.image_ref),a+="&page_url="+encodeURIComponent(window.location.href),FOTOMOTO.Cart.isMultiPhotos()&&(a+="&multi="),a+="&cachebursted="+(new Date).getTime(),FOTOMOTO.REGISTER.moduleAdded(b.currentScreen)||(a+="&with_module=1");if(!FOTOMOTO.REGISTER.viewCached(b.currentScreen+"_view"))a+="&with_view=1";else{if(b.currentScreen=="print")if(b.fotomoto_prints.length>0||b.fotomoto_finearts.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}if(b.currentScreen=="sticky_print"&&b.fotomoto_sticky_prints.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}if(b.currentScreen=="postcard"&&b.fotomoto_postcards.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}if(b.currentScreen=="license"&&b.fotomoto_licenses.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}if(b.currentScreen=="digital_download"&&b.fotomoto_digital_downloads.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}if(b.currentScreen=="canvas"&&b.fotomoto_canvases.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}if(b.currentScreen=="framed_print"&&b.fotomoto_framed_prints.length>0){var e=FOTOMOTO.REGISTER.getGeneralCache(b.currentScreen+"_view");if(e!=""){FOTOMOTO.setView(b.id,e,b.currentScreen);return}}}d!=null&&(a+="&"+d),FOTOMOTO.loadContentRequest&&FOTOMOTO.loadContentRequest.abortRequest();var f=FOTOMOTO_CONFIG.script_domain;c&&(f=FOTOMOTO_CONFIG.posted_domain),FOTOMOTO.loadContentRequest=new FOTOMOTO.Request(f+"/"+a,{asynchronous:!0,method:"get",arguments:{widget_id:b.id,screen:b.currentScreen},onComplete:function(a){FOTOMOTO.setView(a.data.widget_id,fm_data,a.data.screen),FOTOMOTO.loadContentRequest=null},onTimeout:function(){new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,FOTOMOTO_CONFIG.texts.timeout),FOTOMOTO.loadContentRequest=null},onFailure:function(a){/aborted$/.test(a.msg)||new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,"Server Error! Please try again later."),FOTOMOTO.loadContentRequest=null}}),FOTOMOTO.loadContentRequest.getResponse()},FOTOMOTO.showFotomotoPage=function(a,b){var c=null;b==null||typeof b=="undefined"?c=FOTOMOTO.Cart.getActiveWidget():c=FOTOMOTO.Cart.openWidget(b),FOTOMOTO.showFotomotoPageByWidget(a,c)},FOTOMOTO.closePanel=function(){FOTOMOTO.Cart.getActiveWidget().skip_cookie||FOTOMOTO.Cart.saveToCookie(),FOTOMOTO.Cart.getActiveWidget().skip_cookie=!1,FOTOMOTO.Cart.scrollTheCart(),FOTOMOTO.Cart.updateViewCartTotalItems();var a=FOTOMOTO.Cart.getActiveWidget();FOTOMOTO.showFotomotoPage(!1)},FOTOMOTO.showFotomotoPageByWidget=function(a,b){a?b.getWidgetContent().showPanel():b.getWidgetContent().hidePanel()},FOTOMOTO.centerPanel=function(){FOTOMOTO.Cart.getActiveWidget().getWidgetContent().centerPanel()},FOTOMOTO.setView=function(a,b,c){c&&FOTOMOTO.REGISTER.isGeneralScreen(c)&&FOTOMOTO.REGISTER.addGeneralCache(c,b,!0),FOTOMOTO.widgetFrame.removeCropObject(),FMJQ.isPlainObject(b)&&(b.view!=""?FOTOMOTO.REGISTER.addGeneralCache(c+"_view",b.view):b.view=FOTOMOTO.REGISTER.getGeneralCache(c+"_view"),b=b.init_s+b.view),c=="checkout"&&FMJQ("#fotomotoContent").attr("class","fm-content fm-cf fm-cart"),c=="buy"&&(FMJQ(".fm-widget-box .fm-footer").hide(),FOTOMOTO.WidgetPanel.hideContent()),(c=="postcard"||c=="card")&&FOTOMOTO.WidgetPanel.hideContent(),c=="print"&&FOTOMOTO.WidgetPanel.hideContent(),(c=="premium_print"||c=="fineart"||c=="canvas")&&FOTOMOTO.WidgetPanel.hideContent(),c=="sticky_print"&&FOTOMOTO.WidgetPanel.hideContent(),c=="license"&&FOTOMOTO.WidgetPanel.hideContent(),c=="ecard"&&FOTOMOTO.WidgetPanel.hideContent(),c=="framed_print"&&FOTOMOTO.WidgetPanel.hideContent(),(c=="shipping_method"||c=="shipping_address"||c=="reviewPayment")&&FMJQ("#fotomotoContent");var d=FOTOMOTO.Cart.openWidget(a);d.getWidgetContent().setContent(b),c=="buy"||c=="checkout"||c=="shipping_address"||c=="select_photo"?(FMJQ("#fotomotoContent").addClass("fm-no-header-cart"),FMJQ(".fm-products").hide()):(FOTOMOTO.WidgetPanel.checkMainMenu(),FMJQ("#fotomotoContent").removeClass("fm-no-header-cart"),FMJQ(".fm-products").show()),d.getWidgetContent().centerPanel(),FOTOMOTO.Cart.licensesOnly()&&FOTOMOTO.Cart.updateStepsBar(),FOTOMOTO.BUYER.initLoginPanel(),d.updateFavorite(d.photo_favored),FOTOMOTO.Cart.convertPrice(),FOTOMOTO.Cart.convertUnit(),FOTOMOTO.showFotomotoPage(!0,d.id)},FOTOMOTO.bindScripts=function(data){var matchAll=new RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:</script>)","img"),matchOne=new RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:</script>)","im");matches=data.match(matchAll)||[];for(var i=0;i<matches.length;i++)eval((matches[i].match(matchOne)||["",""])[1])},FOTOMOTO.getUTCTime=function(){var a=new Date;return a.getTime()+a.getTimezoneOffset()*6e4},FOTOMOTO.isMySiblingAnImage=function(a){var b=FMJQ(a).next("img").get(0);return b!=null?!0:(b=FMJQ(a).prev("img").get(0),b!=null?!0:!1)},FOTOMOTO.toolbarInsertPostion=function(a,b){if(a=="1")return b;var c=b;do{var d=FMJQ(c).next().get(0);if(d==null||d.tagName.toLowerCase()=="img"){if(d==null){var e=document.createTextNode("");return c.parentNode.appendChild(e),e}return c}c=d}while(!0);return b},FOTOMOTO.toggleBox=function(a){FOTOMOTO.get(a).css("display",FOTOMOTO.get(a).css("display")=="block"?"none":"block")},FOTOMOTO.getSelectedOption=function(a){var b=FOTOMOTO.get(a).get(0);return b.options[b.selectedIndex]},FOTOMOTO.setSelectedOption=function(a,b){var c=FOTOMOTO.get(a).get(0);for(var d=0;d<c.options.length;d++)if(c.options[d].value==b){c.selectedIndex=d;break}},FOTOMOTO.getItemByListAndId=function(a,b){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c];return null},FOTOMOTO.testPhoneNumber=function(a){return/^[0-9\s-#()]*$/.test(a)},FOTOMOTO.testEmail=function(a){return/^([a-zA-Z0-9+_.-])+@([a-zA-Z0-9])+([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+$/.test(a)&&!/\.{2,}/.test(a)},FOTOMOTO.testZipcode=function(a){return/^\d{5}$/.test(a)},FOTOMOTO.testBlank=function(a){return/^(\s|\t)*$/.test(a)},FOTOMOTO.setFieldError=function(a,b){return b?FOTOMOTO.get(a).addClass("fm-error"):FOTOMOTO.get(a).removeClass("fm-error"),b},FOTOMOTO.Popup=new FOTOMOTO.Class,FOTOMOTO.Popup.prototype={init:function(a,b,c,d,e){e==null&&(e={width:"auto"}),FMJQ.popup('<div id="fotomoto_popup" class="fmClearfix"><div class="fm_header"><span>'+b+'</span></div><p class="fm_message">'+c+'</p><div class="fm_buttons fmClearfix"><div class="no simplepopup-close">Close</div>',{appendTo:FOTOMOTO.get(a),containerCss:e,zIndex:10000004,onClose:function(a){d!=null&&d(),FMJQ.popup.close()}})}},FOTOMOTO.showMessage=function(a,b,c){FMJQ.popup.close(),new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,a,b,c)},FOTOMOTO.getWidgetByElementInBar=function(a){var b=FMJQ(a).parents(".FotomotoToolbarClass").get(0),c=b.id.replace(/^FotomotoToolbar_/,"").replace(/_/,"-");return FOTOMOTO.Cart.getWidget(c)},FOTOMOTO.CropWindow=new FOTOMOTO.Class,FOTOMOTO.CropWindow.prototype={init:function(){this.mouseX=0,this.mouseY=0,this.divID="",this.saveCropPoint=null,this.currentPos={x:null,y:null,w:null,h:null}},enable:function(){this.mouseUp()},disable:function(){FOTOMOTO.get(this.divID).get(0).scrollLeft=0,FOTOMOTO.get(this.divID).get(0).scrollTop=0,FOTOMOTO.get(this.divID).unbind("mousemove",this.mouseMove),FOTOMOTO.get(this.divID).unbind("mouseup",this.mouseUp),FOTOMOTO.get(this.divID).unbind("mouseout",this.mouseUp),FOTOMOTO.get(this.divID).unbind("mousedown",this.mouseDown)},reset:function(a,b,c){this.divID=a,this.mouseX=b,this.mouseY=c,this.maxX=FMJQ("#"+this.divID+" img").width()-FMJQ("#"+this.divID).width(),this.maxY=FMJQ("#"+this.divID+" img").height()-FMJQ("#"+this.divID).height(),this.currentPos={x:b,y:c,w:FOTOMOTO.get(this.divID).width(),h:FOTOMOTO.get(this.divID).height()},FOTOMOTO.get(this.divID).get(0).scrollLeft=this.getX(b),FOTOMOTO.get(this.divID).get(0).scrollTop=this.getY(c),this.mouseUp()},windowChanged:function(){return this.divID==""?!0:FOTOMOTO.get(this.divID).is(":visible")?this.currentPos.w!=FOTOMOTO.get(this.divID).width()||this.currentPos.h!=FOTOMOTO.get(this.divID).height():!1},getX:function(a){return a<=this.maxX?a:this.maxX},getY:function(a){return a<=this.maxY?a:this.maxY},setSaveCropPoint:function(a){this.saveCropPoint=a},mouseDown:function(a){a.stopPropagation(),a.preventDefault(),this.mouseX=a.pageX,this.mouseY=a.pageY,FOTOMOTO.get(this.divID).unbind("mousemove",this.mouseMove),FOTOMOTO.get(this.divID).bind("mousemove",FMJQ.proxy(this.mouseMove,this)),FOTOMOTO.get(this.divID).unbind("mouseup",this.mouseUp),FOTOMOTO.get(this.divID).bind("mouseup",FMJQ.proxy(this.mouseUp,this)),FOTOMOTO.get(this.divID).unbind("mouseout",this.mouseUp),FOTOMOTO.get(this.divID).bind("mouseout",FMJQ.proxy(this.mouseUp,this)),FOTOMOTO.get(this.divID).unbind("mousedown",this.mouseDown)},mouseUp:function(a){FOTOMOTO.get(this.divID).unbind("mousemove",this.mouseMove),FOTOMOTO.get(this.divID).unbind("mouseup",this.mouseUp),FOTOMOTO.get(this.divID).unbind("mouseout",this.mouseUp),FOTOMOTO.get(this.divID).unbind("mousedown",this.mouseDown),FOTOMOTO.get(this.divID).bind("mousedown",FMJQ.proxy(this.mouseDown,this)),a!=null&&this.saveCropPoint!=null&&this.saveCropPoint(),this.currentPos.x=FOTOMOTO.get(this.divID).get(0).scrollLeft,this.currentPos.y=FOTOMOTO.get(this.divID).get(0).scrollTop},mouseMove:function(a){a.stopPropagation(),a.preventDefault();var b=a.pageX,c=a.pageY,d=b-this.mouseX,e=c-this.mouseY,f=FOTOMOTO.get(this.divID).get(0).scrollLeft-d,g=FOTOMOTO.get(this.divID).get(0).scrollTop-e;FOTOMOTO.get(this.divID).get(0).scrollLeft=this.getX(f),FOTOMOTO.get(this.divID).get(0).scrollTop=this.getY(g),this.mouseX=b,this.mouseY=c},windowVisible:function(){return FOTOMOTO.isVisible(FOTOMOTO.get(this.divID).get(0))},getPosition:function(){return this.currentPos}};var FOTOMOTOCropWindow=new FOTOMOTO.CropWindow;FOTOMOTO.generate_unique_id=function(){return(new FMUUID).id.replace(/-/g,"_")},FOTOMOTO.selectRow=function(a,b){var c=FMJQ("input:radio",b);c.length>0&&!c[0].disabled&&(c[0].checked=!0,c.triggerHandler("click"))},FOTOMOTO.apiMode=function(){return FOTOMOTO.API.apiMode()},FOTOMOTO.manualMode=function(){if(typeof fotomoto_manual_mode=="undefined"&&typeof fotomoto=="string"){var a=FOTOMOTO.relEntries(fotomoto);if(a.toolbar=="manual")return!0}return typeof fotomoto_manual_mode!="undefined"&&fotomoto_manual_mode},FOTOMOTO.addPhoto=function(a){return FOTOMOTO.API.addPhoto(a)},FOTOMOTO.getWidget=function(a){return FOTOMOTO.Cart.getWidget(a)},FOTOMOTO.API={},FOTOMOTO.Api=FOTOMOTO.API,FOTOMOTO.API.BUY=10,FOTOMOTO.API.PRINT=100,FOTOMOTO.API.ECARD=200,FOTOMOTO.API.FACEBOOK=201,FOTOMOTO.API.TWITTER=202,FOTOMOTO.API.DIGG=203,FOTOMOTO.API.BUZZ=204,FOTOMOTO.API.GPLUS=205,FOTOMOTO.API.PIN=206,FOTOMOTO.API.CARD=300,FOTOMOTO.API.FILE=400,FOTOMOTO.API.SHARE=500,FOTOMOTO.API.MENU_ALL=1,FOTOMOTO.API.MENU_BUY=2,FOTOMOTO.API.MENU_SHARE=3,FOTOMOTO.API.POSITION={},FOTOMOTO.API.POSITION.ABOVE=0,FOTOMOTO.API.POSITION.BELOW=1,FOTOMOTO.API.share_page_url="",FOTOMOTO.API.tmp_callbacks={n0p:function(){}},FOTOMOTO.API.MODE=!1,FOTOMOTO.API.login=function(){var a='<div id="fotomotoWidget"><div class="fm-widget-box fm-login"><div class="fm-header fm-cf"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/logo-fotomoto.png" class="fm-logo"/><a class="fm-close fm-ir" href="javascript:;" onclick="FMJQ.popup.close();">Close</a></div><div class="fm-content fm-cf fm-frame"><iframe id="fm-login-frame" name="fm-login-frame" width="100%" height="height:100%" src="'+FOTOMOTO_CONFIG.gallery_domain+"/login?iframe="+encodeURIComponent(window.location.href)+'" frameborder="0" border="0"></iframe></div></div></div>';FMJQ.popup(a,{appendTo:document.body,containerCss:{width:545,height:260},zIndex:10000004}),FMJQ.receiveMessage(function(a){if(a.data=="close_popup"){FMJQ.popup.close();return}if(a.data!="logged_in"){var b={};try{b=FMJQ.parseJSON(a.data)}catch(a){}FMJQ.popup.close()}},FOTOMOTO_CONFIG.gallery_domain)},FOTOMOTO.API.getImageNode=function(a){var b=new Image,c=FOTOMOTO.get(a).get(0);if(c!=null){var d=FOTOMOTO.getRelEntry(c,"ftmt_img");d!=null?b.src=d:b.src=c.src}else b.src=a;return[b,c]},FOTOMOTO.API.urls=function(a,b){var c=[];for(var d in b)c.push(d+"="+b[d]);c.push("page_url="+encodeURIComponent(window.location.href)),c=c.join("&");switch(a){case"photo_checkin":return FOTOMOTO_CONFIG.script_domain+"/stores/photo_checkin/?"+c;case"photo_products":return FOTOMOTO_CONFIG.script_domain+"/stores/photo_products/?store_key="+FOTOMOTO_CONFIG.app_widget_id+"&"+c;case"image_sizes":return FOTOMOTO_CONFIG.script_domain+"/stores/image_sizes/?store_key="+FOTOMOTO_CONFIG.app_widget_id+"&"+c;case"store_id":return FOTOMOTO_CONFIG.script_domain+"/stores/store_info/?act=store_id&"+c;case"store_products":return FOTOMOTO_CONFIG.script_domain+"/stores/store_info/?act=store_products&"+c;case"store_captions":return FOTOMOTO_CONFIG.script_domain+"/stores/store_info/?act=store_captions&"+c;case"default_products":return FOTOMOTO_CONFIG.script_domain+"/stores/store_info/?act=default_products&"+c;case"toolbar_links":return FOTOMOTO_CONFIG.script_domain+"/stores/toolbar_links/?&"+c}return""},FOTOMOTO.API.setApiMode=function(a){a==null&&(a=!1),FOTOMOTO.API.MODE=a,typeof fotomoto_api_mode!="undefined"&&(fotomoto_api_mode=a)},FOTOMOTO.API.setSharePageUrl=function(a){if(!FOTOMOTO.API.apiMode()){alert("The widget is not in API Mode.");return}FOTOMOTO.API.share_page_url=a},FOTOMOTO.API.registerCallback=function(a){switch(typeof a){case"undefined":return"FOTOMOTO.API.tmp_callbacks.n0p";case"string":return a;case"function":var b=FOTOMOTO.generate_unique_id();return FOTOMOTO.API
.tmp_callbacks[b]=a,"FOTOMOTO.API.tmp_callbacks."+b}},FOTOMOTO.API.checkinImage=function(a,b,c,d){if(!FOTOMOTO.API.apiMode()){alert("The widget is not in API Mode.");return}var e=function(a){if(a!=null){var b=FOTOMOTO.getRelEntry(a,"ftmt_img");b!=null&&(a=new Image,a.src=b)}var e={img:encodeURIComponent(a.src),callback:f,store_key:c||FOTOMOTO_CONFIG.app_widget_id};d!=null&&(e.for_store=d),a!=null&&FMJQ.getScript(FOTOMOTO.API.urls("photo_checkin",e))},f=FOTOMOTO.API.registerCallback(b),g=FMJQ(a);g.length<1&&(g=FMJQ("#"+a));if(g.length<1){var h=new Image;h.src=a,e(h)}else g.each(function(a,b){e(b)})},FOTOMOTO.API.collectionList=function(a){FMJQ.getScript(FOTOMOTO_CONFIG.script_domain+"/widget/collections/"+FOTOMOTO_CONFIG.app_widget_id+"?callback="+FOTOMOTO.API.registerCallback(a))},FOTOMOTO.API.showWindow=function(a,b,c,d,e){if(FOTOMOTO_CONFIG.initializing)return;var f=FOTOMOTO.API.addPhoto(b,e);if(f.image_width==0){setTimeout(function(){FOTOMOTO.API.showWindow(a,b,c,d,e)},250),FMJQ.popup('<div id="fotomoto_popup" class="fmClearfix" style="padding-bottom: 0px !important; background-color: #F2F2F2 !important;"><div class="FotomotoLoadingDiv"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/fotomoto_loading.gif" id="fotomoto_loading_image"/></div></div>',{appendTo:document.body,containerCss:{width:240},zIndex:10000004});return}return FMJQ.popup.close(),FOTOMOTO.API.showWidgetPage(a,f)},FOTOMOTO.API.showWidgetPage=function(a,b){switch(a){case FOTOMOTO.API.BUY:case"buy":b.showBuy();break;case FOTOMOTO.API.PRINT:case"print":b.showPrint();break;case"premium":b.showPremium();break;case"canvas":b.showCanvas();break;case"fineart":b.showFineart();break;case"framed":b.showFramed();break;case"sticky":b.showSticky();break;case FOTOMOTO.API.CARD:case"postcard":case"card":b.showCard();break;case FOTOMOTO.API.FILE:case"license":b.showLicense();break;case FOTOMOTO.API.ECARD:case"ecard":b.showEcard();break;case FOTOMOTO.API.SHARE:b.showEcard();break;case FOTOMOTO.API.FACEBOOK:FOTOMOTO.externalShare("fm_facebook");break;case FOTOMOTO.API.TWITTER:FOTOMOTO.externalShare("fm_twitter");break;case FOTOMOTO.API.DIGG:FOTOMOTO.externalShare("fm_digg");break;case FOTOMOTO.API.BUZZ:FOTOMOTO.externalShare("fm_buzz");break;case FOTOMOTO.API.GPLUS:FOTOMOTO.externalShare("fm_gplus");break;case FOTOMOTO.API.PIN:FOTOMOTO.externalShare("fm_pin")}},FOTOMOTO.API.apiMode=function(){return FOTOMOTO.API.MODE||typeof fotomoto_api_mode!="undefined"&&fotomoto_api_mode},FOTOMOTO.API.addPhoto=function(a,b){if(!FOTOMOTO.API.apiMode()){alert("The widget is not in API Mode.");return}var c,d,e;e=FOTOMOTO.API.getImageNode(a),c=e[0],d=e[1];var f=new FOTOMOTO.WidgetBar(null,"","");for(var g=0;g<FOTOMOTO.Cart.widgets.length;g++)if(FOTOMOTO.Cart.widgets[g].image.src==c.src)return FOTOMOTO.Cart.widgets[g];return FOTOMOTO.Cart.addWidget(f),b&&(f.for_store=b),f.setImage(c,d),f},FOTOMOTO.API.showToolbar=function(a,b){var c=FOTOMOTO.API.addPhoto(b);if(c){if(a!=null){a=FOTOMOTO.get(a).get(0);if(a!=null){while(a.hasChildNodes())a.removeChild(a.firstChild);c.addToolbar(a,!0)}}else c.addToolbar();return c.id}return null},FOTOMOTO.API.callIfCallable=function(a,b){switch(typeof a){case"function":return a(b);case"undefined":return b;case"string":if(typeof window[a]=="function")return window[a](b)}},FOTOMOTO.cap=function(a){return a&&typeof a=="string"?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():a},FOTOMOTO.API.menuTimer=null,FOTOMOTO.API.currentMenu={},FOTOMOTO.API.updateMenu=function(a,b,c){var d=FOTOMOTO.Cart.getWidget(a);d.button_status=b,d.photo_id=b.photo_id;if(FOTOMOTO.API.currentMenu.widget==d){var e=FMJQ("#fotomotoPopup").get(0);FOTOMOTO.emptyChildren(e),d.addMenu(e,c);var f=FOTOMOTO.API.currentMenu.anchor,g=FOTOMOTO.API.currentMenu.menu_position;if(!f.parentNode)g==FOTOMOTO.API.POSITION.ABOVE?FMJQ(e).css("top",parseInt(f.top)-FOTOMOTO.getElementHeight(e)+"px"):FMJQ(e).css("top",parseInt(f.top)+parseInt(f.height)+4+"px");else{var h=FMJQ(f).offset();FMJQ(e).css("left",h.left+"px"),g==FOTOMOTO.API.POSITION.ABOVE?FMJQ(e).css("top",h.top-FOTOMOTO.getElementHeight(e)+"px"):FMJQ(e).css("top",h.top+FOTOMOTO.getElementHeight(f)+4+"px")}}},FOTOMOTO.API.showMenuForFlash=function(a,b,c,d,e){b.left=parseInt(b.left)+FOTOMOTO.get(a).offset().left,b.top=parseInt(b.top)+FOTOMOTO.get(a).offset().top,FOTOMOTO.API.showMenu(b,c,d,e)},FOTOMOTO.API.showMenu=function(a,b,c,d){var e=FOTOMOTO.API.addPhoto(b);d==null&&(d=FOTOMOTO.API.POSITION.BELOW);if(e){var f=FMJQ("#fotomotoPopup").get(0);f==null&&(f=document.createElement("div"),f.id="fotomotoPopup",f.className="fotomotoPopup FotomotoToolbarMenu",f.style.position="absolute",f.style.zIndex=1e3,document.body.appendChild(f),FMJQ(f).mouseover(function(){FOTOMOTO.API.menuTimer&&(window.clearTimeout(FOTOMOTO.API.menuTimer),FOTOMOTO.API.menuTimer=null)}),FMJQ(f).mouseout(function(){FOTOMOTO.API.menuTimer=window.setTimeout(function(){FMJQ("#fotomotoPopup").hide()},500)}),FMJQ(f).click(function(){FOTOMOTO.API.menuTimer&&(window.clearTimeout(FOTOMOTO.API.menuTimer),FOTOMOTO.API.menuTimer=null),FMJQ(f).hide()})),FOTOMOTO.API.menuTimer&&(window.clearTimeout(FOTOMOTO.API.menuTimer),FOTOMOTO.API.menuTimer=null);if(FMJQ(f).css("display")=="block"){var g=FOTOMOTO.API.currentMenu.anchor;if(!a.parentNode&&g&&!g.parentNode&&a.left==g.left&&a.right==g.right&&a.width==g.width&&a.height==g.height)return FMJQ(f).hide(),e.id}if(a==FOTOMOTO.API.currentMenu.anchor){FMJQ(f).show();return}FOTOMOTO.API.currentMenu.widget=e,FOTOMOTO.API.currentMenu.anchor=a,FOTOMOTO.API.currentMenu.menu_type=c,FOTOMOTO.API.currentMenu.menu_position=d,FMJQ(f).hide(),FOTOMOTO.emptyChildren(f),c==null&&(c=FOTOMOTO.API.MENU_ALL),e.addMenu(f,c);if(!a.parentNode)FMJQ(f).css("left",parseInt(a.left)+"px"),d==FOTOMOTO.API.POSITION.ABOVE?FMJQ(f).css("top",parseInt(a.top)-FOTOMOTO.getElementHeight(f)+"px"):FMJQ(f).css("top",parseInt(a.top)+parseInt(a.height)+4+"px"),FMJQ(f).show();else{var h=FMJQ(a).offset();FMJQ(f).css("left",h.left+"px"),d==FOTOMOTO.API.POSITION.ABOVE?FMJQ(f).css("top",h.top-FOTOMOTO.getElementHeight(f)+"px"):FMJQ(f).css("top",h.top+FOTOMOTO.getElementHeight(a)+4+"px"),FMJQ(f).show(),FMJQ(a).mouseout(function(){FOTOMOTO.API.menuTimer==null&&(FOTOMOTO.API.menuTimer=window.setTimeout(function(){var a=FMJQ("#fotomotoPopup");a.length>0&&a.hide()},500))})}return e.id}return null},FOTOMOTO.API.getToolbarLinks=function(a,b,c){var d=FOTOMOTO.API.getImageNode(a)[0];FOTOMOTO.API.addPhoto(a),FMJQ.getScript(FOTOMOTO.API.urls("toolbar_links",{app_store_id:FOTOMOTO_CONFIG.app_widget_id,image_url:encodeURIComponent(d.src),callback:b,extra:encodeURIComponent(FMJQ.toJSON(c))}))},FOTOMOTO.API.deleteToolbar=function(a){var b=FOTOMOTO.API.getWidget();return b&&b.toolbar&&b.toolbar.parentNode?(b.toolbar.parentNode.removeChild(b.toolbar),!0):!1},FOTOMOTO.API.updateToolbar=function(a,b){var c=FOTOMOTO.API.getWidget(),d=null;return c&&c.toolbar&&c.toolbar.parentNode&&(d=c.toolbar.parentNode,c.toolbar.parentNode.removeChild(c.toolbar)),FOTOMOTO.API.showToolbar(d,b)},FOTOMOTO.API.checkout=function(){FOTOMOTO.Cart.viewCart()},FOTOMOTO.API.isBasketEmpty=function(){return FOTOMOTO.Cart.isEmpty()},FOTOMOTO.API.getCartContents=function(){var a=[];for(w in FOTOMOTO.Cart.widgets){var b=FOTOMOTO.Cart.widgets[w];for(i in b.items)a.push(b.items[i])}return a},FOTOMOTO.API.clearCartContents=function(){var a=[];for(w in FOTOMOTO.Cart.widgets){var b=FOTOMOTO.Cart.widgets[w];b.items=[]}return a},FOTOMOTO.API.getStoreID=function(a,b){if(a==null||b==null)return null;FMJQ.getScript(FOTOMOTO.API.urls("store_id",{url:encodeURIComponent(a),callback:FOTOMOTO.API.registerCallback(b)}))},FOTOMOTO.API.getWidget=function(a){return FOTOMOTO.Cart.getWidget(a)},FOTOMOTO.API.getProducts=function(storeID,callback){if(storeID==null)return null;var regCall=FOTOMOTO.API.registerCallback(callback);if(storeID==FOTOMOTO_CONFIG.app_widget_id){var hash={};hash[FOTOMOTO.API.PRINT]=FOTOMOTO_CONFIG.print_offered,hash[FOTOMOTO.API.ECARD]=FOTOMOTO_CONFIG.ecard_offered,hash[FOTOMOTO.API.CARD]=FOTOMOTO_CONFIG.postcard_offered,hash[FOTOMOTO.API.FILE]=FOTOMOTO_CONFIG.license_offered;if(callback==null)return hash;eval(regCall)(hash)}else{if(callback==null)return null;FMJQ.getScript(FOTOMOTO.API.urls("store_products",{store_key:encodeURIComponent(storeID),callback:regCall}))}},FOTOMOTO.API.getCaptions=function(storeID,callback){if(storeID==null)return null;if(storeID==FOTOMOTO_CONFIG.app_widget_id){var hash={};hash[FOTOMOTO.API.PRINT]=FOTOMOTO_CONFIG.texts.print,hash[FOTOMOTO.API.ECARD]=FOTOMOTO_CONFIG.texts.ecard,hash[FOTOMOTO.API.CARD]=FOTOMOTO_CONFIG.texts.postcard,hash[FOTOMOTO.API.FILE]=FOTOMOTO_CONFIG.texts.license;if(callback==null)return hash;eval(FOTOMOTO.API.registerCallback(callback))(hash)}else{if(callback==null)return null;FMJQ.getScript(FOTOMOTO.API.urls("store_captions",{store_key:encodeURIComponent(storeID),callback:FOTOMOTO.API.registerCallback(callback)}))}},FOTOMOTO.API.getImageProducts=function(a,b,c){if(!FOTOMOTO.API.apiMode()){alert("The widget is not in API Mode.");return}var d=null;d=FOTOMOTO.get(a).get(0);if(d!=null){var e=FOTOMOTO.getRelEntry(d,"ftmt_img");e!=null&&(d=new Image,d.src=e)}else d=new Image,d.src=a;d!=null&&FMJQ.getScript(FOTOMOTO.API.urls("photo_products",{img:encodeURIComponent(d.src),callback:FOTOMOTO.API.registerCallback(b),extra:FMJQ.toJSON(c)}))},FOTOMOTO.API.getDefaultProducts=function(a,b){if(a==null)return null;FMJQ.getScript(FOTOMOTO.API.urls("default_products",{store_key:encodeURIComponent(a),callback:FOTOMOTO.API.registerCallback(b)}))},FOTOMOTO.API.getImageSizes=function(a,b,c){var d=FOTOMOTO.API.getImageNode(a)[0];d!=null&&FMJQ.getScript(FOTOMOTO.API.urls("image_sizes",{img:encodeURIComponent(d.src),callback:FOTOMOTO.API.registerCallback(b),extra:FMJQ.toJSON(c)}))},FOTOMOTO.API.addToCart=function(a,b,c,d){var e,f=FOTOMOTO.API.addPhoto(a);if(!d)var d={};d.count||(d.count=1);switch(b){case"postcard":case"Postcard":case"card":case"Card":f.fotomoto_postcards.push(c),e=new FOTOMOTO.PostcardItem(c.id,c.name,c.price,d.count,d.trimType,d.cropPoint,d.hasMessage,d.messageParams,d.rotate,d.orientation,d.bgColor);break;case"license":case"License":f.fotomoto_licenses.push(c),e=new FOTOMOTO.LicenseItem(c.id,c.name,c.price,d.count);break;case"canvas":case"Canvas":f.fotomoto_canvases.push(c),e=new FOTOMOTO.CanvasItem(c.id,c.name,c.price,d.count,d.paper,d.frame,d.wrap,d.hanger);break;case"fineart":case"Fineart":f.fotomoto_finearts.push(c),e=new FOTOMOTO.FineartItem(c.id,c.name,c.price,d.count,d.paper);break;case"framedprint":case"Framedprint":case"Framed Print":case"FramedPrint":f.fotomoto_framed_prints.push(c),e=new FOTOMOTO.FramedPrintItem(c.id,c.name,c.price,d.count,d.paper,d.trimType,d.cropPoint,d.frameStyle,d.frameColor,d.frameMatType,d.frameMatColor);break;case"wallpeel":case"Wallpeel":case"Wall Peel":case"WallPeel":f.fotomoto_sticky_prints.push(c),e=new FOTOMOTO.StickyPrintItem(c.id,c.name,c.price,d.count,d.paper,d.trimType,d.cropPoint);break;case"print":case"Print":f.fotomoto_prints.push(c),e=new FOTOMOTO.PurchasedItem(c.id,c.name,c.price,d.count,d.paper);break;default:return console.log("addToCart does not understand kindOfPrint : "+b),!1}e.widget=f;var g=!1;for(i in f.items)e.isEqual(f.items[i])&&(g=f.items[i],g.numOfItems=g.numOfItems+1);return g?g:(f.items.push(e),e)},FOTOMOTO.API.showPrint=function(a){if(FOTOMOTO_CONFIG.initializing)return;var b=FOTOMOTO.API.addPhoto(a);b&&b.showPrint()},FOTOMOTO.API.showPostcard=function(a){FOTOMOTO.API.showCard(a)},FOTOMOTO.API.showCard=function(a){if(FOTOMOTO_CONFIG.initializing)return;var b=FOTOMOTO.API.addPhoto(a);b&&b.showCard()},FOTOMOTO.API.showEcard=function(a){if(FOTOMOTO_CONFIG.initializing)return;var b=FOTOMOTO.API.addPhoto(a);b&&b.showEcard()},FOTOMOTO.API.showPage=function(a,b){switch(a){case"print":FOTOMOTO.API.showPrint(b);break;case"card":case"postcard":FOTOMOTO.API.showCard(b);break;case"ecard":FOTOMOTO.API.showEcard(b)}},FOTOMOTO.REGISTER={},FOTOMOTO.REGISTER.modules=[],FOTOMOTO.REGISTER.moduleAdded=function(a){for(var b=0;b<FOTOMOTO.REGISTER.modules.length;b++)if(FOTOMOTO.REGISTER.modules[b]==a)return!0;return!1},FOTOMOTO.REGISTER.addModule=function(a){return FOTOMOTO.REGISTER.moduleAdded(a)?!1:(FOTOMOTO.REGISTER.modules.push(a),!0)},FOTOMOTO.REGISTER.caches=[],FOTOMOTO.REGISTER.viewCached=function(a){for(var b=0;b<FOTOMOTO.REGISTER.caches.length;b++)if(FOTOMOTO.REGISTER.caches[b].screen==a)return!0;return!1},FOTOMOTO.REGISTER.getGeneralCache=function(a){for(var b=0;b<FOTOMOTO.REGISTER.caches.length;b++)if(FOTOMOTO.REGISTER.caches[b].screen==a)return FOTOMOTO.REGISTER.caches[b].data;return""},FOTOMOTO.REGISTER.addGeneralCache=function(a,b,c){for(var d=0;d<FOTOMOTO.REGISTER.caches.length;d++)if(FOTOMOTO.REGISTER.caches[d].screen==a)return c?(FOTOMOTO.REGISTER.caches[d].screen.data=b,!0):!1;return FOTOMOTO.REGISTER.caches.push({screen:a,data:b}),!0},FOTOMOTO.REGISTER.isGeneralScreen=function(a){var b=["shipping_address","shipping_method","reviewPayment","ecard","buy"];for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},FOTOMOTO.ContactClass=new FOTOMOTO.Class,FOTOMOTO.ContactClass.prototype={init:function(){this.item_type=null,this.item_id=null,this.image_url=null,this.categories=null},getId:function(){return this.item_type=="license"?this.item_id.replace(/licenses/,""):this.item_id},showContact:function(a,b){this.item_type=a,this.item_id=b.id,this.image_url=FOTOMOTO.Cart.getActiveWidget().image.src,FMJQ("#fotomoto_contact_subject").val("Asking about "+b.name)},messageCharLeft:function(){var a=FOTOMOTO.get("fotomoto_contact_message").get(0);text=a.value,charCount=text.length?text.length:a.textLength?a.textLength:0;var b=a.getAttribute("maxlength")-charCount;return FOTOMOTO.get("fotomoto_chars_left").html(b),b},loaded:function(a){this.categories=a,FOTOMOTO.get("fotomoto_contact_message").keyup(this.messageCharLeft),FOTOMOTO.get("fotomoto_contact_message").keypress(this.messageCharLeft),FOTOMOTO.get("fotomoto_contact_message").mouseup(this.messageCharLeft),FOTOMOTO.get("fotomoto_contact_cat").bind("change",FMJQ.proxy(this.categoryChanged,this))},categoryChanged:function(){var a=FOTOMOTO.getSelectedOption("fotomoto_contact_cat").value,b=FOTOMOTO.get("fotomoto_contact_subcat").get(0);b.options.length=0,b.options[b.options.length]=new Option("Please Choose","0");for(var c=0;c<this.categories.length;c++)if(this.categories[c].id==a)for(var d=0;d<this.categories[c].subs.length;d++)b.options[b.options.length]=new Option(this.categories[c].subs[d].name,this.categories[c].subs[d].id)},goBack:function(){FOTOMOTO.get("fotomoto_contact_first_name").val(""),FOTOMOTO.get("fotomoto_contact_last_name").val(""),FOTOMOTO.get("fotomoto_contact_email").val(""),FOTOMOTO.get("fotomoto_contact_company").val(""),FOTOMOTO.get("fotomoto_contact_message").val(""),FOTOMOTO.get("fotomoto_contact_industry").get(0).selectedIndex=0,FOTOMOTO.get("fotomoto_contact_cat").get(0).selectedIndex=0,FOTOMOTO.get("fotomoto_contact_subcat").get(0).selectedIndex=0,this.messageCharLeft()},sendContactArtist:function(){var a=FOTOMOTO.Cart.getActiveWidget(),b={};b.name=FOTOMOTO.get("fotomoto_contact_name").val(),b.email=FOTOMOTO.get("fotomoto_contact_email").val(),b.message=FOTOMOTO.get("fotomoto_contact_message").val(),b.product=FOTOMOTO.get("fotomoto_contact_product").val(),b.image_url=a.image.src,b.app_store_id=FOTOMOTO_CONFIG.app_widget_id;var c=!1;return c|=FOTOMOTO.setFieldError("fotomoto_contact_name",FOTOMOTO.testBlank(b.name)),c|=FOTOMOTO.setFieldError("fotomoto_contact_email",FOTOMOTO.testBlank(b.email)),c|=FOTOMOTO.setFieldError("fotomoto_contact_message",FOTOMOTO.testBlank(b.message)),c?!1:FOTOMOTO.setFieldError("fotomoto_contact_email",!FOTOMOTO.testEmail(b.email))?!1:(FOTOMOTO.POST.postData(b,FOTOMOTO_CONFIG.script_domain+"/stores/contact",null,null),FMJQ(document).oneTime(500,function(){new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,"Your contact has been sent successfully.",function(){FOTOMOTO.Cart.getActiveWidget().closeWidget()})}),!0)},sendContact:function(){var a={};a.first_name=FOTOMOTO.get("fotomoto_contact_first_name").val(),a.last_name=FOTOMOTO.get("fotomoto_contact_last_name").val(),a.email=FOTOMOTO.get("fotomoto_contact_email").val(),a.company=FOTOMOTO.get("fotomoto_contact_company").val(),a.message=FOTOMOTO.get("fotomoto_contact_message").val(),a.industry=FOTOMOTO.getSelectedOption("fotomoto_contact_industry").value,a.category=FOTOMOTO.getSelectedOption("fotomoto_contact_cat").value,a.sub_category=FOTOMOTO.getSelectedOption("fotomoto_contact_subcat").value,a.item_type=this.item_type,a.item_id=this.getId(),a.image_url=this.image_url,a.app_store_id=FOTOMOTO_CONFIG.app_widget_id;var b=!1;return b|=FOTOMOTO.setFieldError("fotomoto_contact_first_name",FOTOMOTO.testBlank(a.first_name)),b|=FOTOMOTO.setFieldError("fotomoto_contact_last_name",FOTOMOTO.testBlank(a.last_name)),b|=FOTOMOTO.setFieldError("fotomoto_contact_email",FOTOMOTO.testBlank(a.email)),b|=FOTOMOTO.setFieldError("fotomoto_contact_message",FOTOMOTO.testBlank(a.message)),b|=FOTOMOTO.setFieldError("fotomoto_contact_industry",a["industry"]==0),b|=FOTOMOTO.setFieldError("fotomoto_contact_cat",a["category"]==0),b|=FOTOMOTO.setFieldError("fotomoto_contact_subcat",a["sub_category"]==0),b?!1:FOTOMOTO.setFieldError("fotomoto_contact_email",!FOTOMOTO.testEmail(a.email))?!1:(FOTOMOTO.POST.postData(a,FOTOMOTO_CONFIG.posted_domain+"/conversations/add",null,null),FMJQ(document).oneTime(500,function(){new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,"Your contact has been sent successfully. You will receive an email with more information shortly.",function(){FOTOMOTO.Contact.goBack(),FOTOMOTO.Cart.getActiveWidget().closeWidget()},{width:360,height:220})}),!0)}},FOTOMOTO.Contact=new FOTOMOTO.ContactClass,FOTOMOTO.CartClass=new FOTOMOTO.Class,FOTOMOTO.CartClass.prototype={init:function(){this.widgets=[],this.shipping=0,this.shipping_id=0,this.postcard_shipping_id=0,this.fineart_shipping_id=0,this.canvas_shipping_id=0,this.framed_print_shipping_id=0,this.print_frames_shipping_id=0,this.fineart_frames_shipping_id=0,this.sticky_print_shipping_id=0,this.loading_session=!0,this.tax=0,this.zipcode="",this.couponcode="",this.coupon=0,this.coupon_type="percent",this.from="",this.email="",this.paymentMethod={id:"creditcards",value:"Credit Cards"},this.shippingMethods=FOTOMOTO_CONFIG.shipping_methods,this.shipping_first_name="",this.shipping_last_name="",this.shipping_company="",this.shipping_address1="",this.shipping_address2="",this.shipping_city="",this.shipping_state="",this.shipping_country="",this.shipping_zipcode="",this.shipping_phone_number="",this.as_gift=!1,this.gift_from="",this.gift_message="",this.gift_first_name="",this.gift_last_name="",this.unit=FOTOMOTO_CONFIG.store_size_unit,this.currency=FOTOMOTO_CONFIG.store_currency,this.exchange_rate=1,this.processing_fee=0,this.auto_discount=0,this.wasEmpty=!0;for(var a=0;a<this.shippingMethods.length;a++)this.shippingMethods[a].price=0;this.readConfig(),this.unit=this.unit!="cm"&&this.unit!="in"?"in":this.unit},shipping_name:function(){return FMJQ.trim(this.shipping_first_name)+" "+FMJQ.trim(this.shipping_last_name)},testShippingAddress:function(){var a=FOTOMOTO.testBlank(this.shipping_first_name)||FOTOMOTO.testBlank(this.shipping_last_name)||FOTOMOTO.testBlank(this.shipping_address1)||FOTOMOTO.testBlank(this.shipping_city)||FOTOMOTO.testBlank(this.shipping_country)||FOTOMOTO.testBlank(this.shipping_zipcode);if(this.shipping_country=="US"||this.shipping_country=="CA")a=a||FOTOMOTO.testBlank(this.shipping_state);return!a},shippingAddressToString:function(){var a=FOTOMOTO.escapeHTML(this.shipping_name())+"<br/> ";if(FOTOMOTO.Cart.licensesOnly())a+=FOTOMOTO.escapeHTML(this.email)+"<br/> ";else{a+=FOTOMOTO.escapeHTML(this.shipping_address1)+" "+FOTOMOTO.escapeHTML(this.shipping_address2)+"<br/> ",a+=FOTOMOTO.escapeHTML(this.shipping_city)+", "+FOTOMOTO.escapeHTML(this.shipping_state)+" "+FOTOMOTO.escapeHTML(this.shipping_zipcode)+"<br/> ";var b=this.shipping_country;for(var c=0;c<FOTOMOTO_CONFIG.countries.length;c++)if(FOTOMOTO_CONFIG.countries[c].sname==this.shipping_country){b=FOTOMOTO_CONFIG.countries[c].lname;break}a+=FOTOMOTO.escapeHTML(b)}return a},empty:function(){for(var a=0;a<this.widgets.length;a++)this.widgets[a].empty();this.shipping=0,this.tax=0,this.from="",this.paymentMethod={id:"creditcards",value:"Credit Cards"},this.shipping_id=0,this.postcard_shipping_id=0,this.fineart_shipping_id=0,this.canvas_shipping_id=0,this.framed_print_shipping_id=0,this.print_frames_shipping_id=0,this.fineart_frames_shipping_id=0,this.sticky_print_shipping_id=0},getActiveWidget:function(){for(var a=0;a<this.widgets.length;a++)if(this.widgets[a].active)return this.widgets[a];return this.widgets[0]},setActiveWidget:function(a){for(var b=0;b<this.widgets.length;b++)this.widgets[b].active=!1;return a.active=!0,this.widgets[0]},addWidget:function(a){this.widgets[this.widgets.length]=a},openWidget:function(a){var b=null;for(var c=0;c<this.widgets.length;c++)this.widgets[c].active&&this.widgets[c].id!=a&&this.widgets[c].closeWidget(),this.widgets[c].active=!1,this.widgets[c].id==a&&(this.widgets[c].active=!0,b=this.widgets[c]);return b},getWidget:function(a){for(var b=0;b<this.widgets.length;b++)if(this.widgets[b].id==a)return this.widgets[b];return this.getActiveWidget()},addItem:function(a,b,c,d,e){return this.getActiveWidget().addItem(a,b,c,d,e)},removeItem:function(a){this.getActiveWidget().removeItem(a)},getItemIndexById:function(a){return this.getActiveWidget().getItemIndexById(a)},lastItemAdded:function(){var a=0,b=0,c=undefined,d=FOTOMOTO.API.getCartContents();while(d.length>0)b=d[0].createdAt.valueOf(),a<b&&(c=d[0],a=b),d=d.slice(1,d.length);return c},toJSON:function(){var a=[];for(var b=0;b<this.widgets.length;b++)this.widgets[b].isEmpty()||(a[a.length]=this.widgets[b].toJSON());a.toJSON=null,this.as_gift||(this.gift_from="",this.gift_message="");var c="";return typeof fotomoto_aid!="undefined"&&(c=fotomoto_aid),typeof fotomoto_affiliate_key!="undefined"&&(c=fotomoto_affiliate_key),{app_widget_id:FOTOMOTO_CONFIG.app_widget_id,aid:c,email:this.email,shipping_method:this.shipping_id,postcard_shipping_method:this.postcard_shipping_id,fineart_shipping_method:this.fineart_shipping_id,framed_print_shipping_method:this.framed_print_shipping_id,print_frames_shipping_method:this.print_frames_shipping_id,fineart_frames_shipping_method:this.fineart_frames_shipping_id,sticky_print_shipping_method:this.sticky_print_shipping_id,canvas_shipping_method:this.canvas_shipping_id,tax:this.tax,coupon:this.couponcode,payment:this.paymentMethod.id,shipping_first_name:encodeURIComponent(this.shipping_first_name),shipping_last_name:encodeURIComponent(this.shipping_last_name),shipping_company:encodeURIComponent(this.shipping_company),shipping_address1:encodeURIComponent(this.shipping_address1),shipping_address2:encodeURIComponent(this.shipping_address2),shipping_city:encodeURIComponent(this.shipping_city),shipping_state:encodeURIComponent(this.shipping_state),shipping_country:this.shipping_country,shipping_zipcode:encodeURIComponent(this.shipping_zipcode),shipping_phone_number:this.shipping_phone_number,as_gift:this.as_gift,gift_first_name:this.gift_first_name,gift_last_name:this.gift_last_name,gift_from:this.gift_from,gift_message:this.gift_message,currency:this.currency,unit:this.unit,widgets:a,licenses_only:this.licensesOnly()}},saveConfig:function(){var a={unit:this.unit,currency:this.currency};FMJQ.cookie("fotomoto_config",null),FMJQ.cookie("fotomoto_config",FMJQ.toJSON(a),{path:"/",expires:new Date("January 20, 2025")})},readConfig:function(){var a=null;try{a=FMJQ.evalJSON(FMJQ.cookie("fotomoto_config"))}catch(b){}if(a){this.unit=a.unit||FOTOMOTO_CONFIG.store_size_unit,this.currency=a.currency||FOTOMOTO_CONFIG.store_currency;if(this.currency!=FOTOMOTO_CONFIG.store_currency){var c=!1;for(var d in FOTOMOTO_CONFIG.currencies)if(this.currency==FOTOMOTO_CONFIG.currencies[d].id){c=!0;break}c||(this.currency=FOTOMOTO_CONFIG.store_currency,this.saveConfig())}this.updateExchangeRate()}},getPrintIds:function(a){var b=[];for(var c=0;c<this.widgets.length;c++)b=b.concat(this.widgets[c].getPrintIds(a));return b.join("_")},getFineartIds:function(a,b){var c=[];for(var d=0;d<this.widgets.length;d++)c=c.concat(this.widgets[d].getFineartIds(a,b));return c.join("_")},getCanvasIds:function(a,b){var c=[];for(var d=0;d<this.widgets.length;d++)c=c.concat(this.widgets[d].getCanvasIds(a,b));return c.join("_")},getFramedPrintIds:function(a,b){var c=[];for(var d=0;d<this.widgets.length;d++)c=c.concat(this.widgets[d].getFramedPrintIds(a,b));return c.join("_")},getPrintFramesIds:function(a,b){var c=[];for(var d=0;d<this.widgets.length;d++)c=c.concat(this.widgets[d].getPrintFramesIds(a,b));return c.join("_")},getFineartFramesIds:function(a,b){var c=[];for(var d=0;d<this.widgets.length;d++)c=c.concat(this.widgets[d].getFineartFramesIds(a,b));return c.join("_")},getStickyPrintIds:function(a,b){var c=[];for(var d=0;d<this.widgets.length;d++)c=c.concat(this.widgets[d].getStickyPrintIds(a,b));return c.join(",")},getPostcardIds:function(a){var b=[];for(var c=0;c<this.widgets.length;c++)b=b.concat(this.widgets[c].getPostcardIds(a));return b.join("_")},getLicenseIds:function(a){var b=[];for(var c=0;c<this.widgets.length;c++)b=b.concat(this.widgets[c].getLicenseIds(a));return b.join("_")},getTotalItems:function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].getTotalItems();return a},getTotalUniqueItems:function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].items.length;return a},selectPaperType:function(a){var b=a.options[a.selectedIndex].value,c=FOTOMOTO.Cart.getActiveWidget();c.setPrintPaperType(b)},updateViewCartTotalItems:function(){FOTOMOTO.get("fotomoto_view_cart_total_items").get(0)&&FOTOMOTO.get("fotomoto_view_cart_total_items").html(this.getTotalItems()+""+(this.getTotalItems()>1?"":"")),FMJQ("#cart-link span").length>0&&FMJQ("#cart-link span").html(this.getTotalItems())},scrollTheCart:function(){if(FOTOMOTO.Cart.isEmpty()){FOTOMOTO.get("fotomoto_view_cart_float").css({display:"none"});return}FOTOMOTO.get("fotomoto_view_cart_float").css({display:""});if(!FMJQ.browser.msie||parseInt(FMJQ.browser.version)>6){if(FOTOMOTO.get("fotomoto_view_cart_float").css("position")!="fixed"){var a=FMJQ(document).scrollLeft(),b=FMJQ(document).scrollTop();FOTOMOTO_CONFIG.cart_float_position=="tl"&&FOTOMOTO.get("fotomoto_view_cart_float").css({top:"10px",left:"10px"}),FOTOMOTO_CONFIG.cart_float_position=="tr"&&FOTOMOTO.get("fotomoto_view_cart_float").css({top:"10px",right:"10px"}),FOTOMOTO_CONFIG.cart_float_position=="bl"&&FOTOMOTO.get("fotomoto_view_cart_float").css({bottom:"10px",left:"10px"}),FOTOMOTO_CONFIG.cart_float_position=="br"&&FOTOMOTO.get("fotomoto_view_cart_float").css({bottom:"10px",right:"10px"}),FOTOMOTO.get("fotomoto_view_cart_float").css({position:"fixed"})}}else{var a=FMJQ(document).scrollLeft(),b=FMJQ(document).scrollTop();FOTOMOTO_CONFIG.cart_float_position=="tl"&&(a=10,b+=10),FOTOMOTO_CONFIG.cart_float_position=="tr"&&(a=FMJQ(window).width()-FOTOMOTO.getElementWidth("fotomoto_view_cart_float")-10,b+=10),FOTOMOTO_CONFIG.cart_float_position=="bl"&&(a=10,b=b+FMJQ(window).height()-FOTOMOTO.getElementHeight("fotomoto_view_cart_float")-10),FOTOMOTO_CONFIG.cart_float_position=="br"&&(a=FMJQ(window).width()-FOTOMOTO.getElementWidth("fotomoto_view_cart_float")-10,b=b+FMJQ(window).height()-FOTOMOTO.getElementHeight("fotomoto_view_cart_float")-10),FOTOMOTO.get("fotomoto_view_cart_float").offset({top:b,left:a}),setTimeout(function(){FOTOMOTO.Cart.scrollTheCart()},10)}},addViewCart:function(){var a=FOTOMOTO.get("FotomotoViewCart").get(0);if(a)a.tagName.toLowerCase()=="a"&&(a.href="javascript:void(0);",a.onclick=function(){FOTOMOTO.Cart.viewCart()}),a.tagName.toLowerCase()=="div"&&(a.innerHTML='<a href="javascript:void(0);" onclick="FOTOMOTO.Cart.viewCart();">'+FOTOMOTO_CONFIG.texts.view_cart+"</a>"),FMJQ(a).addClass("FotomotoViewCartClass");else{var b=document.createElement("div");b.id="fotomoto_view_cart_float",b.className="FotomotoViewCartClass",b.innerHTML+='<div id="fotomoto_cart_info_div"><a href="javascript:void(0);" onclick="FOTOMOTO.Cart.viewCart();"><span id="fotomoto_view_cart_total_items">'+this.getTotalItems()+'</span><span class="fotomoto_cart_icon"></span>Check Out</a></div>',b.innerHTML+="",document.body.appendChild(b),FOTOMOTO.Cart.scrollTheCart()}},updateExchangeRate:function(){if(FOTOMOTO_CONFIG.store_currency==this.currency)this.exchange_rate=1;else{var a=null,b=null;for(var c=0;c<FOTOMOTO_CONFIG.currencies.length;c++)if(FOTOMOTO_CONFIG.currencies[c].id==FOTOMOTO_CONFIG.store_currency){a=FOTOMOTO_CONFIG.currencies[c];break}for(var c=0;c<FOTOMOTO_CONFIG.currencies.length;c++)if(FOTOMOTO_CONFIG.currencies[c].id==this.currency){b=FOTOMOTO_CONFIG.currencies[c];break}a.id!="USD"?this.exchange_rate=parseFloat((b.rate/a.rate*FOTOMOTO_CONFIG.ex_margin).toFixed(2)):this.exchange_rate=parseFloat((b.rate*FOTOMOTO_CONFIG.ex_margin).toFixed(2))}}},FOTOMOTO.Cart=new FOTOMOTO.CartClass,FOTOMOTO.WidgetContent=new FOTOMOTO.Class,FOTOMOTO.WidgetContent.prototype={init:function(a,b,c){this.panelId=a,this.contentId=b,this.panelType=c},setPanelContent:function(a){FOTOMOTO.get(this.panelId).html(a)},setContent:function(a){this.panelType=="yui"&&FOTOMOTO.createWidgetPanel(),FOTOMOTO.get(this.contentId).html(a)},clearContent:function(){FOTOMOTO.get(this.contentId).html("")},showPanel:function(){this.panelType=="yui"&&(FOTOMOTO.WidgetPanel.center(),FOTOMOTO.WidgetPanel.show());if(this.panelType=="inline"){FOTOMOTO.get(this.panelId).css("display","block");var a=FOTOMOTO.get(this.panelId).offset.top+FOTOMOTO.get(this.panelId).height()-FMJQ(window).height();a!=0&&window.scrollTo(0,a)}FOTOMOTO.get(this.panelId).css("visibility","visible")},hidePanel:function(){FOTOMOTO.widgetFrame.removeCropObject(),FOTOMOTO.get(this.panelId).css("visibility","hidden"),this.panelType=="yui"&&(this.clearContent(),FOTOMOTO.WidgetPanel.hide()),this.panelType=="inline"&&FOTOMOTO.get(this.panelId).css("display","none")},centerPanel:function(){}},FOTOMOTO.WidgetBar=new FOTOMOTO.Class,FOTOMOTO.WidgetBar.prototype={init:function(a,b,c,d){this.id=FOTOMOTO.generate_unique_id(),this.image=a,this.image_ref=a,this.image_width=0,this.image_height=0,this.active=!1,this.items=[],this.framed=!1,this.frameType={id:"frame1",value:20},this.cropPoint=null,this.fotomoto_prints=[],this.fotomoto_finearts=[],this.fotomoto_canvases=[],this.fotomoto_framed_prints=[],this.fotomoto_print_frames=[],this.fotomoto_fineart_frames=[],this.fotomoto_sticky_prints=[],this.stickies=[],this.photo_id=null,this.print_standard=2,this.fineart_flexible_print=1,this.canvas_flexible_print=1,this.customized_print_unique_id=null,this.current_print=null,this.fotomoto_postcards=[],this.fotomoto_licenses=[],this.fotomoto_license_terms=[],this.fotomoto_digital_downloads=[],this.customized_postcard_unique_id=null,this.customized_license_unique_id=null,this.current_postcard=null,this.current_license=null,this.bar_id=b,this.availabilityChecked=!1,this.print_available=!0,this.button_status=null,this.photo_favored=-1,this.for_store="",this.currentScreen="",this.box_size=160,this.toolbar=null;var e="";this.image!=null&&this.addToolbar(d),this.widgetContent=null,FOTOMOTO.get(c).get(0)?(this.widgetContent=new FOTOMOTO.WidgetContent(c,"fotomoto_content_"+this.id,"inline"),this.widgetContent.setPanelContent('<div id="fotomoto_outer_div"><img name="logo" src="'+FOTOMOTO_CONFIG.static_domain+'/assets/fotomoto_logo.gif" alt="fotomoto" align="left" /><a href="'+FOTOMOTO_CONFIG.posted_domain+'/site/confidence" target="_blank" onfocus="this.blur()" class="FotomotoConfidenceLink">[Purchase with Confidence]</a><img onclick="FOTOMOTO.closePanel();" name="fotomotoPageClose" src="'+FOTOMOTO_CONFIG.static_domain+'/images/close.gif" alt="Close" align="right" style="cursor:pointer" /></div><div id="fotomoto_content_'+this.id+'" class="FotomotoContent"></div></div>')):this.widgetContent=new FOTOMOTO.WidgetContent("fotomotoWidgetContainer","fotomotoContent","yui"),this.image!=null&&(this.checkImageAvailability(),FOTOMOTO_CONFIG.logo&&this.checkStoreOwner(),this.cloneImage())},reAddToolbar:function(a,b){this.image_ref=a,this.cloneImage(),this.image!=null&&this.addToolbar(b),this.button_stastus==null&&(this.checkImageAvailability(),FOTOMOTO_CONFIG.logo&&this.checkStoreOwner())},addMenu:function(a,b){toolbarContent='<h1><a href="http://www.fotomoto.com">fotomoto.com</a></h1><div class="fotomotoPopupContent"><ul class="icons">',this.button_status==null&&(toolbarContent+="<li>Loading...</li>",this.checkImageAvailability(b)),this.button_status!=null&&this.button_status.status=="unavailable"&&(toolbarContent+="<li><span>"+
this.button_status.not_for_sale_text+"</span></li>"),this.button_status!=null&&this.button_status.status=="soldout"&&(toolbarContent+="<li>SOLD OUT</li>"),this.button_status!=null&&this.button_status.status=="private"&&(toolbarContent+="<li>This photo is private.</li>");if(this.button_status!=null&&this.button_status.status=="available"){var c=[],d=FOTOMOTO_CONFIG.print_offered&&this.button_status.print_offered&&b!=FOTOMOTO.API.MENU_SHARE,e=FOTOMOTO_CONFIG.postcard_offered&&this.button_status.card_offered&&b!=FOTOMOTO.API.MENU_SHARE,f=FOTOMOTO_CONFIG.license_offered&&this.button_status.license_offered&&b!=FOTOMOTO.API.MENU_SHARE,g=FOTOMOTO_CONFIG.ecard_offered&&this.button_status.ecard_offered&&b!=FOTOMOTO.API.MENU_BUY;d&&c.push('<li><a id="fotomotoPrint" href="javascript:void(0);" name="print" onclick="FOTOMOTO.API.showWindow(FOTOMOTO.API.PRINT, \''+this.image.src+"');\">"+FOTOMOTO_CONFIG.texts.print+"</a></li>"),e&&c.push('<li><a id="fotomotoCard" href="javascript:void(0);" name="postcard" onclick="FOTOMOTO.API.showWindow(FOTOMOTO.API.CARD, \''+this.image.src+"');\">"+FOTOMOTO_CONFIG.texts.postcard+"</a></li>"),f&&c.push('<li><a id="fotomotoDownload" href="javascript:void(0);" name="license" onclick="FOTOMOTO.API.showWindow(FOTOMOTO.API.FILE, \''+this.image.src+"');\">"+FOTOMOTO_CONFIG.texts.license+"</a></li>"),g&&c.push('<li><a id="fotomotoEcard" href="javascript:void(0);" name="ecard" onclick="FOTOMOTO.API.showWindow(FOTOMOTO.API.ECARD, \''+this.image.src+"');\">"+FOTOMOTO_CONFIG.texts.ecard+"</a></li>"),toolbarContent+=c.join("")}toolbarContent+="</ul></div>",toolbarContent+='<br class="FotomotoClear"/>';var h=document.createElement("div");h.innerHTML=toolbarContent;for(var i=0;i<h.childNodes.length;i++)a.appendChild(h.childNodes[i].cloneNode(!0))},addToolbar:function(a,b){var c=this.getToolbarContent();this.toolbar=FOTOMOTO.get(this.bar_id).get(0);if(!this.toolbar){this.toolbar=document.createElement("div"),this.bar_id="FotomotoToolbar_"+this.id,typeof FOTOMOTO_CONFIG.toolbar_position!="undefined"&&(this.toolbar_position=FOTOMOTO_CONFIG.toolbar_position);var d=this.image_ref;for(var e=0;e<FOTOMOTO_CONFIG.box_list.length;e++){var f=FMJQ(this.image_ref),g=FOTOMOTO_CONFIG.box_list[e].split(" ");for(var h=0;h<g.length;h++){f=f.parents(g[h]);if(f.length==0)break}if(f.length>0){d=f.get(0);break}}if(a!=null)b?FMJQ(a).append(this.toolbar):FMJQ(a).after(this.toolbar);else{var i=FOTOMOTO.isMySiblingAnImage(this.image_ref);i&&(d=FOTOMOTO.toolbarInsertPostion(this.toolbar_position,this.image_ref));if(d)switch(this.toolbar_position){case"1":FMJQ(d).before(this.toolbar);break;case"0":default:FMJQ(d).after(this.toolbar),i&&FMJQ(this.toolbar).after("<br>")}}}this.bar_id!="FotomotoToolbar_"+this.image_ref.id&&(this.bar_id="FotomotoToolbar_"+this.id),this.toolbar.id=this.bar_id,this.toolbar.className="FotomotoToolbarClass FotomotoNoToolbar",this.toolbar.style.width=this.getToolbarWidth(),this.toolbar.style.margin="0px auto",this.toolbar.style.display="none",this.toolbar_position="0";var j=document.createElement("div");j.innerHTML=c;while(this.toolbar.childNodes.length>=1)this.toolbar.removeChild(this.toolbar.firstChild);for(var e=0;e<j.childNodes.length;e++)this.toolbar.appendChild(j.childNodes[e].cloneNode(!0));FMJQ.onContentReady(this.toolbar.id,function(){var a=FMJQ("a.FotomotoBarLink",this.toolbar);for(var b=0;b<a.length;b++){var c=a[b];FMJQ(c).bind("click",{me:this},function(a){if(this.name=="ecard"||this.name=="license"||this.name=="postcard")return FOTOMOTO.loadContent(this.name+".html",a.data.me),!1})}this.button_status!=null&&FOTOMOTO.showWidgetBarButtons(this.id,this.button_status)},null,this)},removeToolbar:function(){if(this.toolbar)while(this.toolbar.childNodes.length>=1)this.toolbar.removeChild(this.toolbar.firstChild)},refreshToolbar:function(){var a=this.getToolbarContent();this.toolbar=FOTOMOTO.get(this.bar_id).get(0);if(this.toolbar){this.toolbar.className="FotomotoToolbarClass FotomotoNoToolbar",this.toolbar.style.width=this.getToolbarWidth(),this.toolbar.style.margin="0px auto",this.toolbar.style.display="none",this.toolbar_position="0";var b=document.createElement("div");b.innerHTML=a;while(this.toolbar.childNodes.length>=1)this.toolbar.removeChild(this.toolbar.firstChild);for(var c=0;c<b.childNodes.length;c++)this.toolbar.appendChild(b.childNodes[c].cloneNode(!0));FMJQ.onContentReady(this.toolbar.id,function(){var a=FMJQ("a.FotomotoBarLink",this.toolbar);for(var b=0;b<a.length;b++){var c=a[b];FMJQ(c).bind("click",{me:this},function(a){if(this.name=="ecard"||this.name=="license"||this.name=="postcard")return FOTOMOTO.loadContent(this.name+".html",a.data.me),!1})}this.button_status!=null?FOTOMOTO.showWidgetBarButtons(this.id,this.button_status):this.checkImageAvailability()},this,!0)}},cloneImage:function(){var a=new Image;FMJQ(a).bind("load",{obj:this},function(a){a.data.obj.image_width=this.width,a.data.obj.image_height=this.height}),a.src=this.image.src,this.image=a},getToolbarWidth:function(){var a=FOTOMOTO.getElementWidth(this.image_ref);return a==0&&(a=this.image_width),a==0?"auto":a+"px"},getToolbarContent:function(){var a="";if(FOTOMOTO_CONFIG.css_toolbar==0){a+='<table id="fotomoto_table" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="text-align: left;">';if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.print_offered||!FOTOMOTO.Cart.fixedToolbar())a+='<a href="javascript:void(0);" name="print" style="" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.print+"</a>";if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.postcard_offered||!FOTOMOTO.Cart.fixedToolbar())a+='<span class="FotomotoSep1" style="">'+FOTOMOTO_CONFIG.texts.separator+"</span>",a+='<a href="javascript:void(0);" name="postcard" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.postcard+"</a>",a+='<span class="FotomotoSep2" style="">'+FOTOMOTO_CONFIG.texts.separator+"</span>";if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.license_offered||!FOTOMOTO.Cart.fixedToolbar())a+='<a href="javascript:void(0);" name="license" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.license+"</a>",a+='<span class="FotomotoSep3" style="">'+FOTOMOTO_CONFIG.texts.separator+"</span>";a+='</td><td style="text-align: right;">';if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.ecard_offered||!FOTOMOTO.Cart.fixedToolbar())a+='<a href="javascript:void(0);" name="ecard" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.ecard+"</a>";a+="</td>  </tr></tbody>  </table>"}else{a='<ul class="FotomotoBar">';var b=[];if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.print_offered||!FOTOMOTO.Cart.fixedToolbar())b.push('<li class="FotomotoPrintButton"><a href="javascript:void(0);" name="print" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.print+"</a></li>"),b.push('<li class="FotomotoSeparator"><span class="FotomotoSep1">'+FOTOMOTO_CONFIG.texts.separator+"</span></li>");if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.postcard_offered||!FOTOMOTO.Cart.fixedToolbar())b.push('<li class="FotomotoCardButton"><a href="javascript:void(0);" name="postcard" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.postcard+"</a></li>"),b.push('<li class="FotomotoSeparator"><span class="FotomotoSep2">'+FOTOMOTO_CONFIG.texts.separator+"</span></li>");if(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.license_offered||!FOTOMOTO.Cart.fixedToolbar())b.push('<li class="FotomotoLicenseButton"><a href="javascript:void(0);" name="license" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.license+"</a></li>"),b.push('<li class="FotomotoSeparator"><span class="FotomotoSep3">'+FOTOMOTO_CONFIG.texts.separator+"</span></li>");(FOTOMOTO.Cart.fixedToolbar()&&FOTOMOTO_CONFIG.ecard_offered||!FOTOMOTO.Cart.fixedToolbar())&&b.push('<li class="FotomotoECardButton"><a href="javascript:void(0);" name="ecard" class="FotomotoBarLink">'+FOTOMOTO_CONFIG.texts.ecard+"</a></li>"),a+=b.join(""),a+="</ul>",a+='<br class="FotomotoClear"/>'}return a},setImage:function(a,b){this.image=a,this.image_ref=b!=null&&b.parentNode!=null?b:a,this.checkImageAvailability(),this.fotomoto_postcards=FOTOMOTO_CONFIG.postcards;var c=new Image;FMJQ(c).bind("load",{obj:this},function(a){a.data.obj.image_width=this.width,a.data.obj.image_height=this.height}),c.src=this.image.src},checkImageAvailability:function(a){var b=FOTOMOTO_CONFIG.script_domain+"/stores/image_availability/?app_store_id="+encodeURIComponent(FOTOMOTO_CONFIG.app_widget_id)+"&widget_session_id="+encodeURIComponent(this.id)+"&image_url="+encodeURIComponent(this.image.src)+"&page_url="+encodeURIComponent(window.location.href);this.for_store?b+="&for_store="+this.for_store:b+="&"+FOTOMOTO.getForStore(this.image_ref),this.image_ref.parentNode==null&&(b+="&no_referer="),a!=null&&(b+="&menu_type="+a),b+="&cachebursted="+(new Date).getTime(),FMJQ.getScript(b),this.availabilityChecked=!0},showPage:function(a){var b="show"+FOTOMOTO.cap(a);this[b]&&typeof this[b]=="function"&&this[b]()},makeShow:function(a){return function(){return FOTOMOTO.Cart.setActiveWidget(this),FOTOMOTO.loadContent(a,this),!1}},showCard:function(){return FOTOMOTO.Cart.setActiveWidget(this),FOTOMOTO.loadContent("postcard",this),!1},showPremium:function(){return FOTOMOTO.Cart.setActiveWidget(this),FOTOMOTO.loadContent("print",this),!1},showFramed:function(){return FOTOMOTO.Cart.setActiveWidget(this),FOTOMOTO.loadContent("framed_print",this),!1},showSticky:function(){return FOTOMOTO.Cart.setActiveWidget(this),FOTOMOTO.loadContent("sticky_print",this),!1},setForStore:function(a){this.for_store=a},pageToLoad:function(a){return a=="license"&&this.button_status.digital_download_offered&&(a="digital_download"),a=="print"&&(this.button_status.premium_offered||this.button_status.fineart_offered?a="print":this.button_status.canvas_offered||this.button_status.framed_print_offered?a="canvas":this.button_status.sticky_print_offered&&(a="sticky_print")),a},initToolbarShare:function(){},showShareOptions:function(a,b){},toggleShareOptions:function(a){},loadFavorite:function(){if(!FOTOMOTO.BUYER.isLoggedIn)return;if(this.photo_favored!=-1){this.updateFavorite(this.photo_favored);return}var a=FOTOMOTO_CONFIG.buyer_domain+"/photos/is_favored/?store_key="+encodeURIComponent(FOTOMOTO_CONFIG.app_widget_id)+"&widget_id="+encodeURIComponent(this.id)+"&image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime();FMJQ.getScript(a)},updateFavorite:function(a){this.photo_favored=a;var b=FMJQ("#fm_favoriteOptions");this.photo_favored==1?(FMJQ(".favorite_"+this.id).addClass("FotomotoFavored"),b.html('<a href="'+FOTOMOTO_CONFIG.buyer_domain+'/photos/list" target="_blank">View favorite photos</a><a href="javascript:void(0);" onclick="FOTOMOTO.BUYER.removeFavorite()">Remove from favorites</a>')):(FMJQ(".favorite_"+this.id).removeClass("FotomotoFavored"),b.html('<a href="javascript:void(0);" onclick="FOTOMOTO.BUYER.addFavorite()">Add to favorites</a><a href="'+FOTOMOTO_CONFIG.buyer_domain+'/photos/list" target="_blank">View favorite photos</a>')),FMJQ("#fm_favoriteOptions a").bind("click",function(){FMJQ("#fm_favoriteOptions").hide()})},getProductList:function(){var a=[];return this.button_status!=null&&((this.button_status.premium_offered||this.button_status.fineart_offered)&&a.push("print"),this.button_status.sticky_print_offered&&a.push("sticky_print"),this.button_status.framed_print_offered&&a.push("framed_print"),this.button_status.canvas_offered&&a.push("canvas"),this.button_status.card_offered&&a.push("card"),this.button_status.license_offered&&a.push("license"),this.button_status.ecard_offered&&a.push("ecard")),a},showButtons:function(a){this.button_status=a,this.photo_id=a.photo_id,FOTOMOTO.Admin!=null&&FOTOMOTO.Admin.loggedIn&&FOTOMOTO.Admin.buildControlLayer(this);if(this.toolbar==null)return;var b=FMJQ("a[name='print']",this.toolbar).get(0),c=FMJQ("span.FotomotoSep1",this.toolbar).get(0),d=FMJQ("a[name='postcard']",this.toolbar).get(0),e=FMJQ("span.FotomotoSep2",this.toolbar).get(0),f=FMJQ("a[name='license']",this.toolbar).get(0),g=FMJQ("span.FotomotoSep3",this.toolbar).get(0),h=FMJQ("a[name='ecard']",this.toolbar).get(0);this.loadFavorite();if(b){switch(a.status){case"available":this.toolbar&&this.toolbar.id!="FotomotoToolbar"&&(FMJQ(b).unbind("click"),FMJQ(b).bind("click",{me:this},function(a){return FOTOMOTO.loadContent("print.html",a.data.me),!1}));break;case"soldout":this.print_available=!1;if(this.toolbar&&this.toolbar.id!="FotomotoToolbar"){FMJQ(b).unbind("click");try{if(b){var i=b.cloneNode(!0);i.innerHTML="SOLD OUT",b.parentNode.replaceChild(i,b),b=FMJQ("a[name='print']",this.toolbar).get(0)}}catch(j){}}break;case"unavailable":this.print_available=!1;if(this.toolbar&&this.toolbar.id!="FotomotoToolbar"){try{if(b){var i=b.cloneNode(!0);i.innerHTML=a.not_for_sale_text,b.parentNode.replaceChild(i,b),b=FMJQ("a[name='print']",this.toolbar).get(0)}if(d){var k=d.cloneNode(!0);k.innerHTML="",d.parentNode.replaceChild(k,d),d=FMJQ("a[name='postcard']",this.toolbar).get(0)}if(f){var l=f.cloneNode(!0);l.innerHTML="",f.parentNode.replaceChild(l,f),f=FMJQ("a[name='license']",this.toolbar).get(0)}}catch(j){}FMJQ(b).unbind("click"),FMJQ(b).click(function(){FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.unvailable_message)}),e&&FMJQ(e).css("display","none"),g&&FMJQ(g).css("display","none")}break;case"private":this.print_available=!1}this.toolbar&&this.toolbar.id!="FotomotoToolbar"&&(a.print_offered||(b&&FMJQ(b).css("display","none"),c&&FMJQ(c).css("display","none")),a.card_offered||(d&&FMJQ(d).css("display","none"),e&&FMJQ(e).css("display","none")),a.license_offered||(f&&FMJQ(f).css("display","none"),g&&FMJQ(g).css("display","none")),a.ecard_offered||h&&FMJQ(h).css("display","none"),a.status!="available"&&b&&FMJQ(b).css("display",""),FMJQ(b).css("visibility",""),c&&(FMJQ(c).css("visibility",""),a.status=="unavailable"&&a.not_for_sale_text==""&&(c&&FMJQ(c).css("display","none"),e&&FMJQ(e).css("display","none"),g&&FMJQ(g).css("display","none"))))}a.status!="private"?((a.print_offered||a.card_offered||a.ecard_offered||a.license_offered)&&FMJQ(this.toolbar).removeClass("FotomotoNoToolbar"),FMJQ(this.toolbar).show()):(FMJQ(this.toolbar).addClass("FotomotoNoToolbar"),FOTOMOTO_CONFIG.showing_no_toolbar=="space"&&(FMJQ(this.toolbar).css("visibility","hidden"),FMJQ(this.toolbar).removeClass("FotomotoNoToolbar")))},previewPhoto:function(){var a=this.getImageBoxSize(this.image_width,this.image_height),b='<div class="fm-cart-image-wrapper fm-inline-block"> <img class="nofotomoto" src="{{img_src}}" width="{{width}}px" height="{{height}}px"></div>',c={root:FOTOMOTO_CONFIG.static_domain,img_src:this.image.src,height:a.height,width:a.width,top:0,left:0};return Mustache.render(b,c)},previewCropPhoto:function(a,b){var c=this.getImageBoxSize(this.image_width,this.image_height),d=this.getBoxScale(a.width,a.height,c.width,c.height),e=d.height,f=parseInt(e*c.width/c.height);f<d.width&&(f=d.width,e=parseInt(f*c.height/c.width));var g=b.top/(a.width/d.width),h=b.left/(a.width/d.width),i='<div class="fm-cart-image-wrapper fm-inline-block"> <span class="fm-mask"></span> <img class="nofotomoto" src="{{img_src}}" width="{{width}}px" height="{{height}}px"> <div class="fm-scroll-view fm-image-crop" style="margin:auto;overflow:hidden;width:{{box_width}}px;height:{{box_height}}px;top:{{top}}px;left:{{left}}px" scrolltop="{{top}}" scrollleft="{{left}}"><img class="nofotomoto" src="{{img_src}}" width="{{width}}px" height="{{height}}px"></div></div>',j={root:FOTOMOTO_CONFIG.static_domain,img_src:this.image.src,box_height:d.height,box_width:d.width,height:e,width:f,top:g,left:h};return Mustache.render(i,j)},getImageBoxWidth:function(){return this.getImageBoxSize(this.image_width,this.image_height).width},getImageBoxHeight:function(){return this.getImageBoxSize(this.image_width,this.image_height).height},getImageBoxSize:function(a,b){var c=150,d=126;return this.getBoxScale(a,b,c,d)},getBoxScale:function(a,b,c,d){var e=a,f=b;return a<=c&&b<=d?{width:parseInt(e),height:parseInt(f)}:(a>=b?(e=c,f=c/a*b,f>d&&(f=d,e=d/b*a)):(f=d,e=d/b*a,e>c&&(e=c,f=c/a*b)),{width:parseInt(e),height:parseInt(f)})},getImageBoxCropTop:function(){return-1*this.cropPoint.top/4},getImageBoxCropLeft:function(){return-1*this.cropPoint.left/4},getWidgetContent:function(){return this.widgetContent},isEmpty:function(){for(var a=0;a<this.items.length;a++)if(this.items[a].temp==0&&this.items[a].numOfItems>0)return!1;return!0},empty:function(){this.items=[],this.framed=!1,this.frameType={id:"frame1",value:20},this.cropPoint=null,this.fotomoto_prints=[],this.fotomoto_finearts=[],this.fotomoto_canvases=[],this.fotomoto_framed_prints=[],this.fotomoto_print_frames=[],this.fotomoto_fineart_frames=[],this.fotomoto_sticky_prints=[],this.print_standard=2,this.fineart_flexible_print=1,this.canvas_flexible_print=1,this.customized_print_unique_id=null,this.current_print=null,this.fotomoto_postcards=[],this.fotomoto_licenses=[],this.customized_postcard_unique_id=null,this.customized_license_unique_id=null,this.current_postcard=null,this.current_license=null},isPremiumPrint:function(a){return/^prints/.test(a)},isFineart:function(a){return/^finearts/.test(a)},isCanvas:function(a){return/^canvases/.test(a)},isFramedPrint:function(a){return/^framed_prints/.test(a)},addItem:function(a,b,c,d,e){e==null&&(e=!1);var f=null;return this.isPremiumPrint(a)&&(f=new FOTOMOTO.PurchasedItem(a,b,c,d)),this.isFineart(a)&&(f=new FOTOMOTO.FineartItem(a,b,c,d)),this.isCanvas(a)&&(f=new FOTOMOTO.CanvasItem(a,b,c,d)),this.isFramedPrint(a)&&(f=new FOTOMOTO.FramedPrintItem(a,b,c,d)),f.widget=this,f.temp=e,this.items[this.items.length]=f,f},removeItem:function(a){var b=this.getItemIndexByUniqueId(a);b!=-1&&this.items.splice(b,1),FOTOMOTO.Cart.scrollTheCart(),FOTOMOTO.Cart.updateViewCartTotalItems()},getItemIndexById:function(a){for(var b=0;b<this.items.length;b++)if(this.items[b].id==a)return b;return-1},getItemIndexByUniqueId:function(a){for(var b=0;b<this.items.length;b++)if(this.items[b].unique_id==a)return b;return-1},getItemByUniqueId:function(a){var b=this.getItemIndexByUniqueId(a);return b==-1?null:this.items[b]},getPrintItem:function(){for(var a=0;a<this.items.length;a++)if(/^prints/.test(this.items[a].id))return this.items[a];return null},getPrintDataByPrintId:function(a){for(var b=0;b<this.fotomoto_prints.length;b++)if(this.fotomoto_prints[b].id==a)return this.fotomoto_prints[b];return null},getFineartDataByFineartId:function(a){for(var b=0;b<this.fotomoto_finearts.length;b++)if(this.fotomoto_finearts[b].id==a)return this.fotomoto_finearts[b];return null},getFramedPrintDataByPrintId:function(a){for(var b=0;b<this.fotomoto_framed_prints.length;b++)if(this.fotomoto_framed_prints[b].id==a)return this.fotomoto_framed_prints[b];return null},getPrintFramesDataByPrintId:function(a){for(var b=0;b<this.fotomoto_print_frames.length;b++)if(this.fotomoto_print_frames[b].id==a)return this.fotomoto_print_frames[b];return null},getFineartFramesDataByPrintId:function(a){for(var b=0;b<this.fotomoto_fineart_frames.length;b++)if(this.fotomoto_fineart_frames[b].id==a)return this.fotomoto_fineart_frames[b];return null},getStickyPrintDataByPrintId:function(a){for(var b=0;b<this.fotomoto_sticky_prints.length;b++)if(this.fotomoto_sticky_prints[b].id==a)return this.fotomoto_sticky_prints[b];return null},getCanvasDataByCanvasId:function(a){for(var b=0;b<this.fotomoto_canvases.length;b++)if(this.fotomoto_canvases[b].id==a)return this.fotomoto_canvases[b];return null},getPostcardDataByPostcardId:function(a){for(var b=0;b<this.fotomoto_postcards.length;b++)if(this.fotomoto_postcards[b].id==a)return this.fotomoto_postcards[b];return null},getLicenseDataByLicenseId:function(a){for(var b=0;b<this.fotomoto_licenses.length;b++)if(this.fotomoto_licenses[b].id==a)return this.fotomoto_licenses[b];return null},getWidgetTotalForTax:function(){var a=0;for(var b=0;b<this.items.length;b++){var c=this.items[b].getPrice()*this.items[b].numOfItems;if(/^prints/.test(this.items[b].id)||/^postcards/.test(this.items[b].id)||/^finearts/.test(this.items[b].id)||/^canvases/.test(this.items[b].id)||/^framed_prints/.test(this.items[b].id)||/^print_frames/.test(this.items[b].id)||/^fineart_frames/.test(this.items[b].id)||/^sticky_prints/.test(this.items[b].id))a+=c}return a},getWidgetTotal:function(){var a=0;for(var b=0;b<this.items.length;b++){var c=this.items[b].getPrice()*this.items[b].numOfItems;a+=c,/^prints/.test(this.items[b].id)&&this.framed&&(a+=this.items[b].numOfItems*this.frameType.value)}return a},updateNumItems:function(a){FOTOMOTO.get(a+"_numitems").val(FMJQ.trim(FOTOMOTO.get(a+"_numitems").val()));var b=FOTOMOTO.get(a+"_numitems").val(),c=this.getItemIndexByUniqueId(a);if(/\d/.test(FOTOMOTO.get(a+"_numitems").val())){b=parseInt(b),b<0&&(b=0);var d=this.getItemByUniqueId(a);FOTOMOTO.get(a+"_numitems").val(b),this.items[c].numOfItems=b,this.items[c].updatePrice()}else FOTOMOTO.get(a+"_numitems").val(this.items[c].numOfItems)},cartItems:function(){var a=[];for(i=0;i<this.items.length;i++)a.push(this.items[i].cartItem());return a},closeWidget:function(){FOTOMOTO.showFotomotoPageByWidget(!1,this)},toJSON:function(){var a=[];for(var b=0;b<this.items.length;b++)a[a.length]=this.items[b].toJSON();return a.toJSON=null,{id:this.id,image_width:this.image_width,image_height:this.image_height,print_standard:this.print_standard,fineart_flexible_print:this.fineart_flexible_print,canvas_flexible_print:this.canvas_flexible_print,image:this.image.src,frameType:this.framed?this.frameType.id:"",items:a,mail_postcards:[]}},getPrintIds:function(a){var b=[];for(var c=0;c<this.items.length;c++)if(/^prints/.test(this.items[c].id)){var d=this.photo_id+"|"+this.items[c].id.replace(/^prints/,"");a!=null&&(d+="|"+this.items[c].numOfItems),b.push(d)}return b},getFineartIds:function(a,b){var c=[];for(var d=0;d<this.items.length;d++)if(/^finearts/.test(this.items[d].id)){var e=this.photo_id+"|"+this.items[d].id.replace(/^finearts/,"");a!=null&&(e+="|"+this.items[d].numOfItems),b!=null&&(e+="|"+this.items[d].paperType.replace(/_/,",")),c.push(e)}return c},getCanvasIds:function(a,b){var c=[];for(var d=0;d<this.items.length;d++)if(/^canvases/.test(this.items[d].id)){var e=this.photo_id+"|"+this.items[d].id.replace(/^canvases/,"");a!=null&&(e+="|"+this.items[d].numOfItems),b!=null&&(e+="|"+this.items[d].frameStyle.replace(/_/,",")),c.push(e)}return c},getFramedPrintIds:function(a,b){var c=[];for(var d=0;d<this.items.length;d++)if(/^framed_prints/.test(this.items[d].id)){var e=this.photo_id+"|"+this.items[d].id.replace(/^framed_prints/,"");a!=null&&(e+="|"+this.items[d].numOfItems),b!=null&&(e+="|"+this.items[d].frameStyle.replace(/_/,",")),c.push(e)}return c},getPrintFramesIds:function(a,b){var c=[];for(var d=0;d<this.items.length;d++)if(/^print_frames/.test(this.items[d].id)){var e=this.photo_id+"|"+this.items[d].id.replace(/^print_frames/,"");a!=null&&(e+="|"+this.items[d].numOfItems),b!=null&&(e+="|"+this.items[d].frameStyle.replace(/_/,",")),c.push(e)}return c},getFineartFramesIds:function(a,b){var c=[];for(var d=0;d<this.items.length;d++)if(/^fineart_frames/.test(this.items[d].id)){var e=this.photo_id+"|"+this.items[d].id.replace(/^fineart_frames/,"");a!=null&&(e+="|"+this.items[d].numOfItems),b!=null&&(e+="|"+this.items[d].frameStyle.replace(/_/,",")),c.push(e)}return c},getStickyPrintIds:function(a,b){var c=[];for(var d=0;d<this.items.length;d++)if(/^sticky_prints/.test(this.items[d].id)){var e=this.photo_id+"|"+this.items[d].id.replace(/^sticky_prints/,"");a!=null&&(e+="|"+this.items[d].numOfItems),e+="|"+this.items[d].name,c.push(e)}return c},getPostcardIds:function(a){var b=[];for(var c=0;c<this.items.length;c++)if(/^postcards/.test(this.items[c].id)){var d=this.photo_id+"|"+this.items[c].id.replace(/^postcards/,"");a!=null&&(d+="|"+this.items[c].numOfItems),b.push(d)}return b},getLicenseIds:function(a){var b=[];for(var c=0;c<this.items.length;c++)if(/^licenses/.test(this.items[c].id)){var d=this.photo_id+"|"+this.items[c].id.replace(/^licenses/,"");a!=null&&(d+="|"+this.items[c].numOfItems),b.push(d)}return b},totalPostcards:function(){var a=0;for(var b=0;b<this.items.length;b++)/^postcards/.test(this.items[b].id)&&(a+=this.items[b].numOfItems);return a},totalLicenses:function(){var a=0;for(var b=0;b<this.items.length;b++)/^licenses/.test(this.items[b].id)&&(a+=this.items[b].numOfItems);return a},totalPostcardPrice:function(){var a=0;for(var b=0;b<this.items.length;b++)/^postcards/.test(this.items[b].id)&&(a+=this.items[b].numOfItems*this.items[b].getPrice());return a},setPrintPaperType:function(a){var b=this.current_print;b&&(b.paperType=a)},loadJSON:function(a){this.fineart_flexible_print=a.fineart_flexible_print,this.canvas_flexible_print=a.canvas_flexible_print,this.print_standard=a.print_standard;if(this.image==null){var b=document.createElement("img");b.src=a.image,b.style.display="none",b.width=a.image_width,b.height=a.image_height,image_width=a.image_width,image_height=a.image_height,this.setImage(b)}var c=a.items;if(c==null)return;for(var d=c.length-1;d>=0;d--){var e=c[d],f=null;/^prints/.test(e.id)&&(f=new FOTOMOTO.PurchasedItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^finearts/.test(e.id)&&(f=new FOTOMOTO.FineartItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^canvases/.test(e.id)&&(f=new FOTOMOTO.CanvasItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^framed_prints/.test(e.id)&&(f=new FOTOMOTO.FramedPrintItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^print_frames/.test(e.id)&&(f=new FOTOMOTO.PrintFramesItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^fineart_frames/.test(e.id)&&(f=new FOTOMOTO.FineartFramesItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^sticky_prints/.test(e.id)&&(f=new FOTOMOTO.StickyPrintItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^postcards/.test(e.id)&&(f=new FOTOMOTO.PostcardItem(e.id,e.name,e.price,e.quantity),f.widget=this,f.loadJSON(e)),/^licenses/.test(e.id)&&(f=new FOTOMOTO.LicenseItem(e.id,e.name,e.price,e.quantity),f.itemType=e.item_type,f.widget=this),f!=null&&this.items.push(f)}if(this.fotomoto_prints.length==0&&this.getPrintIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/print_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_finearts.length==0&&this.getFineartIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/fineart_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_canvases.length==0&&this.getCanvasIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/canvas_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_framed_prints.length==0&&this.getFramedPrintIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/framed_print_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_print_frames.length==0&&this.getPrintFramesIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/print_frames_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_fineart_frames.length==0&&this.getFineartFramesIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/fineart_frames_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_sticky_prints.length==0&&this.getStickyPrintIds()!=""){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/sticky_print_data/"+this.id+"/?image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(this.fotomoto_digital_downloads.length==0&&this.getTotalDigitalDownloadItem()>0){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/digital_download/"+this.id+"/?data_only=1&image_url="+encodeURIComponent(this.image.src)+"&cachebursted="+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}},getTotalItems:function(){var a=0;for(var b=0;b<this.items.length;b++)a+=this.items[b].numOfItems;return a},getTotalDigitalDownloadItem:function(){var a=0;for(var b=0;b<this.items.length;b++)this.items[b].itemType=="digital_download"&&(a+=this.items[b].numOfItems);return a},updateLicenseData:function(a){for(var b=0;b<this.items.length;b++)/^licenses/.test(this.items[b].id)&&(this.items[b].id=a.id,this.items[b].price=a.price,this.items[b].name=a.name)},consolidate:function(){var a=!0;while(a){a=!1;for(var b=0;b<this.items.length;b++)if(this.items[b].temp||this.items[b].numOfItems==0){this.items.splice(b,1),a=!0;break}}var a=!0;while(a){a=!1;for(var b=0;b<this.items.length-1;b++){for(var c=b+1;c<this.items.length;c++)if(/^prints/.test(this.items[b].id)&&/^prints/.test(this.items[c].id)&&this.items[b].isEqual(this.items[c])){this.items[b].numOfItems+=1,this.items.splice(c,1),a=!0;break}if(a)break}}}},function(){var a=function(a){var b="show"+FOTOMOTO.cap(a),c=FOTOMOTO.WidgetBar.prototype;c[b]=c.makeShow(a)},b=["buy","print","postcard","canvas","fineart","ecard","license"];for(i in b)a(b[i])}(),FOTOMOTO.WidgetBar.createFixedToolbar=function(){var a=(new FOTOMOTO.WidgetBar(null,"","")).getToolbarContent();FMJQ.trim(FMJQ("#FotomotoToolbar").html())==""&&(FMJQ("#FotomotoToolbar").html(a),FOTOMOTO.API.apiMode()||FMJQ.onContentReady("FotomotoToolbar",function(){var a=FMJQ("a.FotomotoBarLink",this.toolbar);for(var b=0;b<a.length;b++){var c=a[b];FMJQ(c).click(function(a){FOTOMOTO.Cart.selectPhotos(this.name)})}}))},FOTOMOTO.PurchasedItem=function(a,b,c,d,e){this.unique_id=FOTOMOTO.generate_unique_id(),this.id=a,this.name=b,this.price=parseFloat(c),this.numOfItems=d,this.paperType=e||FOTOMOTO_CONFIG.default_paper_type,this.widget=null,this.cropPoint={top:-1,left:-1},this.rotate=0,this.windowSize={width:0,height:0},this.createdAt=new Date,this.temp=!1,this.itemType=""},FOTOMOTO.PurchasedItem.prototype={collectionObject:"Print",plural:"prints",itemType:"premium_print",getWidget:function(){return this.widget?this.widget:FOTOMOTO.Cart.getActiveWidget()},updatePrice:function(a){FOTOMOTO.get(this.unique_id+"_numitems").val(this.numOfItems),a==null&&(a=this.getPrice()*this.numOfItems),FMJQ("#"+this.unique_id+"_total").removeData("original_amount"),FMJQ("#"+this.unique_id+"_total").html(FOTOMOTO.Cart.formatPrice(a))},getPrice:function(){return this.price},nameFormatter:function(a){return'<span class="fm_unit">'+a.name.replace(/&quot;/g,"")+"</span><br/>Photographic Print"},formattedName:function(){var a=new RegExp("^"+this.plural,"i");if(a.test(this.id)){var b=FOTOMOTO.getItemByListAndId(this.getWidget()["fotomoto_"+this.plural],this.id);b&&(this.name=this.nameFormatter(b))}return this.name},itemOptions:function(){return{itemOptions:[FOTOMOTO.capitalize(this.paperType)+" Paper"]}},formattedOptions:function(){return Mustache.render('<ul class="fm-item-options">{{#itemOptions}}<li>{{.}}</li>{{/itemOptions}}</ul>',this.itemOptions())},printPhoto:function(){return this.isFlexible()?this.widget.previewPhoto():this.widget.previewCropPhoto(this.windowSize,this.cropPoint)},isFlexible:function(){return this.getWidget().print_standard!=1},desc:function(){return FOTOMOTO.capitalize(this.paperType)+" Paper"},loadJSON:function(a){this.paperType=a.paper,this.cropPoint=a.cropPoint,this.windowSize=a.windowSize},toJSON:function(){return this.cropPoint.top==-1&&(this.cropPoint.top=0),this.cropPoint.left==-1&&(this.cropPoint.left=0),{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,paper:this.paperType,cropPoint:this.cropPoint,windowSize:this.windowSize}},cartItem:function(){return{id:this.unique_id,item_type:this.itemType,title:this.formattedName(),options:this.formattedOptions(),price:FOTOMOTO.Cart.formatPrice(this.getPrice()),quantity:this.numOfItems,total:FOTOMOTO.Cart.formatPrice(this.getPrice()*this.numOfItems),preview:this.printPhoto()}},isEqual:function(a){return this.id==a.id&&this.paperType==a.paperType&&(this.getWidget().print_standard==2||this.getWidget().print_standard==1&&this.cropPoint.top==a.cropPoint.top&&this.cropPoint.left==a.cropPoint.left)?!0:!1}},FOTOMOTO.FineartItem=function(a,b,c,d,e){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.paperType=e||FOTOMOTO_CONFIG.default_fineart_paper
,this.collectionObject="Print",this.plural="",this.itemType="fineart"},FOTOMOTO.FineartItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.FineartItem.prototype.isFlexible=function(){return this.getWidget().fineart_flexible_print==1},FOTOMOTO.FineartItem.prototype.itemOptions=function(){var a=[];switch(this.paperType){case"hot_press":a.push("Hot Press Bright (Smooth)");break;case"cold_press":a.push("Cold Press Bright (Textured)");break;case"exhibition_fiber":a.push("Exhibition Fiber")}return{itemOptions:a}},FOTOMOTO.FineartItem.prototype.formattedName=function(){return'<span class="fm_unit">'+this.name+"</span><br/>Fineart Print"},FOTOMOTO.CanvasItem=function(a,b,c,d,e,f,g,h){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.frameStyle="gallery_wrap",this.wrapOption=g||"Over-edge",this.hangingType=h||"Sawtooth Hangers",this.paperType=e||"Glossy",this.collectionObject="Canvas",this.plural="canvases",this.itemType="canvas"},FOTOMOTO.CanvasItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.CanvasItem.prototype.frameStyleName=function(a){switch(a){case"gallery_wrap":return"Gallery Wrap";case"board_wrap":return"Board Wrap";case"board_mounted":return"Board Mounted"}return"Gallery Wrap"},FOTOMOTO.CanvasItem.prototype.isFlexible=function(){return this.getWidget().canvas_flexible_print==1},FOTOMOTO.CanvasItem.prototype.itemOptions=function(){var a=[];return this.frameStyle!="board_mounted"&&a.push(this.wrapOption+" Wrap"),{itemOptions:a}},FOTOMOTO.CanvasItem.prototype.nameFormatter=function(a){return'<span class="fm_unit">'+a.name.replace(/&quot;/g,"")+"</span><br/>Canvas Print"},FOTOMOTO.CanvasItem.prototype.loadJSON=function(a){this.paperType=a.paper,this.frameStyle=a.frame_style,this.wrapOption=a.wrap_option,this.hangingType=a.hanging_type,this.cropPoint=a.cropPoint,this.windowSize=a.windowSize},FOTOMOTO.CanvasItem.prototype.toJSON=function(){return this.cropPoint.top==-1&&(this.cropPoint.top=0),this.cropPoint.left==-1&&(this.cropPoint.left=0),{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,paper:this.paperType,frame_style:this.frameStyle,hanging_type:this.hangingType,wrap_option:this.wrapOption,cropPoint:this.cropPoint,windowSize:this.windowSize}},FOTOMOTO.LicenseItem=function(a,b,c,d){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.collectionObject="License",this.plural="licenses",this.itemType="license"},FOTOMOTO.LicenseItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.LicenseItem.prototype.itemOptions=function(){return{itemOptions:[]}},FOTOMOTO.LicenseItem.prototype.isFlexible=function(){return!0},FOTOMOTO.LicenseItem.prototype.getPrice=function(){return this.price},FOTOMOTO.LicenseItem.prototype.toJSON=function(){return{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,item_type:this.itemType}},FOTOMOTO.LicenseItem.prototype.isEqual=function(a){return this.id==a.id},FOTOMOTO.LicenseItem.prototype.nameFormatter=function(a){return a.name},FOTOMOTO.PostcardItem=function(a,b,c,d,e,f,g,h,i,j,k){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.trimType=e||"crop",this.cropPoint=f||{top:-1,left:-1,width:0,height:0},this.windowSize={width:415,height:296},this.hasMessage=!!g,this.messageParams=h||{message:"",font:"arial",font_size:65,align:"left",style:"regular"},this.rotate=i||0,this.orientation=j||0,this.bgcolor=k||"FFFFFF",this.collectionObject="Card",this.plural="postcards",this.itemType="postcard"},FOTOMOTO.PostcardItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.PostcardItem.prototype.isFlexible=function(){return!0},FOTOMOTO.PostcardItem.prototype.getPrice=function(){return this.hasMessage?this.price+FOTOMOTO_CONFIG.postcard_message_fee:this.price},FOTOMOTO.PostcardItem.prototype.toJSON=function(){var a=FMJQ.extend({},this.messageParams);return a.message=encodeURIComponent(a.message),{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,trimType:this.trimType,rotate:this.rotate,orientation:this.orientation,bgcolor:this.bgcolor,windowSize:this.windowSize,cropPoint:this.cropPoint,hasMessage:this.hasMessage,messageParams:a}},FOTOMOTO.PostcardItem.prototype.loadJSON=function(a){this.bgcolor=a.bgcolor,this.trimType=a.trimType,this.rotate=a.rotate,this.orientation=a.orientation,this.cropPoint=a.cropPoint,this.hasMessage=a.hasMessage,this.messageParams=a.messageParams,this.windowSize=a.windowSize},FOTOMOTO.PostcardItem.prototype.isEqual=function(a){if(this.trimType!=a.trimType)return!1;if(this.hasMessage!=a.hasMessage)return!1;var b=!1;return this.hasMessage?this.messageParams.message==a.messageParams.message&&this.messageParams.font==a.messageParams.font&&this.messageParams.font_size==a.messageParams.font_size&&this.messageParams.style==a.messageParams.style&&this.messageParams.align==a.messageParams.align&&(b=!0):b=!0,a.trimType=="fit"?this.id==a.id&&this.bgcolor==a.bgcolor&&this.rotate==a.rotate&&this.orientation==a.orientation&&b:a.trimType=="crop"?this.id==a.id&&this.cropPoint.top==a.cropPoint.top&&this.cropPoint.left==a.cropPoint.left&&this.rotate==a.rotate&&this.orientation==a.orientation&&b:!1},FOTOMOTO.PostcardItem.prototype.printPhoto=function(){if(this.trimType=="crop")return this.widget.previewCropPhoto(this.windowSize,this.cropPoint)},FOTOMOTO.PostcardItem.prototype.postcardFront=function(){return FOTOMOTO_CONFIG.posted_domain+"/dynimage/postcard_photo?store_id="+FOTOMOTO_CONFIG.app_widget_id+"&photo_url="+encodeURIComponent(this.getWidget().image.src)},FOTOMOTO.PostcardItem.prototype.postcardBack=function(){return FOTOMOTO_CONFIG.posted_domain+"/dynimage/postcard_back?store_id="+FOTOMOTO_CONFIG.app_widget_id+"&photo_url="+encodeURIComponent(this.getWidget().image.src)},FOTOMOTO.PostcardItem.prototype.itemOptions=function(){return{itemOptions:[]}},FOTOMOTO.PostcardItem.prototype.nameFormatter=function(a){if(a.postcard_type&&a.size)var b=FOTOMOTO.capitalize(a.postcard_type.replace(/_/," "))+" "+'<span class="fm_unit">'+a.size.replace(/&quot;/g,"")+"</span>";else var b=a.name;return b},FOTOMOTO.FramedPrintItem=function(a,b,c,d,e,f,g,h,i,j,k){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.paperType=e||"glossy",this.trimType=f||"crop",this.cropPoint=g||{top:-1,left:-1,width:0,height:0},this.frameStyle=h||"Flat Frame",this.frameColor=i||"Black",this.frameMatType=j||"Single Mat",this.frameMatColor=k||"Off-White",this.windowSize={width:415,height:296},this.collectionObject="FramedPrint",this.plural="framedprints",this.itemType="framed_print"},FOTOMOTO.FramedPrintItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.FramedPrintItem.prototype.isFlexible=function(){return!1},FOTOMOTO.FramedPrintItem.prototype.itemOptions=function(){var a=[];return a.push(this.frameColor),a.push(this.frameStyle),a.push(this.frameMatType),{itemOptions:a}},FOTOMOTO.FramedPrintItem.prototype.formattedName=function(){return FOTOMOTO.Cart.formatSize(this.name.replace(/\"/g,""))+"<br/>Framed Print"},FOTOMOTO.FramedPrintItem.prototype.printPhoto=function(){if(this.trimType=="crop")return this.widget.previewCropPhoto(this.windowSize,this.cropPoint)},FOTOMOTO.FramedPrintItem.prototype.toJSON=function(){return{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,trimType:this.trimType,frameStyle:this.frameStyle,frameMatType:this.frameMatType,frameColor:this.frameColor,cropPoint:this.cropPoint,frameMatColor:this.frameMatColor,paper:this.paperType,windowSize:this.windowSize}},FOTOMOTO.FramedPrintItem.prototype.loadJSON=function(a){this.trimType=a.trimType,this.cropPoint=a.cropPoint,this.frameStyle=a.frameStyle,this.frameColor=a.frameColor,this.frameMatType=a.frameMatType,this.frameMatColor=a.frameMatColor,this.paperType=a.paper,this.windowSize=a.windowSize},FOTOMOTO.FramedPrintItem.prototype.isEqual=function(a){return this.id==a.id&&this.cropPoint.top==a.cropPoint.top&&this.cropPoint.left==a.cropPoint.left?!0:!1},FOTOMOTO.PrintFramesItem=function(a,b,c,d,e,f,g,h,i,j,k){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.paperType=e||"glossy",this.trimType=f||"fit",this.cropPoint=g||{top:-1,left:-1,width:0,height:0},this.frameStyle=h||"Flat Frame",this.frameColor=i||"Black",this.frameMatType=j||"Single Mat",this.frameMatColor=k||"Off-White",this.windowSize={width:415,height:296},this.collectionObject="PrintFrames",this.plural="printframes",this.itemType="print_frame"},FOTOMOTO.PrintFramesItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.PrintFramesItem.prototype.isFlexible=function(){return!1},FOTOMOTO.PrintFramesItem.prototype.desc=function(){return this.frameMatType=="Single Mat"?"<b>"+this.frameColor+" "+this.frameStyle+"<br/>"+this.frameMatColor+" "+this.frameMatType+"</b>":"<b>"+this.frameColor+" "+this.frameStyle+"<br/>"+this.frameMatType+"</b>"},FOTOMOTO.PrintFramesItem.prototype.formattedName=function(){return"Framed Print "+FOTOMOTO.Cart.formatSize(this.name.replace(/\"/g,""))},FOTOMOTO.PrintFramesItem.prototype.printPhoto=function(a){this.trimType=="crop"&&this.widget.previewCropPhoto(a,this.windowSize,this.cropPoint),this.trimType=="fit"&&this.widget.previewFitPhoto(a,this.windowSize,this.bgcolor)},FOTOMOTO.PrintFramesItem.prototype.toJSON=function(){return{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,trimType:this.trimType,frameStyle:this.frameStyle,frameMatType:this.frameMatType,frameColor:this.frameColor,cropPoint:this.cropPoint,frameMatColor:this.frameMatColor,paper:this.paperType,windowSize:this.windowSize}},FOTOMOTO.PrintFramesItem.prototype.loadJSON=function(a){this.trimType=a.trimType,this.cropPoint=a.cropPoint,this.frameStyle=a.frameStyle,this.frameColor=a.frameColor,this.frameMatType=a.frameMatType,this.frameMatColor=a.frameMatColor,this.paperType=a.paper,this.windowSize=a.windowSize},FOTOMOTO.PrintFramesItem.prototype.isEqual=function(a){return this.id==a.id&&this.cropPoint.top==a.cropPoint.top&&this.cropPoint.left==a.cropPoint.left?!0:!1},FOTOMOTO.FineartFramesItem=function(a,b,c,d,e,f,g,h,i,j,k){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.paperType=e||"glossy",this.trimType=f||"fit",this.cropPoint=g||{top:-1,left:-1,width:0,height:0},this.frameStyle=h||"Flat Frame",this.frameColor=i||"Black",this.frameMatType=j||"Single Mat",this.frameMatColor=k||"Off-White",this.windowSize={width:415,height:296},this.collectionObject="FineartFrames",this.plural="fineartframes",this.itemType="fineart_frame"},FOTOMOTO.FineartFramesItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.FineartFramesItem.prototype.isFlexible=function(){return!1},FOTOMOTO.FineartFramesItem.prototype.desc=function(){return this.frameMatType=="Single Mat"?"<b>"+this.frameColor+" "+this.frameStyle+"<br/>"+this.frameMatColor+" "+this.frameMatType+"</b>":"<b>"+this.frameColor+" "+this.frameStyle+"<br/>"+this.frameMatType+"</b>"},FOTOMOTO.FineartFramesItem.prototype.formattedName=function(){return"Fineart Frames "+FOTOMOTO.Cart.formatSize(this.name.replace(/\"/g,""))},FOTOMOTO.PrintFramesItem.prototype.printPhoto=function(a){this.trimType=="crop"&&this.widget.previewCropPhoto(a,this.windowSize,this.cropPoint),this.trimType=="fit"&&this.widget.previewFitPhoto(a,this.windowSize,this.bgcolor)},FOTOMOTO.FineartFramesItem.prototype.toJSON=function(){return{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,trimType:this.trimType,frameStyle:this.frameStyle,frameMatType:this.frameMatType,frameColor:this.frameColor,cropPoint:this.cropPoint,frameMatColor:this.frameMatColor,paper:this.paperType,windowSize:this.windowSize}},FOTOMOTO.FineartFramesItem.prototype.loadJSON=function(a){this.trimType=a.trimType,this.cropPoint=a.cropPoint,this.frameStyle=a.frameStyle,this.frameColor=a.frameColor,this.frameMatType=a.frameMatType,this.frameMatColor=a.frameMatColor,this.paperType=a.paper,this.windowSize=a.windowSize},FOTOMOTO.FineartFramesItem.prototype.isEqual=function(a){return this.id==a.id&&this.cropPoint.top==a.cropPoint.top&&this.cropPoint.left==a.cropPoint.left?!0:!1},FOTOMOTO.StickyPrintItem=function(a,b,c,d,e,f){FOTOMOTO.PurchasedItem.call(this,a,b,c,d),this.trimType=e||"fit",this.cropPoint=f||{top:-1,left:-1,width:0,height:0},this.windowSize={width:415,height:296},this.collectionObject="StickyPrint",this.plural="stickyprints",this.itemType="sticky_print"},FOTOMOTO.StickyPrintItem.prototype=new FOTOMOTO.PurchasedItem,FOTOMOTO.StickyPrintItem.prototype.getPrice=function(){return this.price},FOTOMOTO.StickyPrintItem.prototype.isFlexible=function(){return!1},FOTOMOTO.StickyPrintItem.prototype.itemOptions=function(){return{itemOptions:[]}},FOTOMOTO.StickyPrintItem.prototype.formattedName=function(){return FOTOMOTO.Cart.formatSize(this.name.replace(/\"/g,""))+"<br/> Wall Peel"},FOTOMOTO.StickyPrintItem.prototype.printPhoto=function(){if(this.trimType=="crop")return this.widget.previewCropPhoto(this.windowSize,this.cropPoint);if(this.trimType=="fit")return this.widget.previewPhoto()},FOTOMOTO.StickyPrintItem.prototype.toJSON=function(){return{id:this.id,name:this.name.replace(/&quot;/g,'"'),price:this.price,quantity:this.numOfItems,trimType:this.trimType,cropPoint:this.cropPoint,windowSize:this.windowSize}},FOTOMOTO.StickyPrintItem.prototype.loadJSON=function(a){this.trimType=a.trimType,this.cropPoint=a.cropPoint,this.windowSize=a.windowSize},FOTOMOTO.StickyPrintItem.prototype.isEqual=function(a){return this.id==a.id&&this.cropPoint.top==a.cropPoint.top&&this.cropPoint.left==a.cropPoint.left?!0:!1},FOTOMOTO.showWidgetBarButtons=function(a,b){var c=FOTOMOTO.Cart.getWidget(a);c.showButtons(b)},FOTOMOTO.Analytic=new FOTOMOTO.Class,FOTOMOTO.Analytic.prototype={init:function(){this.action=FOTOMOTO_CONFIG.script_domain+"/cart/analyze/?cachebursted="+(new Date).getTime()+"&FOTOMOTO_CP_data=",this.openedWidgets=[],this.store_id=null,this.photo_id=null,this.page=null},sendLoadBar:function(a){},sendOpenedWidget:function(a){},sendSelectItem:function(a){},sendEstimateDestination:function(a){},sendPreviewEcard:function(a){},sendCheckout:function(a){},sendLoadScreen:function(a,b){},sendRequest:function(a){},setAnalyticParams:function(a,b,c){this.store_id=a,this.photo_id=b,this.page=c},createCartAnalytics:function(){this.createAnalytics(this.store_id,this.photo_id,"checkout")},createAnalytics:function(a,b,c){if(!FOTOMOTO_CONFIG.log_analytics)return!1;var d=this.tracking_pixel(c);FMJQ("#"+FOTOMOTO.Cart.getActiveWidget().widgetContent.contentId).append(d)},getFormattedSize:function(a){var b=a.split("x");return parseFloat(b[0])+"x"+parseFloat(b[1])},tracking_pixel:function(a){return""}},FOTOMOTO.Analyzer=new FOTOMOTO.Analytic,FOTOMOTO.Cart.getSubTotal=function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].getWidgetTotal();return a},FOTOMOTO.Cart.getSubTotalForTax=function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].getWidgetTotalForTax();return a},FOTOMOTO.Cart.getTax=function(){var a=this.getSubTotalForTax()-this.getCouponOff();return a<0&&(a=0),FOTOMOTO.trimFloat(a*this.tax/100,2)},FOTOMOTO.Cart.getEstimatedLowestShipping=function(){if(this.shipping_country=="")return this.shipping=0,0;if(this.shippingMethods.length==0)return this.shipping=0,this.shipping;var a=FOTOMOTO.Cart.getTypeShippingMethods("print"),b=FOTOMOTO.Cart.getTypeShippingMethods("postcard"),c=FOTOMOTO.Cart.getTypeShippingMethods("fineart"),d=FOTOMOTO.Cart.getTypeShippingMethods("canvas"),e=FOTOMOTO.Cart.getTypeShippingMethods("framed_print"),f=FOTOMOTO.Cart.getTypeShippingMethods("print_frames"),g=FOTOMOTO.Cart.getTypeShippingMethods("fineart_frames"),h=FOTOMOTO.Cart.getTypeShippingMethods("sticky_print");this.shipping=0;if(this.shipping_id!=0){var i=!1;for(var j=0;j<a.length;j++)if(a[j].id==this.shipping_id){this.shipping+=a[j].fee,i=!0;break}i||(this.shipping_id=0)}if(this.postcard_shipping_id!=0){var i=!1;for(var j=0;j<b.length;j++)if(b[j].id==this.postcard_shipping_id){this.shipping+=b[j].fee,i=!0;break}i||(this.postcard_shipping_id=0)}if(this.fineart_shipping_id!=0){var i=!1;for(var j=0;j<c.length;j++)if(c[j].id==this.fineart_shipping_id){this.shipping+=c[j].fee,i=!0;break}i||(this.fineart_shipping_id=0)}if(this.canvas_shipping_id!=0){var i=!1;for(var j=0;j<d.length;j++)if(d[j].id==this.canvas_shipping_id){this.shipping+=d[j].fee,i=!0;break}i||(this.canvas_shipping_id=0)}if(this.framed_print_shipping_id!=0){var i=!1;for(var j=0;j<e.length;j++)if(e[j].id==this.framed_print_shipping_id){this.shipping+=e[j].fee,i=!0;break}i||(this.framed_print_shipping_id=0)}if(this.print_frames_shipping_id!=0){var i=!1;for(var j=0;j<f.length;j++)if(f[j].id==this.print_frames_shipping_id){this.shipping+=f[j].fee,i=!0;break}i||(this.print_frames_shipping_id=0)}if(this.fineart_frames_shipping_id!=0){var i=!1;for(var j=0;j<g.length;j++)if(g[j].id==this.fineart_frames_shipping_id){this.shipping+=g[j].fee,i=!0;break}i||(this.fineart_frames_shipping_id=0)}if(this.sticky_print_shipping_id!=0){var i=!1;for(var j=0;j<h.length;j++)if(h[j].id==this.sticky_print_shipping_id){this.shipping+=h[j].fee,i=!0;break}i||(this.sticky_print_shipping_id=0)}if(a.length>0&&this.shipping_id==0){var k=a[0];for(var j=1;j<a.length<0;j++)k=k.fee<a[j].fee?a[j]:k;this.shipping+=k.fee,this.shipping_id=k.id}if(b.length>0&&this.postcard_shipping_id==0){var k=b[0];for(var j=1;j<b.length<0;j++)k=k.fee<b[j].fee?b[j]:k;this.shipping+=k.fee,this.postcard_shipping_id=k.id}if(c.length>0&&this.fineart_shipping_id==0){var k=c[0];for(var j=1;j<c.length<0;j++)k=k.fee<c[j].fee?c[j]:k;this.shipping+=k.fee,this.fineart_shipping_id=k.id}if(d.length>0&&this.canvas_shipping_id==0){var k=d[0];for(var j=1;j<d.length<0;j++)k=k.fee<d[j].fee?d[j]:k;this.shipping+=k.fee,this.canvas_shipping_id=k.id}if(e.length>0&&this.framed_print_shipping_id==0){var k=e[0];for(var j=1;j<e.length<0;j++)k=k.fee<e[j].fee?e[j]:k;this.shipping+=k.fee,this.framed_print_shipping_id=k.id}f.length>0&&this.print_frames_shipping_id==0&&(this.shipping+=f[0].fee,this.print_frames_shipping_id=f[0].id),g.length>0&&this.fineart_frames_shipping_id==0&&(this.shipping+=g[0].fee,this.fineart_frames_shipping_id=g[0].id);if(h.length>0&&this.sticky_print_shipping_id==0){var k=h[0];for(var j=1;j<h.length<0;j++)k=k.fee<h[j].fee?h[j]:k;this.shipping+=k.fee,this.sticky_print_shipping_id=k.id}return this.shipping},FOTOMOTO.Cart.getShippingFee=function(a){return a.fee},FOTOMOTO.Cart.getGrandTotal=function(){return FOTOMOTO.trimFloat(this.getSubTotal()-this.getCouponOff()+this.getTax()+this.shipping+this.processing_fee-this.auto_discount,2)},FOTOMOTO.Cart.reloadPrint=function(a){var b=FOTOMOTO.get(a.id).get(0);b&&(b.checked=!0)},FOTOMOTO.Cart.updateNumItems=function(a,b){var c=this.getActiveWidget();b!=null&&(c=this.getWidget(b)),c.updateNumItems(a),FOTOMOTO.Cart.applyCoupon(!0),this.zipcode!=""?this.updateZip(!0):this.updateTotal()},FOTOMOTO.Cart.updateShippingPrice=function(){this.shipping=0;if(this.shipping_id!=0){var a=this.getShippingMethod(this.shipping_id);this.shipping+=a.fee}if(this.postcard_shipping_id!=0){var a=this.getShippingMethod(this.postcard_shipping_id);this.shipping+=a.fee}if(this.fineart_shipping_id!=0){var a=this.getShippingMethod(this.fineart_shipping_id);this.shipping+=a.fee}if(this.framed_print_shipping_id!=0){var a=this.getShippingMethod(this.framed_print_shipping_id);this.shipping+=a.fee}if(this.print_frames_shipping_id!=0){var a=this.getShippingMethod(this.print_frames_shipping_id);this.shipping+=a.fee}if(this.fineart_frames_shipping_id!=0){var a=this.getShippingMethod(this.fineart_frames_shipping_id);this.shipping+=a.fee}if(this.sticky_print_shipping_id!=0){var a=this.getShippingMethod(this.sticky_print_shipping_id);this.shipping+=a.fee}if(this.canvas_shipping_id!=0){var a=this.getShippingMethod(this.canvas_shipping_id);this.shipping+=a.fee}},FOTOMOTO.Cart.updateShipping=function(a,b){b=="print"&&(this.shipping_id=a.id.replace(/^shipping/,"")),b=="postcard"&&(this.postcard_shipping_id=a.id.replace(/^shipping/,"")),b=="fineart"&&(this.fineart_shipping_id=a.id.replace(/^shipping/,"")),b=="canvas"&&(this.canvas_shipping_id=a.id.replace(/^shipping/,"")),b=="framed_print"&&(this.framed_print_shipping_id=a.id.replace(/^shipping/,"")),b=="print_frames"&&(this.print_frames_shipping_id=a.id.replace(/^shipping/,"")),b=="fineart_frames"&&(this.fineart_frames_shipping_id=a.id.replace(/^shipping/,"")),b=="sticky_print"&&(this.sticky_print_shipping_id=a.id.replace(/^shipping/,"")),this.updateShippingPrice(),FMJQ("#fotomoto_shipping").removeData("original_amount"),FMJQ("#fotomoto_shipping").html(FOTOMOTO.Cart.formatPrice(this.shipping)),FMJQ("#fotomoto_grandtotal").removeData("original_amount"),FMJQ("#fotomoto_grandtotal").html(FOTOMOTO.Cart.formatPrice(this.getGrandTotal())),FMJQ(".fm-shipping-address").get(0)&&(FMJQ(a).parents(".fm-form-row").siblings().removeClass("fm-selected"),FMJQ(a).parents(".fm-form-row").addClass("fm-selected")),FOTOMOTO.Cart.convertPrice()},FOTOMOTO.Cart.updateTax=function(){FOTOMOTO.testBlank(this.zipcode)?(this.tax=5,FOTOMOTO.get("taxrate").html(this.tax.toFixed(1)+"%"),this.updateTotal()):FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.invalid_zip_code)},FOTOMOTO.Cart.updateTotal=function(){FOTOMOTO.Cart.warningPostcard(),FMJQ("#fotomoto_subtotal").removeData("original_amount"),FMJQ("#fotomoto_subtotal").html(FOTOMOTO.Cart.formatPrice(this.getSubTotal())),FMJQ("#fotomoto_grandtotal").removeData("original_amount"),FMJQ("#fotomoto_grandtotal").html(FOTOMOTO.Cart.formatPrice(this.getGrandTotal())),FMJQ("#fotomotoNumItems").html(FOTOMOTO.Cart.numItemStr()),FOTOMOTO.widgetFrame.updateSmallShopping(),FOTOMOTO.Cart.convertPrice()},FOTOMOTO.Cart.updateStepsBar=function(){var a=FMJQ(".FotomotoStepsbar");if(a.length==0)return;a=a[0];while(a.childNodes.length>=1)a.removeChild(a.firstChild)},FOTOMOTO.Cart.getShippingMethod=function(a){for(var b=0;b<this.shippingMethods.length;b++){var c=this.shippingMethods[b];if(c.id==a)return c}return null},FOTOMOTO.Cart.getShippingMethodIndex=function(a){for(var b=0;b<this.shippingMethods.length;b++){var c=this.shippingMethods[b];if(c.price==a)return b}return 0},FOTOMOTO.Cart.getShippingMethodId=function(a){for(var b=0;b<this.shippingMethods.length;b++){var c=this.shippingMethods[b];if(c.price==a)return c.id}return this.shippingMethods[0].id},FOTOMOTO.Cart.loadZip=function(){FMJQ("#fotomoto_estimated_tax").removeData("original_amount"),FMJQ("#fotomoto_estimated_tax").html(FOTOMOTO.Cart.formatPrice(this.getTax())),FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FMJQ("#fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping())),FMJQ("#fotomoto_zipcode").val(this.zipcode),this.updateZip()},FOTOMOTO.Cart.getTaxShippingUrl=function(){return FOTOMOTO_CONFIG.script_domain+"/cart/tax_shipping/?a="+FOTOMOTO_CONFIG.app_widget_id+"&z="+encodeURIComponent(this.zipcode)+"&c="+encodeURIComponent(this.shipping_country)+"&s="+encodeURIComponent(this.shipping_state)+"&ct="+encodeURIComponent(this.shipping_city)+"&p="+encodeURIComponent(FOTOMOTO.Cart.getPrintIds())+"&pc="+encodeURIComponent(FOTOMOTO.Cart.getPostcardIds())+"&fa="+encodeURIComponent(FOTOMOTO.Cart.getFineartIds(!0))+"&cv="+encodeURIComponent(FOTOMOTO.Cart.getCanvasIds(!0))+"&ls="+encodeURIComponent(FOTOMOTO.Cart.getLicenseIds(!0))+"&fp="+encodeURIComponent(FOTOMOTO.Cart.getFramedPrintIds(!0))+"&pf="+encodeURIComponent(FOTOMOTO.Cart.getPrintFramesIds(!0))+"&ff="+encodeURIComponent(FOTOMOTO.Cart.getFineartFramesIds(!0))+"&sp="+encodeURIComponent(FOTOMOTO.Cart.getStickyPrintIds())},FOTOMOTO.Cart.updateZip=function(a){this.zipcode=FMJQ("#fotomoto_zipcode").val();var b=FMJQ("#fotomoto_shipping_country").get(0);this.shipping_country=b.options[b.selectedIndex].value,this.zipcode==""&&(this.tax=0);if(a){FOTOMOTO.Cart.setTax({percent:this.tax,city:this.shipping_city,state:this.shipping_state,cache:!0});return}var c=new FOTOMOTO.Request(this.getTaxShippingUrl(),{asynchronous:!0,method:"get",onComplete:function(a){},onTimeout:function(){FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.message)},onFailure:function(a){FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.failure)}});c.getResponse()},FOTOMOTO.Cart.setTax=function(a){a.percent==-1?(FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.invalid_zip_code),this.tax=0,this.shipping_zipcode=this.zipcode=""):(this.tax=a.percent,this.shipping_zipcode=this.zipcode),this.shipping_country=="US"&&(this.shipping_city=a.city,this.shipping_state=a.state),FMJQ("#fotomoto_estimated_tax").removeData("original_amount"),FMJQ("#fotomoto_estimated_tax").html(FOTOMOTO.Cart.formatPrice(this.getTax())),a.cache||(FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FMJQ("#fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),this.updateTotal()},FOTOMOTO.Cart.applyCoupon=function(a){FMJQ("#fotomoto_couponcode").parents("span.fotomotoDropDownPanel").hide();if(!a&&this.couponcode==FOTOMOTO.get("fotomoto_couponcode").val()){FMJQ("#fotomoto_estimated_coupon").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_coupon").html(FOTOMOTO.Cart.displayCouponPrice(this.getCouponOff())),FOTOMOTO.get("fotomoto_coupon_code_link").css("display",""),FOTOMOTO.get("fotomoto_coupon_row").addClass("FotomotoHiddenRow");return}if(FOTOMOTO.get("fotomoto_couponcode").val()==""){this.couponcode="",this.setCoupon(0,"percent");return}this.couponcode=FOTOMOTO.get("fotomoto_couponcode").val();var b=FOTOMOTO_CONFIG.script_domain+"/cart/apply_coupon/?a="+FOTOMOTO_CONFIG.app_widget_id+"&coupon="+encodeURIComponent(this.couponcode)+"&amount="+encodeURIComponent(FOTOMOTO.Cart.getSubTotal()-FOTOMOTO.Cart.getCouponOff())+"&p="+encodeURIComponent(FOTOMOTO.Cart.getPrintIds(!0))+"&pc="+encodeURIComponent(FOTOMOTO.Cart.getPostcardIds(!0))+"&fa="+encodeURIComponent(FOTOMOTO.Cart.getFineartIds(!0,!0))+"&cv="+encodeURIComponent(FOTOMOTO.Cart.getCanvasIds(!0,!0))+"&ls="+encodeURIComponent(FOTOMOTO.Cart.getLicenseIds(!0))+"&fp="+encodeURIComponent(FOTOMOTO.Cart.getFramedPrintIds(!0))+"&pf="+encodeURIComponent(FOTOMOTO.Cart.getPrintFramesIds(!0))+"&ff="+encodeURIComponent(FOTOMOTO.Cart.getFineartFramesIds(!0))+"&sp="+encodeURIComponent(FOTOMOTO.Cart.getStickyPrintIds(!0)),c=new FOTOMOTO.Request(b,{asynchronous:!0,method:"get",onComplete:function(a){},onTimeout:function(){FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.message)},onFailure:function(a){FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.failure)}});c.getResponse()},FOTOMOTO.Cart.setCoupon=function(a,b){this.coupon=a,this.coupon_type=b,FMJQ("#fotomoto_estimated_coupon").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_coupon").html(FOTOMOTO.Cart.displayCouponPrice(this.getCouponOff())),FMJQ("#fotomoto_estimated_tax").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_tax").html(FOTOMOTO.Cart.formatPrice(this.getTax())),FMJQ("#fotomoto_tax").removeData("original_amount"),FOTOMOTO.get("fotomoto_tax").html(FOTOMOTO.Cart.formatPrice(this.getTax())),FOTOMOTO.get("fotomoto_coupon_code_link").css("display",""),FOTOMOTO.get("fotomoto_coupon_row").addClass("FotomotoHiddenRow"),this.updateTotal()},FOTOMOTO.Cart.getCouponOff=function(){return this.coupon_type=="percent"?this.getSubTotal()*this.coupon:this.coupon},FOTOMOTO.Cart.displayCouponPrice=function(a){return this.formatPrice(a,!0)},FOTOMOTO.Cart.getTypeShippingMethods=function(a){var b=[];for(var c=0;c<this.shippingMethods.length;c++)this.shippingMethods[c].stype==a&&(b[b.length]=this.shippingMethods[c]);return b},FOTOMOTO.Cart.displayEstimateDestination=function(){FOTOMOTO.get("fotomoto_span_dest_estimate").addClass("FotomotoHiddenRow"),FOTOMOTO.get("fotomoto_estimate_destination").removeClass("FotomotoHiddenRow");var a=FOTOMOTO.get("fotomoto_shipping_country").get(0);for(var b=0;b<a.options.length;b++)if(a.options[b].value==this.shipping_country){a.selectedIndex=b;break}},FOTOMOTO.Cart.displayCouponCode=function(a){var b=FMJQ(a).parent().find(".fotomotoDropDownPanel");FMJQ(".fotomotoDropDownPanel").not(b).hide(),b.toggle()},FOTOMOTO.Cart.setEstimateDestination=function(){this.updateZip()},FOTOMOTO.Cart.isFreeShipping=function(){for(var a=0;a<this.shippingMethods.length;a++){var b=this.shippingMethods[a];if(b.price!=0)return!1}return!0},FOTOMOTO.Cart.freeShipping=function(){return FOTOMOTO.Cart.isFreeShipping()?this.shipping_country!=""?'<div id="fotomoto_free_shipping_text">'+FOTOMOTO_CONFIG.texts.free_shipping+"</div>":'<div id="fotomoto_free_shipping_text" style="display:none;">'+FOTOMOTO_CONFIG.texts.free_shipping+"</div>":""},FOTOMOTO.Cart.renderCart=function(a){var b='<div id="fotomotoContent" class="fm_clearfix fm_share">';b+='<div id="fotomotoOrderSummary">',b+='<div id="fotomotoCart"><div id="fotomotoNumItems">'+FOTOMOTO.Cart.getTotalItems()+'</div><div id="fm_inYourCart">Items in your cart</div></div>',b+='<div class="fm_row fmClearfix"><label>Item(s) Cost</label> <span id="fotomoto_subtotal" class="fm_amount">'+FOTOMOTO.Cart.formatPrice(this.getSubTotal())+"</span></div>",b+='<div id="fotomoto_estimated_processing_fee_row" class="fm_row fmClearfix"><label>Processing Fee</label> <span id="fotomoto_estimated_processing_fee" class="fm_amount">'+FOTOMOTO.Cart.formatPrice(this.processing_fee)+"</span></div>",b+='<div class="fm_row fmClearfix"><label>Est. Tax</label><span id="fotomoto_estimated_tax" class="fm_amount">'+FOTOMOTO.Cart.formatPrice(this.getTax())+"</span></div>",b+='<div class="fm_row fmClearfix"><label>Est. Shipping</label><span class="fotomotoDropDown"><a href="javascript:;" id="fotomotoCouponCode" class="fotomotoDropDownHook">set</a>',b+='<span class="fotomotoDropDownPanel">Postal Code:<input type="text" onBlur="FOTOMOTO.Cart.applyCoupon();" value="" size="15" id="fotomoto_zipcode">',b+='<div style="margin: 2px 0 6px 0px;">Country: <select id="fotomoto_shipping_country">'+FOTOMOTO.renderCountryOptions("US")+'</select></div><a href="javascript:;" class="fotomotoDone" onclick="FOTOMOTO.Cart.setEstimateDestination();">Done</a>',b+='</span></span><span id="fotomoto_estimated_lowest_shipping" class="fm_amount">'+FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping())+"</span></div>",b+='<div class="fm_row fmClearfix"><label>Discount </label><span class="fotomotoDropDown"><a href="javascript:;" id="fotomotoCouponCode" class="fotomotoDropDownHook">set</a><span class="fotomotoDropDownPanel">Code: ',b+='<input type="text" onBlur="FOTOMOTO.Cart.applyCoupon(true);" value="'+this.couponcode+'" size="15" id="fotomoto_couponcode"><a href="javascript:;" class="fotomotoDone" id="setCouponCode" onclick="FOTOMOTO.Cart.applyCoupon(true);">Done</a>',b+='</span></span><span id="fotomoto_estimated_coupon" class="fm_amount">'+FOTOMOTO.Cart.displayCouponPrice(this.getCouponOff())+"</span></div>",b+='<div class="fm_totalRow fmClearfix"><label>Total Cost</label> <span id="fotomoto_grandtotal" class="fm_amount">'+FOTOMOTO.Cart.formatPrice(this.getGrandTotal())+"</span></div>",b+='<div id="fm_processorLogos"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/payment/paymentlogos_cc.gif"></div>',b+="</div>",b+='<div id="fotomotoCheckOutLeft">';for(var c=0;c<this.widgets.length;c++)this.widgets[c].isEmpty()||(b+=this.widgets[c].renderRows());b+="</div>";var d="";return b+='<div id="fotomotoButtons" class="fm_clearfix"><a class="fotomotoButton fotomotoLeft fotomotoContinueShopping" href="javascript:;" onclick="FOTOMOTO.Cart.continueShopping();"" style="width:120px;">Continue Shopping</a>',b+='<div id="fotomotoMiddleButtons" class="fm_clearfix">'+d+'</div><a class="fotomotoButton fotomotoRight fm_orange" href="javascript:;" onclick="FOTOMOTO.Cart.placeOrder();">Check Out</a></div>',b+="</div>",b},FOTOMOTO.Cart.decreaseQuantity=function(a){var b=FMJQ(a).parents("td"),c=FMJQ("input.FotomotoQuantityText",b).get(0),d=parseInt(c.value);d>1&&(c.value=d-1,c.onblur()),FOTOMOTO.Cart.applyCoupon(!0)},FOTOMOTO.Cart.increaseQuantity=function(a){var b=FMJQ(a).parents("td"),c=FMJQ("input.FotomotoQuantityText",b).get(0),d=parseInt(c.value);c.value=d+1,c.onblur(),FOTOMOTO.Cart.applyCoupon(!0)},FOTOMOTO.Cart.deleteItemOnCart=function(a,b){var c=FOTOMOTO.Cart.getWidget(b),d=FMJQ("li#item-"+a).hasClass("fm-digital_download");FMJQ("li#item-"+a).remove(),c.removeItem(a),FOTOMOTO.get("fotomoto_buttons_bar").get(0)&&FMJQ.browser.msie&&FOTOMOTO.get("fotomoto_buttons_bar").css("position","relative"),c.getWidgetContent().centerPanel(),FOTOMOTO.get("fotomoto_buttons_bar").get(0)&&FMJQ.browser.msie&&FOTOMOTO.get("fotomoto_buttons_bar").css("position",""),this.zipcode!=""?this.updateZip():this.updateTotal(),FOTOMOTO.Cart.getPrintIds()==""&&(FOTOMOTO.Cart.shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getPostcardIds()==""&&(FOTOMOTO.Cart
.postcard_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getFramedPrintIds()==""&&(FOTOMOTO.Cart.framed_print_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getPrintFramesIds()==""&&(FOTOMOTO.Cart.print_frames_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original-amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getFineartFramesIds()==""&&(FOTOMOTO.Cart.fineart_frames_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original-amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getStickyPrintIds()==""&&(FOTOMOTO.Cart.sticky_print_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getFineartIds()==""&&(FOTOMOTO.Cart.fineart_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.getCanvasIds()==""&&(FOTOMOTO.Cart.canvas_shipping_id=0,FMJQ("#fotomoto_estimated_lowest_shipping").removeData("original_amount"),FOTOMOTO.get("fotomoto_estimated_lowest_shipping").html(FOTOMOTO.Cart.formatPrice(this.getEstimatedLowestShipping()))),FOTOMOTO.Cart.applyCoupon(!0),FOTOMOTO.get("fotomotoNumItems").html(FOTOMOTO.Cart.numItemStr()),d&&(FOTOMOTO.DigitalDownload.consolidate(),FOTOMOTO.Cart.displayCart())},FOTOMOTO.Cart.backToCart=function(){this.displayCart("")},FOTOMOTO.Cart.addToCart=function(){var a=this.getActiveWidget().getItemByUniqueId(this.getActiveWidget().current_print.unique_id);a.temp=!1,this.getActiveWidget().consolidate(),FOTOMOTO.Cart.scrollTheCart(),FOTOMOTO.Cart.updateViewCartTotalItems(),this.displayCart("")},FOTOMOTO.Cart.consolidate=function(){for(var a=0;a<this.widgets.length;a++)this.widgets[a].consolidate()},FOTOMOTO.Cart.isEmpty=function(){for(var a=0;a<this.widgets.length;a++)if(!this.widgets[a].isEmpty())return!1;return!0},FOTOMOTO.Cart.numItemStr=function(){var a=FOTOMOTO.Cart.getTotalItems()>1||FOTOMOTO.Cart.getTotalItems()==0?"items":"item";return FOTOMOTO.Cart.getTotalItems()+" "+a+" in your cart"},FOTOMOTO.Cart.displayCart=function(a){a==""?a=FOTOMOTO.Cart.from:FOTOMOTO.Cart.from=a;if(!FOTOMOTO.Cart.isEmpty()){FOTOMOTO.Cart.getActiveWidget().currentScreen="checkout",FOTOMOTO.Analyzer.createCartAnalytics();var b='<div class="fm-cart-wrapper fm-cf"><div class="fm-cart-content"><div class="fm-cart-title"><h4> Your Shopping Cart </h4></div><div class="fm-cart-head fm-cf"><span class="fm-cart-image"> Image </span><span class="fm-cart-item"> Item </span><span class="fm-cart-price"> Price </span><span class="fm-cart-quantity"> Quantity </span><span class="fm-cart-price"> Total </span></div><div class="fm-top-shadow"></div><ul class="fm-cart-items">{{#items}}<li id="item-{{id}}" class="fm-cf fm-{{item_type}}"><a href="javascript:;" class="fm-remove-item" style="display: block;">remove item</a><a href="javascript:;" class="fm-edit-options" style="display: block;">edit options</a><div class="fm-cart-image"><a href="javascript:;" class="fm-edit-crop" style="display: none;"><img class="fm-crop-icon" src="{{root}}/assets/blank.gif"> edit crop</a><div class="fm-cart-image-container">{{&preview}}</div></div><div class="fm-cart-item"><h6>{{&title}}</h6>{{&options}}</div><span class="fm-cart-price fm_amount"> {{price}} </span><span class="fm-cart-quantity"><span class="fm-quantity-input fm-inline-block"><a href="javascript:;" class="fm-quantity-decrement"> - </a><input id="{{id}}_numitems" type="text" value="{{quantity}}" class="fm-quantity"><a href="javascript:;" class="fm-quantity-increment"> + </a></span></span><span id="{{id}}_total" class="fm-cart-price fm_amount"> {{total}} </span></li>{{/items}}</ul></div><div class="fm-cart-summary"><h5> Order Summary </h5><ul><li class="fm-number-items"><img class="fm-cart-icon" src="{{root}}/assets/blank.gif"><span class="fm-label" id="fotomotoNumItems">{{num_items}}</span></li><li><span class="fm-label">Item Cost </span><span class="fm-data fm_amount" id="fotomoto_subtotal">{{subtotal}}</span></li><li style="display:none"><span class="fm-label">Processing Fee </span><span class="fm-data fm_amount" id="fotomoto_estimated_processing_fee">{{processing_fee_val}}</span></li><li id="fm-shipping" class="fm-not-set"><span class="fm-label">Estimated Shipping </span><span class="fm-data"></span><a href="javascript:;" class="fm-btn fm-inline-block fm-calculate fm-shipping fm_amount" id="fotomoto_estimated_lowest_shipping">{{est_shipping}}</a><div class="fm-hidden-panel fm-cf"><img height="7" src="{{root}}/assets/horizontal-shadow2.png"></div></li><li id="fm-tax" class="fm-not-set"><div class="fm-cf"><span class="fm-label">Estimated Tax </span><span class="fm-data"></span><a href="javascript:;" class="fm-btn fm-inline-block fm-calculate fm-tax fm_amount" id="fotomoto_estimated_tax">{{est_tax}}</a></div><div class="fm-hidden-panel fm-cf"><img height="7" src="{{root}}/assets/horizontal-shadow2.png"><div id="fm-customer-location-form"><div class="fm-row fm-cf"><span class="fm-label">Postal Code</span><input type="text" id="fotomoto_zipcode" size="15" value="{{shipping_zip}}" onblur="FOTOMOTO.Cart.applyCoupon();"></div><div class="fm-row fm-cf"><span class="fm-label">Country</span><select id="fotomoto_shipping_country">{{#countries}} {{&country_option}}{{/countries}}</select></div><a onclick="FOTOMOTO.Cart.setEstimateDestination();" class="fm-btn fm-bgcolor-gradient fm-submit" href="javascript:;">Calculate</a><a class="fm-btn fm-cancel" href="javascript:;">Cancel</a></div></div></li><li id="fm-coupon" class="fm-not-set"><span class="fm-label">Discount </span><span class="fm-data"></span><a href="javascript:;" class="fm-btn fm-inline-block fm-calculate fm-discount fm_amount" id="fotomoto_estimated_coupon">{{discount}}</a><div id="fm-coupon-form" class="fm-hidden-panel fm-cf"><img height="7" src="{{root}}/assets/horizontal-shadow2.png"><div class="fm-row fm-cf"><span class="fm-label">Coupon Code</span><input type="text" id="fotomoto_couponcode" size="15" value="{{coupon_code}}" onblur="FOTOMOTO.Cart.applyCoupon();"></div><a class="fm-btn fm-bgcolor-gradient fm-submit" href="javascript:;">Redeem</a><a class="fm-btn fm-cancel" href="javascript:;">Cancel</a></div></li><li class="fm-total"><span class="fm-label">Total </span><span class="fm-data fm_amount" id="fotomoto_grandtotal">{{total}}</span></li><li class="fm-processing-fee"><div style="display: block;" class="fm-hidden-panel fm-cf"> <img height="7" src="{{root}}/assets/horizontal-shadow2.png"> <div class="fm-message"></div> </div></li></ul><span class="fm-accepted-cards"></span></div></div>',c=[];for(var d=0;d<FOTOMOTO.Cart.widgets.length;d++)FOTOMOTO.Cart.widgets[d].isEmpty()||(c=c.concat(FOTOMOTO.Cart.widgets[d].cartItems()));var e={root:FOTOMOTO_CONFIG.static_domain,shipping_zip:FOTOMOTO.Cart.shipping_zipcode,countries:FOTOMOTO_CONFIG.countries,country_option:function(){return'<option value="'+this.sname+'" '+(FOTOMOTO.Cart.shipping_country==this.sname?"selected=":"")+">"+this.lname+"</option>"},items:c,num_items:FOTOMOTO.Cart.numItemStr(),subtotal:FOTOMOTO.Cart.formatPrice(FOTOMOTO.Cart.getSubTotal()),est_shipping:FOTOMOTO.Cart.formatPrice(FOTOMOTO.Cart.getEstimatedLowestShipping()),est_tax:FOTOMOTO.Cart.formatPrice(FOTOMOTO.Cart.getTax()),coupon_code:FOTOMOTO.Cart.couponcode,discount:FOTOMOTO.Cart.displayCouponPrice(FOTOMOTO.Cart.getCouponOff()),total:FOTOMOTO.Cart.formatPrice(FOTOMOTO.Cart.getGrandTotal()),processing_fee_val:FOTOMOTO.Cart.formatPrice(FOTOMOTO.Cart.processing_fee),fee_message:function(){if(FOTOMOTO.Cart.getTotalPostcards()>0)return"*Processing Fee is waived for orders of 10 or more cards"}};b=Mustache.render(b,e),FOTOMOTO.setView(FOTOMOTO.Cart.getActiveWidget().id,b,"checkout"),FMJQ(".fm-footer .fm-left-button").unbind("click").html("Continue Shopping").bind("click",function(){FOTOMOTO.Cart.continueShopping()}),FMJQ(".fm-footer .fm-right-button").unbind("click").html("Check Out").bind("click",function(){FOTOMOTO.Cart.placeOrder()}),FMJQ.onContentReady(FOTOMOTO.Cart.getActiveWidget().getWidgetContent().contentId,function(){FOTOMOTO.widgetFrame.optionsInit(),FOTOMOTO.shoppingCart.init(),FMJQ(".fotomotoDropDownHook").click(function(){var a=FMJQ(this).parent().find(".fotomotoDropDownPanel");return FMJQ(".fotomotoDropDownPanel").not(a).hide(),a.toggle(),!1}),FMJQ(".fotomotoDone").click(function(){return FMJQ(this).parent().toggle(),!1}),FMJQ("#fotomoto_zipcode").keydown(function(a){var b;if(window.event)b=window.event.keyCode;else{if(!a)return!0;b=a.which}return b==13?(FOTOMOTO.Cart.setEstimateDestination(),!1):!0}),FMJQ("#fotomoto_couponcode").keydown(function(a){var b;if(window.event)b=window.event.keyCode;else{if(!a)return!0;b=a.which}return b==13?(FOTOMOTO.Cart.applyCoupon(!0),!1):!0});if(FOTOMOTO.Cart.shipping_country!=""){var a=FMJQ("#fotomoto_shipping_country").get(0);for(var b=0;b<a.options.length;b++)if(a.options[b].value==FOTOMOTO.Cart.shipping_country){a.selectedIndex=b;break}FOTOMOTO.Cart.loadZip()}FOTOMOTO.Cart.couponcode!=""&&FOTOMOTO.Cart.applyCoupon(!0),FMJQ("#fotomoto_couponcode").val(FOTOMOTO.Cart.couponcode),FOTOMOTO.Cart.updateTotal()})}else FOTOMOTO.showMessage(FOTOMOTO_CONFIG.texts.empty_cart)},FOTOMOTO.Cart.selectCurrency=function(a,b,c){FOTOMOTO.get(c).html(FOTOMOTO.getSelectedOption(b).text),FOTOMOTO.get(a).css("display","none"),FOTOMOTO.Cart.currency=FOTOMOTO.getSelectedOption(b).value,this.saveConfig()},FOTOMOTO.Cart.formatSize=function(a,b){var c=a.split("x");c[0]=c[0].replace(/&quot;/g,"").replace(/\"/g,""),c[1]=c[1].replace(/&quot;/g,"").replace(/\"/g,"");switch(this.unit){case"in":return c[0]+'"x'+c[1]+'"';case"cm":if(b)return parseFloat(c[0]*2.54).toFixed(1)+"x"+parseFloat(c[1]*2.54).toFixed(1);return parseFloat(c[0]*2.54).toFixed(1)+"x"+parseFloat(c[1]*2.54).toFixed(1)+"cm"}return""},FOTOMOTO.Cart.currencyName=function(){var a=null;for(var b=0;b<FOTOMOTO_CONFIG.currencies.length;b++)if(FOTOMOTO_CONFIG.currencies[b].id==this.currency){a=FOTOMOTO_CONFIG.currencies[b];break}return a==null&&(a=FOTOMOTO_CONFIG.currencies[0]),a.id},FOTOMOTO.Cart.formatPrice=function(a,b){var c=null;for(var d=0;d<FOTOMOTO_CONFIG.currencies.length;d++)if(FOTOMOTO_CONFIG.currencies[d].id==FOTOMOTO.Cart.currency){c=FOTOMOTO_CONFIG.currencies[d];break}c==null&&(c=FOTOMOTO_CONFIG.currencies[0],this.currency=c.id);var e=c.symbol;return/\$$/.test(e)&&(e="$"),b?"("+e+a.toFixed(2)+")":e+a.toFixed(2)},FOTOMOTO.Cart.goBack=function(){FOTOMOTO.loadContent(this.from),this.from=="frameandmat.html"&&(this.from="print.html")},FOTOMOTO.Cart.getTotalPostcards=function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].totalPostcards();return a},FOTOMOTO.Cart.getTotalLicenses=function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].totalLicenses();return a},FOTOMOTO.Cart.enoughPostcard=function(){var a=FOTOMOTO.Cart.getTotalPostcards();return a>0&&a<FOTOMOTO_CONFIG.postcard_minimum_count?!1:!0},FOTOMOTO.Cart.getPostcardDiscount=function(){var a=0;for(var b=0;b<this.widgets.length;b++)a+=this.widgets[b].totalPostcardPrice();return a*FOTOMOTO_CONFIG.postcard_volume_discount},FOTOMOTO.Cart.min_subtotal=function(){return FOTOMOTO_CONFIG.min_subtotals[FOTOMOTO.Cart.currency]},FOTOMOTO.Cart.estimated_processing_fee=function(){return FOTOMOTO_CONFIG.processing_fees[FOTOMOTO.Cart.currency]},FOTOMOTO.Cart.estimated_handling_fee=function(){return FOTOMOTO_CONFIG.handling_fees[FOTOMOTO.Cart.currency]},FOTOMOTO.Cart.warningPostcard=function(){var a=FOTOMOTO.Cart.getTotalPostcards();a<10&&a>0?this.processing_fee=FOTOMOTO.Cart.estimated_handling_fee():this.processing_fee=0,FOTOMOTO.Cart.getSubTotal()==0&&(this.processing_fee=0),FOTOMOTO.Cart.getSubTotal()>=0&&(FOTOMOTO.Cart.getSubTotal()-FOTOMOTO.Cart.getCouponOff())*FOTOMOTO.Cart.exchange_rate<FOTOMOTO.Cart.min_subtotal()?(this.processing_fee==0&&FOTOMOTO.Cart.getTotalItems()>0&&(this.processing_fee=FOTOMOTO.Cart.estimated_processing_fee()),FMJQ("#fotomoto_estimated_processing_fee").get(0)&&(FMJQ("#fotomoto_estimated_processing_fee").removeData("original_amount"),FMJQ("#fotomoto_estimated_processing_fee").html(FOTOMOTO.Cart.formatPrice(this.processing_fee)),FOTOMOTO.Cart.getTotalItems()>0&&this.processing_fee>0?FMJQ("#fotomoto_estimated_processing_fee").parents("li").show():FMJQ("#fotomoto_estimated_processing_fee").parents("li").hide())):FMJQ("#fotomoto_estimated_processing_fee").get(0)&&(FMJQ("#fotomoto_estimated_processing_fee").removeData("original_amount"),FMJQ("#fotomoto_estimated_processing_fee").html(FOTOMOTO.Cart.formatPrice(this.processing_fee)),a>0&&a<10?FMJQ("#fotomoto_estimated_processing_fee").parents("li").show():FMJQ("#fotomoto_estimated_processing_fee").parents("li").hide());if(this.processing_fee>0){FMJQ("li.fm-processing-fee").show();if(a>0&&a<10)FMJQ("li.fm-processing-fee .fm-message").html("<span>Orders below 10 cards are subject to a processing fee.</span>");else{var b=null;for(var c=0;c<FOTOMOTO_CONFIG.currencies.length;c++)if(FOTOMOTO_CONFIG.currencies[c].id==this.currency){b=FOTOMOTO_CONFIG.currencies[c];break}var d=b.symbol;/\$$/.test(d)&&(d="$"),FMJQ("li.fm-processing-fee .fm-message").html("<span>Orders below "+FOTOMOTO.Cart.formatPrice(FOTOMOTO.Cart.min_subtotal())+" are subject to a processing fee.</span>")}}else FMJQ("li.fm-processing-fee").hide()},FOTOMOTO.Cart.placeOrder=function(){var a="";FOTOMOTO.Cart.isEmpty()&&(a=FOTOMOTO_CONFIG.texts.empty_cart),FOTOMOTO.Cart.shipping==-1&&(a="Cannot determine shipping price for this country. Please try again later."),FOTOMOTO.Cart.applyCoupon(!0),FOTOMOTO.Cart.updateTotal(),a!=""?FOTOMOTO.showMessage(a,null,{width:400,height:200}):(FOTOMOTO.Cart.consolidate(),FOTOMOTO.Cart.as_gift?FOTOMOTO.loadContent("shipping_address_as_gift"):FOTOMOTO.loadContent("shipping_address"))},FOTOMOTO.Cart.licensesOnly=function(){return FOTOMOTO.Cart.getLicenseIds()!=""&&FOTOMOTO.Cart.getPrintIds()==""&&FOTOMOTO.Cart.getPostcardIds()==""&&FOTOMOTO.Cart.getFineartIds()==""&&FOTOMOTO.Cart.getCanvasIds()==""&&FOTOMOTO.Cart.getFramedPrintIds()==""&&FOTOMOTO.Cart.getPrintFramesIds()==""&&FOTOMOTO.Cart.getFineartFramesIds()==""&&FOTOMOTO.Cart.getStickyPrintIds()==""},FOTOMOTO.Cart.reviewPayment=function(){FOTOMOTO.loadContent("reviewPayment.html")},FOTOMOTO.Cart.continueShopping=function(){FOTOMOTO.Cart.saveToCookie(),FOTOMOTO.showFotomotoPage(!1)},FOTOMOTO.Cart.saveToCookie=function(){FOTOMOTO.Cart.consolidate();var a=FMJQ.toJSON(FOTOMOTO.Cart.toJSON());if(!this.wasEmpty||!this.isEmpty())FOTOMOTO.POST.postData({cart:a},"/?act=cart_save"),this.wasEmpty=FOTOMOTO.Cart.getTotalItems()==0},FOTOMOTO.Cart.loadFromJSON=function(a){if(a==null){this.loading_session=!1;return}this.email=a.email,this.shipping_id=a.shipping_method,this.postcard_shipping_id=a.postcard_shipping_method,this.fineart_shipping_id=a.fineart_shipping_method,this.canvas_shipping_id=a.canvas_shipping_method,this.framed_print_shipping_id=a.framed_print_shipping_method,this.print_frames_shipping_id=a.print_frames_shipping_method,this.fineart_frames_shipping_id=a.fineart_frames_shipping_method,this.sticky_print_shipping_id=a.sticky_print_shipping_method,this.tax=a.tax,this.couponcode=a.coupon,this.paymentMethod.value=a.payment,this.shipping_first_name=a.shipping_first_name,this.shipping_last_name=a.shipping_last_name,this.shipping_company=a.shipping_company,this.shipping_address1=a.shipping_address1,this.shipping_address2=a.shipping_address2,this.shipping_city=a.shipping_city,this.shipping_state=a.shipping_state,this.shipping_country=a.shipping_country,this.shipping_zipcode=a.shipping_zipcode,this.zipcode=this.shipping_zipcode,this.shipping_phone_number=a.shipping_phone_number,this.as_gift=a.as_gift,this.gift_first_name=a.gift_first_name,this.gift_last_name=a.gift_last_name,this.gift_from=a.gift_from,this.gift_message=a.gift_message;var b=a.widgets;for(var c=a.widgets.length-1;c>=0;c--){var d=!1,e=new FOTOMOTO.WidgetBar(null,"","");for(var f=0;f<this.widgets.length;f++)this.widgets[f].image.src==a.widgets[c].image&&(e=this.widgets[f],d=!0);e.loadJSON(a.widgets[c]),d||FOTOMOTO.Cart.widgets.unshift(e)}FOTOMOTO.Cart.scrollTheCart(),FOTOMOTO.Cart.updateViewCartTotalItems(),this.isEmpty()||(this.wasEmpty=!1);if(FOTOMOTO.Cart.getPostcardIds()!=""&&!FOTOMOTO.REGISTER.moduleAdded("postcard")){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/postcard_module/"+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}if(FOTOMOTO.Cart.getLicenseIds()!=""&&!FOTOMOTO.REGISTER.moduleAdded("license")){var g="stores/load_view/"+FOTOMOTO_CONFIG.app_widget_id+"/license_module/"+(new Date).getTime(),h=FOTOMOTO_CONFIG.script_domain+"/"+g;FMJQ.getScript(h)}this.loading_session=!1},FOTOMOTO.Cart.loadFromSession=function(){var a=FOTOMOTO_CONFIG.script_domain+"/cart/get_data/?act=cart_load&app_store_id="+FOTOMOTO_CONFIG.app_widget_id+"&fotomoto_cart_session_key="+FOTOMOTO_CONFIG.session_key+"&cachebursted="+(new Date).getTime();FMJQ.getScript(a)},FOTOMOTO.Cart.loadFromCookie=function(){FOTOMOTO.Cart.loadFromSession()},FOTOMOTO.Cart.viewCart=function(){if(FOTOMOTO.Cart.isEmpty()){FOTOMOTO.showMessage("The cart is empty.");return}FOTOMOTO.Cart.consolidate();var a=FOTOMOTO.Cart.getActiveWidget();a==null&&FOTOMOTO.Cart.widgets.length>0&&(a=FOTOMOTO.Cart.widgets[0]);if(a==null)return;FOTOMOTO.Cart.openWidget(a.id),FOTOMOTO.createWidgetPanel(),FOTOMOTO.Cart.displayCart(),FOTOMOTO.showFotomotoPageByWidget(!0,a)},FOTOMOTO.Cart.visibleWidgets=function(){var a=new Array;for(var b=0;b<this.widgets.length;b++){if(!(!this.widgets[b].button_status||this.widgets[b].button_status.status!="unavailable"&&this.widgets[b].button_status.status!="private"))continue;if(FOTOMOTO.isVisible(this.widgets[b].image)||!FOTOMOTO_CONFIG.only_visible){var c=!1;for(var d=0;d<a.length;d++)if(this.widgets[b].image.src==a[d].image.src){c=!0;break}c||a.push(this.widgets[b])}}return a},FOTOMOTO.Cart.fixedToolbar=function(){return FMJQ("#FotomotoToolbar").get(0)!=null},FOTOMOTO.Cart.isMultiPhotos=function(){return FMJQ("#FotomotoToolbar").get(0)!=null&&FOTOMOTO.Cart.visibleWidgets().length>1},FOTOMOTO.Cart.renderPhotoRow=function(a,b,c){var d='<table style="margin:0px auto;"><tr>';for(var e=b;e<b+c;e++)d+='<td class="FotomotoSelectImage"><table id="widget_'+a[e].id+'" class="FotomotoSelectImageBox" onclick="FOTOMOTO.Cart.selectPhoto(this)"><tr><td style="text-align:center;vertical-align:middle;padding: 0px !important">',d+='<img id="img_'+a[e].id+'" src="'+a[e].image.src+'"/ width="'+a[e].getImageBoxWidth()+'" height="'+a[e].getImageBoxHeight()+'" />',d+="</td></tr></table></td>";return d+="</tr></table>",d},FOTOMOTO.Cart.selectPhoto=function(a){FMJQ("table.FotomotoSelectImageBox",FMJQ("#fotmoto_photos_div").get(0)).each(function(a,b){FMJQ(b).removeClass("FotomotoSelectedImageBox")}),FMJQ(a).addClass("FotomotoSelectedImageBox")},FOTOMOTO.Cart.scrollPhotos=function(a,b){var c=null,d=FMJQ("#fotmoto_photos_div").get(0).scrollLeft,e=600;a==1&&(d<(b-1)*600&&(d+=600),c={scroll:{to:[d,0]}}),a==-1&&(d>0&&(d-=600),c={scroll:{to:[d,0]}}),FMJQ("#fotmoto_photos_div").animate({scrollLeft:d},500),FMJQ("#fotomoto_scroll_left").css("display",d==0?"none":""),FMJQ("#fotomoto_scroll_right").css("display",d==(b-1)*600?"none":"")},FOTOMOTO.Cart.choosePhoto=function(a){var b="";FMJQ("table.FotomotoSelectedImageBox",FMJQ("#fotmoto_photos_div").get(0)).each(function(a,c){b=c.id.replace(/^widget_/,"")});if(b==""){FOTOMOTO.showMessage("No photo has been selected.");return}var c=FOTOMOTO.Cart.getWidget(b);FOTOMOTO.Cart.getActiveWidget().active=!1,c.active=!0,FOTOMOTO.loadContent(a+".html",c)},FOTOMOTO.Cart.backToFirstScreen=function(a){FOTOMOTO.Cart.consolidate();if(FOTOMOTO.Cart.fixedToolbar()){var b=FOTOMOTO.Cart.visibleWidgets();b.length<=1?FOTOMOTO.showFotomotoPage(!1):FOTOMOTO.Cart.selectPhotos(a)}else FOTOMOTO.showFotomotoPage(!1)},FOTOMOTO.Cart.selectPhotos=function(a){var b=6,c=FOTOMOTO.Cart.visibleWidgets();if(c.length==0)return;if(c.length==1){FOTOMOTO.Cart.getActiveWidget().active=!1,c[0].active=!0,FOTOMOTO.loadContent(a+".html",c[0]);return}var d="";d+='<table class="FotomotoContentPadding" style="margin: 4px auto;margin-top:40px;"><tr><td style="text-align:center;vertical-align:middle;"><table align="center" style="margin-top: 20px;">',d+='<tr><td style="width: 20px; text-align: left; vertical-align:middle;">',c.length/b>1&&(d+='<a href="javascript:void(0);" style="display:none" id="fotomoto_scroll_left" onclick="FOTOMOTO.Cart.scrollPhotos(-1, '+(parseInt(c.length/b)+1)+');"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/left.gif"/></a>'),d+="</td>",d+='<td style="text-align:center;vertical-align:middle;"><div id="fotmoto_photos_div" style="width:600px;overflow:hidden;">';var e=0,f=c.length;d+="<table><tr>";for(var g=0;g<c.length;g+=b)e=g,f=c.length-g,f>b&&(f=b),d+="<td>",d+='<table style="width:600px">',f<=3&&(d+="<tr><td>",d+=FOTOMOTO.Cart.renderPhotoRow(c,e,f),d+="</td></tr>"),f==4&&(d+="<tr><td>",d+=FOTOMOTO.Cart.renderPhotoRow(c,e,2),d+="</td></tr>",d+="<tr><td>",d+=FOTOMOTO.Cart.renderPhotoRow(c,e+2,2),d+="</td></tr>"),f>4&&f<=6&&(d+="<tr><td>",d+=FOTOMOTO.Cart.renderPhotoRow(c,e,3),d+="</td></tr>",d+="<tr><td>",d+=FOTOMOTO.Cart.renderPhotoRow(c,e+3,f-3),d+="</td></tr>"),d+="</table>",d+="</td>";d+="</tr></table>",d+="</div></td>",d+='<td style="width: 20px; text-align: right; vertical-align:middle;">',c.length/b>1&&(d+='<a href="javascript:void(0);" id="fotomoto_scroll_right" onclick="FOTOMOTO.Cart.scrollPhotos(1, '+(parseInt(c.length/b)+1)+');"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/right.gif"/></a>'),d+="</td></tr>",d+="</table></td></tr></div>",FMJQ(".fm-footer .fm-left-button").unbind("click").html("Close").bind("click",function(){FOTOMOTO.showFotomotoPage(!1)}),FMJQ(".fm-footer .fm-right-button").unbind("click").html("Select Photo").bind("click",function(){FOTOMOTO.Cart.choosePhoto(a)});var h=FOTOMOTO.Cart.getActiveWidget();h==null&&FOTOMOTO.Cart.widgets.length>0&&(h=FOTOMOTO.Cart.widgets[0]);if(h==null)return;FOTOMOTO.Cart.openWidget(h.id),FOTOMOTO.createWidgetPanel(),FOTOMOTO.setView(FOTOMOTO.Cart.getActiveWidget().id,d,"select_photo"),FOTOMOTO.showFotomotoPageByWidget(!0,h)},FOTOMOTO.Cart.cancelOrder=function(){var a=FOTOMOTO.WidgetPanel!=null&&FOTOMOTO.WidgetPanel.visible?"#fotomotoWidgetContainer":"body";FMJQ.popup('<div id="fotomoto_popup" class="fmClearfix"><div class="fm_header"><span>Cancel Order</span></div><p class="fm_message">This will remove all items from your shopping cart and will cancel your order. Are you sure?<br/></p><div class="fm_buttons"><div class="no simplepopup-close">No</div><div class="yes">Yes</div></div>',{appendTo:a,containerCss:{width:340,height:160},zIndex:10000008,onShow:function(a){FMJQ(".yes",a.data[0]).click(function(){FOTOMOTO.Cart.empty(),FOTOMOTO.Cart.scrollTheCart(),FOTOMOTO.showFotomotoPage(!1),FMJQ.popup.close()})}})},FOTOMOTO.Cart.setPreviewClass=function(a){a=a.split("x");var b=parseFloat(a[0]),c=parseFloat(a[1]);b<11?FMJQ("#fotomotoPreview").attr("class","fm_printSmall"):b<24?FMJQ("#fotomotoPreview").attr("class","fm_printMed"):FMJQ("#fotomotoPreview").attr("class","fm_printBig")},FOTOMOTO.Cart.showNewPreviewImage=function(a,b){var c=FMJQ("#fotomoto_imagepreview").get(0);if(!c)return;var d=null,e=!1,f=a.split("x"),g=parseFloat(f[0]),h=parseFloat(f[1]);g<11?(g*=12,FMJQ("#fotomotoPreview").attr("class","fm_printSmall")):g<24?(g*=6,FMJQ("#fotomotoPreview").attr("class","fm_printMed")):(g*=3.2,FMJQ("#fotomotoPreview").attr("class","fm_printBig"));var i=b.image_width,j=b.image_height;h=g/j*i,h>270&&(h=270,g=h/i*j),c.src=b.image.src,FOTOMOTO.isVisible(c)?FMJQ(c).fadeOut(100,function(){FMJQ(c).css({width:h+"px",height:g+"px"}),FMJQ(c).fadeIn(500)}):(FMJQ(c).css({width:h+"px",height:g+"px"}),FMJQ(c).fadeIn(500))},FOTOMOTO.Cart.loadCropWindow=function(a,b,c,d){if(c.cropPoint.left==-1&&c.cropPoint.top==-1){var e=c.windowSize.width,f=c.windowSize.height;a==e&&(c.cropPoint.left=0,c.cropPoint.top=(b-f)/2),b==f&&(c.cropPoint.top=0,c.cropPoint.left=(a-e)/2)}FOTOMOTOCropWindow.reset("fotomoto_print_photo_crop_div",c.cropPoint.left,c.cropPoint.top),FOTOMOTOCropWindow.setSaveCropPoint(d)},FOTOMOTO.Cart.loadCropPhoto=function(a,b,c,d,e){var f=b.print_size.split("x");f=(f[1]/f[0]).toFixed(2),e&&(a.cropPoint={top:-1,left:-1});var g=252,h=null;f==1&&(g=234,h=234),f==1.2&&(g=252,h=210),f==1.25&&(g=252,h=201),f==1.33&&(g=252,h=189),f==1.27&&(g=252,h=198),f==1.4&&(g=252,h=180),f==1.5&&(g=252,h=168),f==2&&(g=252,h=126),f==3&&(g=378,h=126),f==4&&(g=504,h=126),f==5&&(g=630,h=126),f==6&&(g=756,h=126),h==null&&(h=g/f);if(a.rotate==0)g=parseInt(g*1.28),h=parseInt(h*1.28),FMJQ("#fotomoto_print_photo_crop_div").css("width",g+"px"),FMJQ("#fotomoto_print_photo_crop_div").css("height",h+"px");else{var i=g;g=h,h=i,FMJQ("#fotomoto_print_photo_crop_div").css("width",g+"px"),FMJQ("#fotomoto_print_photo_crop_div").css("height",h+"px")}a.windowSize.width=g,a.windowSize.height=h,FMJQ("#fotomoto_print_photo_crop").attr("src",c);var j=h,k=g;h/a.widget.image_height*a.widget.image_width<g?(j=Math.round(g/a.widget.image_width*a.widget.image_height),FMJQ("#fotomoto_print_photo_crop").css({height:j,width:k})):(k=Math.round(h/a.widget.image_height*a.widget.image_width),FMJQ("#fotomoto_print_photo_crop").css({height:j,width:k})),FOTOMOTO.Cart.loadCropWindow(k,j,a,d)},FOTOMOTO.Cart.updateImagePreview=function(a){var b=parseInt(FMJQ("#fotomotoImageWrapperWrapper").css("width")),c=parseInt(FMJQ("#fotomotoImageWrapperWrapper").css("height"));if(c/a.widget.image_height*a.widget.image_width<b){var d=Math.round(b/a.widget.image_width*a.widget.image_height);FMJQ("#fotomotoImageWrapper img").css({height:d,width:b})}else{var e=Math.round(c/a.widget.image_height*a.widget.image_width);FMJQ("#fotomotoImageWrapper img").css({height:c,width:e})}var f=a.cropPoint.top*(b/a.windowSize.width),g=a.cropPoint.left*(b/a.windowSize.width);FMJQ("#fotomotoImageWrapper").scrollTop(f),FMJQ("#fotomotoImageWrapper").scrollLeft(g)},FOTOMOTO.Cart.setImagePreviewSize=function(a,b,c){var d=a.split("x"),e=parseFloat(d[0]),f=parseFloat(d[1]),g=180,h=0;e<11?h=e*12:e<24?h=e*6:h=e*3.2,c&&b?(fwidth=parseInt(g*f/e),fheight=g):c?(fwidth=parseInt(g*e/f),fheight=g):b?(fwidth=parseInt(h*f/e),fheight=h):(fwidth=parseInt(h*e/f),fheight=h),fwidth>270&&(fwidth=270,fheight=fwidth/f*e);if(!c){var i=(403-fwidth)/2+12;FMJQ("#fotomotoImageWrapperWrapper").css({left:i+"px"})}else FMJQ("#fotomotoImageWrapperWrapper").css({left:""});FMJQ("#fotomotoImageWrapperWrapper").css({width:fwidth+"px",height:fheight+"px"})},FOTOMOTO.Cart.prepareImagePreview=function(a,b){var c=b.widget.image_width,d=b.widget.image_height,e=c/d>=1?!0:!1,f=FMJQ("#fotomotoPreview").hasClass("fm_printFixed")?!0:!1;FOTOMOTO.Cart.setImagePreviewSize(a,e,f),FOTOMOTO.Cart.updateImagePreview(b)},FOTOMOTO.Cart.convertPriceTo99=function(a,b){return b.symbol!="US$"&&(a=parseFloat((a*FOTOMOTO.trimFloat(b.rate*FOTOMOTO_CONFIG.ex_margin,2)).toFixed(2)),cents=parseInt(a*100-parseInt(a)*100),cents<=49?a=parseFloat(parseInt(a)*100+49)/100:cents<99&&(a=parseFloat(parseInt(a)*100+99)/100)),a},FOTOMOTO.Cart.convertUnit=function(){FMJQ(".fm_unit").each(function(a){FMJQ(this).data("original_unit")==null&&FMJQ(this).data("original_unit",FMJQ(this).html());var b=FMJQ(this).data("original_unit");FMJQ(this).html(FOTOMOTO.Cart.formatSize(b.replace(/&quot;|\"/g,"")))})},FOTOMOTO.Cart.convertPrice=function(){var a=null;for(var b=0;b<FOTOMOTO_CONFIG.currencies.length;b++)if(FOTOMOTO_CONFIG.currencies[b].id==this.currency){a=FOTOMOTO_CONFIG.currencies[b];break}var c=a.symbol;/\$$/.test(c)&&(c="$"),a!=null&&(FMJQ(".fm_amount").each(function(b){if(FMJQ(this).html()=="Calculate"||FMJQ(this).html()=="Redeem")return;(FMJQ(this).data("original_amount")==null||FMJQ(this).data("original_amount")=="")&&FMJQ(this).data("original_amount",FMJQ(this).html());var d=String(FMJQ(this).data("original_amount")),e=/^\(.*\)$/.test(d);d=parseFloat(d.replace(/[^0-9\.]/g,""));if(isNaN(d))return;if(d==0){var f=FMJQ(this).attr("id");(f=="fotomoto_estimated_tax"||f=="fotomoto_estimated_lowest_shipping")&&FMJQ(this).html("Calculate"),f=="fotomoto_estimated_coupon"&&FMJQ(this).html("Redeem");return}if(FMJQ(this).attr("id")=="fotomoto_estimated_processing_fee")return FMJQ(this).html(c+d.toFixed(2));if(FMJQ(this).hasClass("fm_shippingCost"))return d=FOTOMOTO.Cart.convertPriceTo99(d,a),FMJQ(this).html(c+d.toFixed(2));var g=0;if(FOTOMOTO.Cart.shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.postcard_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.postcard_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.fineart_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.fineart_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.framed_print_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.framed_print_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.sticky_print_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.sticky_print_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.print_frames_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.print_frames_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.fineart_frames_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.fineart_frames_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FOTOMOTO.Cart.canvas_shipping_id!=0){var h=FOTOMOTO.Cart.getShippingMethod(FOTOMOTO.Cart.canvas_shipping_id);h&&(g+=FOTOMOTO.Cart.convertPriceTo99(h.fee,a))}if(FMJQ(this).attr("id")=="fotomoto_estimated_lowest_shipping"||FMJQ(this).attr("id")=="fotomoto_shipping")return FMJQ(this).html(c+g.toFixed(2));if(FMJQ(this).attr("id")=="fotomoto_estimated_tax"||FMJQ(this).attr("id")=="fotomoto_tax")return FMJQ(this).html(c+FOTOMOTO.trimFloat((FOTOMOTO.Cart.getSubTotalForTax()-FOTOMOTO.Cart.getCouponOff())*FOTOMOTO.Cart.tax/100*FOTOMOTO.Cart.exchange_rate,2).toFixed(2));if(FMJQ(this).attr("id")=="fotomoto_grandtotal")return d=FOTOMOTO.trimFloat(FOTOMOTO.Cart.getSubTotal()*FOTOMOTO.Cart.exchange_rate,2),d-=FOTOMOTO.trimFloat(FOTOMOTO.Cart.getCouponOff()*FOTOMOTO.Cart.exchange_rate,2),d+=FOTOMOTO.trimFloat((FOTOMOTO.Cart.getSubTotalForTax()-FOTOMOTO.Cart.getCouponOff())*FOTOMOTO.Cart.tax/100*FOTOMOTO.Cart.exchange_rate,2),d+=FOTOMOTO.trimFloat(g,2),d+=FOTOMOTO.Cart.processing_fee,d-=FOTOMOTO.trimFloat(FOTOMOTO.Cart.auto_discount*FOTOMOTO.Cart.exchange_rate,2),FMJQ(this).html(c+d.toFixed(2));d*=FOTOMOTO.Cart.exchange_rate,e?FMJQ(this).html("("+c+d.toFixed(2)+")"):FMJQ(this).html(c+d.toFixed(2))}),FMJQ("#fm_price_note").length>0&&(FOTOMOTO_CONFIG.store_currency==FOTOMOTO.Cart.currency?(FMJQ("#fm_price_note").hide(),FMJQ(".fm_totalRow label sup").hide()):(FMJQ("#fm_price_note").show(),FMJQ(".fm_totalRow label sup").show())))},FOTOMOTO.Post=new FOTOMOTO.Class,FOTOMOTO.Post.prototype={init:function(){this.session_key=FOTOMOTO_CONFIG.session_key,this.frameId=this.createFrame(),this.silence=!0},showWaiting:function(){if(this.waiting==null){var a=FOTOMOTO.WidgetPanel!=null&&FOTOMOTO.WidgetPanel.visible?"#fotomotoWidgetContainer":"body";this.waiting=FMJQ.popup('<div class="FotomotoLoadingBox"><div class="FotomotoLoadingDiv"><img src="'+FOTOMOTO_CONFIG.static_domain+'/assets/fotomoto_loading.gif" id="fotomoto_loading_image"/></div></div>',{appendTo:a,containerCss:{width:240},zIndex:1008})}},hideWaiting:function(){this.waiting&&(FMJQ(".simplepopup-data .FotomotoLoadingDiv").length>0&&this.waiting.close(),this.waiting=null)},createFrame:function(a){var b="fotomoto_io_post",c;if(FMJQ.browser.msie){try{parseInt(FMJQ.browser.version)<9?c=document.createElement('<iframe name="'+b+'"/>'):c=document.createElement("iframe")}catch(d){c=document.createElement("iframe")}c.setAttribute("id",b),c.setAttribute("name",b),typeof a=="boolean"&&(c.src="javascript:false")}else c=document.createElement("iframe"),c.id=b,c.name=b;return c
.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px",document.body.appendChild(c),b},checkStatus:function(){this.tries++;if(this.tries<100){var a=this.status_url+"&cachebursted="+(new Date).getTime();FMJQ.getScript(a)}else this.silence||new FOTOMOTO.Popup(document.body,FOTOMOTO_CONFIG.texts.message,FOTOMOTO_CONFIG.texts.timeout)},updateStatus:function(a){a.post_key==this.post_key&&(a.post_status==1?(this.hideWaiting(),this.callback!=null&&this.callback(a)):FMJQ(document).oneTime(500,FMJQ.proxy(function(){this.checkStatus()},this))),a.post_key==""&&FMJQ(document).oneTime(500,FMJQ.proxy(function(){this.checkStatus()},this))},postForm:function(a,b,c){FOTOMOTO.isIE6()&&(FMJQ("#"+this.frameId).remove(),this.createFrame()),this.post_key=(new Date).getTime(),this.hideWaiting(),this.status_url=this.formatStatusUrl(b),this.waiting=null,this.tries=0,this.form_el=a,this.callback=c;var d=document.createElement("input");d.type="hidden",d.name="app_store_id",d.value=decodeURIComponent(FOTOMOTO_CONFIG.app_widget_id),this.form_el.appendChild(d);var e=document.createElement("input");e.type="hidden",e.name="fotomoto_cart_session_key",e.value=decodeURIComponent(this.session_key),this.form_el.appendChild(e);var f=document.createElement("input");f.type="hidden",f.name="fotomoto_post_key",f.value=this.post_key,this.form_el.appendChild(f),this.form_el.setAttribute("target",this.frameId),this.form_el.submit(),this.silence||this.showWaiting(),this.tries=0,this.status_url!=null&&FMJQ(document).oneTime(500,FMJQ.proxy(function(){this.checkStatus()},this))},postData:function(a,b,c,d){var e=document.createElement("form");e.action=this.formatPostUrl(b),e.method="POST",e.acceptCharset="utf-8";for(var f in a){var g=document.createElement("input");g.type="hidden",g.name=f,g.value=FMJQ.browser.msie?FOTOMOTO.encode_utf8(a[f]):decodeURIComponent(a[f]),e.appendChild(g)}document.body.appendChild(e),this.postForm(e,c,d),document.body.removeChild(e)},formatPostUrl:function(a){return/^http:\/\//.test(a)?a:FOTOMOTO_CONFIG.script_domain+"/cart/post_data"+a},formatStatusUrl:function(a){return/^http:\/\//.test(a)?a:a==null?null:FOTOMOTO_CONFIG.script_domain+"/cart/get_data"+a+"&app_store_id="+FOTOMOTO_CONFIG.app_widget_id+"&fotomoto_cart_session_key="+this.session_key}},FOTOMOTO.Buyer=new FOTOMOTO.Class,FOTOMOTO.Buyer.prototype={init:function(){this.isLoggedIn=!1,this.favorite_callback=!1,this.isControlPanel=!1,this.loginEnabled=!1},initLoginPanel:function(){if(!this.loginEnabled)return FMJQ("#fotomotoLoginBar a").hide(),FMJQ("#fotomotoMainProducts #fm_favorite").hide(),!1;var a=FOTOMOTO.Cart.getActiveWidget();FMJQ("#fm_favorite").attr("class",""),FMJQ("#fm_favorite").addClass("favorite_"+a.id),FMJQ("#fm_favoriteOptions").hide(),this.isLoggedIn?this.showLogout():(this.favorite_callback=!1,this.hideLogout())},showLogin:function(){FMJQ("#fotomotoLoginPanel").show(),FMJQ("#fotomotoRegister").hide(),FMJQ("#fotomotoLogin").show(),FMJQ("#fm_login_message").html("").hide()},showSignup:function(){FMJQ("#fotomotoLoginPanel").show(),FMJQ("#fotomotoLogin").hide(),FMJQ("#fotomotoRegister").show(),FMJQ("#fm_signup_message").html("").hide()},login:function(){if(this.valid("fotomotoLogin")){var a=FOTOMOTO_CONFIG.buyer_domain+"/user/perm_login",b=FOTOMOTO_CONFIG.buyer_domain+"/user/get_data/?act=login_info&fotomoto_cart_session_key="+FOTOMOTO.POST.session_key;return FOTOMOTO.POST.postData({email:FMJQ("#fm_email").val(),password:FMJQ("#fm_pass").val(),persistent:FMJQ("#persistent_inputcheckbox").is(":checked")},a,b,FOTOMOTO.BUYER.loginStatus),!1}},loginStatus:function(a){a.post_result.status==0?FMJQ("#fm_login_message").html('<span style="color:red;font-size:11px;">Wrong email or password</span>').show():(FOTOMOTO.BUYER.favorite_callback||FOTOMOTO.showMessage("You are now logged in."),FOTOMOTO.BUYER.loggedIn())},signup:function(){if(this.valid("fotomotoRegister")){var a=FOTOMOTO_CONFIG.buyer_domain+"/user/perm_signup",b=FOTOMOTO_CONFIG.buyer_domain+"/user/get_data/?act=signup_info&fotomoto_cart_session_key="+FOTOMOTO.POST.session_key;return FOTOMOTO.POST.postData({email:FMJQ("#fm_reg_email").val(),password:FMJQ("#fm_reg_pass").val(),first_name:FMJQ("#fm_fname").val(),last_name:FMJQ("#fm_lname").val()},a,b,FOTOMOTO.BUYER.signupStatus),!1}},signupStatus:function(a){a.post_result.status==0?FMJQ("#fm_signup_message").html('<span style="color:red;font-size:11px;">'+a.signup_error+"</span>").show():(FOTOMOTO.BUYER.favorite_callback||FOTOMOTO.showMessage("Thanks for joining us. Please check your email for the account activation link. Activate your account within 15 days or it will be removed from our system.",null,{width:460,height:200}),FOTOMOTO.BUYER.loggedIn())},logout:function(){var a=FOTOMOTO_CONFIG.buyer_domain+"/user/perm_logout",b=b=FOTOMOTO_CONFIG.buyer_domain+"/user/get_data/?act=login_info&fotomoto_cart_session_key="+FOTOMOTO.POST.session_key;return FOTOMOTO.POST.postData({},a,b,FOTOMOTO.BUYER.logoutStatus),!1},logoutStatus:function(a){FOTOMOTO.BUYER.updateLoginInfo(a.post_result);for(var b in FOTOMOTO.Cart.widgets)FOTOMOTO.Cart.widgets[b].updateFavorite(-1);FOTOMOTO.showMessage("Successfully logged out.")},getLoginInfo:function(){var a=FOTOMOTO_CONFIG.buyer_domain+"/user/perm_login?status";FMJQ.getScript(a)},updateLoginInfo:function(a){a.status==1&&this.loggedIn(),a.status==0&&(this.isLoggedIn=!1,this.hideLogout())},loggedIn:function(){this.isLoggedIn=!0,FMJQ("#fotomotoLoginPanel").hide(),FMJQ("#fotomotoLogin").hide(),this.showLogout();for(var a in FOTOMOTO.Cart.widgets)FOTOMOTO.Cart.widgets[a].loadFavorite();this.favorite_callback&&(this.favorite_callback=!1,this.addFavorite())},showFavoriteOptions:function(){return this.isLoggedIn?(FMJQ(".fm_shareOptions").hide(),FMJQ("#fm_favoriteOptions").toggle(),!1):(this.showLogin(),this.favorite_callback=!0,!1)},addFavorite:function(){var a=FOTOMOTO.Cart.getActiveWidget(),b=[];b.push("store_key="+FOTOMOTO_CONFIG.app_widget_id),b.push("widget_id="+a.id),b.push("image_url="+encodeURIComponent(a.image.src)),b.push("cachebursted="+(new Date).getTime());var c=FOTOMOTO_CONFIG.buyer_domain+"/photos/add_favorite/?"+b.join("&");FMJQ.getScript(c)},afterAddFavorite:function(a){FOTOMOTO.showMessage("This photo has been added to your favorites.");var b=FOTOMOTO.Cart.getWidget(a);b.updateFavorite(1)},removeFavorite:function(){var a=FOTOMOTO.Cart.getActiveWidget(),b=[];b.push("store_key="+FOTOMOTO_CONFIG.app_widget_id),b.push("widget_id="+a.id),b.push("image_url="+encodeURIComponent(a.image.src)),b.push("cachebursted="+(new Date).getTime());var c=FOTOMOTO_CONFIG.buyer_domain+"/photos/remove_favorite/?"+b.join("&");FMJQ.getScript(c)},afterRemoveFavorite:function(a){FOTOMOTO.showMessage("This photo has been removed from your favorites.");var b=FOTOMOTO.Cart.getWidget(a);b.updateFavorite(0)},updateFavorite:function(a,b){var c=FOTOMOTO.Cart.getWidget(a);c.updateFavorite(b)},hideLogout:function(){FMJQ("#fotomotoLoginLink").show(),FMJQ("#fotomotoRegisterLink").show(),FMJQ("#fotomotoLogoutLink").hide(),FOTOMOTO.BUYER.isControlPanel&&FMJQ("#fotomotoLoginBar a").hide()},showLogout:function(){FMJQ("#fotomotoLoginLink").hide(),FMJQ("#fotomotoRegisterLink").hide(),FMJQ("#fotomotoLogoutLink").show(),FOTOMOTO.BUYER.isControlPanel&&FMJQ("#fotomotoLoginBar a").hide()},valid:function(a){return FMJQ("#"+a+" .req").each(function(){FOTOMOTO.testBlank(FMJQ(this).val())?FMJQ(this).addClass("FotomotoFieldError"):FMJQ(this).removeClass("FotomotoFieldError")}),FMJQ("#"+a+" .FotomotoFieldError").length>0?(FOTOMOTO.showMessage("Please fill in the required fields"),!1):(FMJQ("#"+a+" .val_email").each(function(){FOTOMOTO.testEmail(FMJQ(this).val())?FMJQ(this).removeClass("FotomotoFieldError"):FMJQ(this).addClass("FotomotoFieldError")}),FMJQ("#"+a+" .FotomotoFieldError").length>0?(FOTOMOTO.showMessage("Email is not valid."),!1):!0)}},FOTOMOTO.BUYER=new FOTOMOTO.Buyer,FOTOMOTO.startInit(),FMJQ(document).ready(FOTOMOTO.stopInit),FOTOMOTO.addLoadEvent=function(a){var b=window.onload;typeof window.onload!="function"?window.onload=a:window.onload=function(){b(),a()}},FOTOMOTO.addLoadEvent(FOTOMOTO.stopInit);